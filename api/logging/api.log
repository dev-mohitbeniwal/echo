{"level":"info","timestamp":"2024-07-21T16:54:41.651+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T16:54:41.665+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T16:54:41.667+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T16:54:41.667+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.686+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.687+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.696+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.696+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.697+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.697+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.702+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.703+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T16:54:46.329+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:54:46.329+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:54:46.330+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"dao/department_dao.go:366","msg":"Listing departments","limit":5,"offset":0}
{"level":"info","timestamp":"2024-07-21T16:54:46.492+0530","caller":"dao/department_dao.go:402","msg":"Departments listed successfully","count":2,"duration":0.051396583}
{"level":"info","timestamp":"2024-07-21T16:54:46.492+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments","query":"limit=5","status":200,"latency":0.164173375,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:55:16.473+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:55:16.474+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:55:16.474+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:55:16.525+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:55:16.525+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.571+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":2,"duration":0.044669667}
{"level":"info","timestamp":"2024-07-21T16:55:16.571+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.098736542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.398+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:55:35.398+0530","caller":"dao/department_dao.go:324","msg":"Retrieving department","deptID":"dept-3"}
{"level":"warn","timestamp":"2024-07-21T16:55:35.418+0530","caller":"dao/department_dao.go:358","msg":"Department not found","deptID":"dept-3","duration":0.020099292}
{"level":"info","timestamp":"2024-07-21T16:55:35.418+0530","caller":"dao/department_dao.go:60","msg":"Creating new department","deptName":"dept-3-org-2"}
{"level":"error","timestamp":"2024-07-21T16:55:35.423+0530","caller":"dao/department_dao.go:105","msg":"Failed to create department","error":"no id returned","deptName":"dept-3-org-2","duration":0.005391625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:105\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T16:55:35.424+0530","caller":"service/department_service.go:159","msg":"Error creating department","error":"no id returned","userID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:159\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T16:55:35.424+0530","caller":"util/http_util.go:11","msg":"Failed to create department","error":"internal server error","path":"/api/v1/departments","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:67\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T16:55:35.424+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":500,"latency":0.05865175,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:33.650+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:33.651+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:33.652+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:33.687+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"dao/organization_dao.go:259","msg":"Retrieving organization","orgID":"org-2"}
{"level":"warn","timestamp":"2024-07-21T16:56:33.775+0530","caller":"dao/organization_dao.go:293","msg":"Organization not found","orgID":"org-2","duration":0.08631175}
{"level":"info","timestamp":"2024-07-21T16:56:33.775+0530","caller":"dao/organization_dao.go:60","msg":"Creating new organization","orgName":"Org 2"}
{"level":"info","timestamp":"2024-07-21T16:56:33.793+0530","caller":"dao/organization_dao.go:106","msg":"Organization created successfully","orgID":"org-2","duration":0.017936958}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-2","userID":""}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.157891291,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-2","orgName":"Org 2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"dao/department_dao.go:324","msg":"Retrieving department","deptID":"dept-3"}
{"level":"warn","timestamp":"2024-07-21T16:56:38.566+0530","caller":"dao/department_dao.go:358","msg":"Department not found","deptID":"dept-3","duration":0.005950042}
{"level":"info","timestamp":"2024-07-21T16:56:38.566+0530","caller":"dao/department_dao.go:60","msg":"Creating new department","deptName":"dept-3-org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.578+0530","caller":"dao/department_dao.go:113","msg":"Department created successfully","deptID":"dept-3","duration":0.012126917}
{"level":"info","timestamp":"2024-07-21T16:56:38.582+0530","caller":"dao/department_dao.go:170","msg":"BELONGS_TO relationship verified","deptID":"dept-3","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-3","userID":""}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.066577666,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-3","deptName":"dept-3-org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:45.129+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.134+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":2,"duration":0.0039305}
{"level":"info","timestamp":"2024-07-21T16:56:45.134+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.036093042,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:48.555+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:48.555+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:48.556+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:48.586+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-2"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-2"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.591+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":1,"duration":0.003952583}
{"level":"info","timestamp":"2024-07-21T16:56:48.591+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.036426333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:57:31.723+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:57:31.724+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:57:31.724+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:57:31.758+0530","caller":"dao/organization_dao.go:346","msg":"Searching organizations","criteria":{"name":"Org"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.758+0530","caller":"dao/organization_dao.go:399","msg":"Executing query","query":"MATCH (o:ORGANIZATION) WHERE 1=1 AND toLower(o.name) CONTAINS toLower($name) RETURN o ORDER BY o.createdAt DESC","params":{"name":"Org"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.802+0530","caller":"dao/organization_dao.go:422","msg":"Organizations searched successfully","count":2,"duration":0.043714167}
{"level":"info","timestamp":"2024-07-21T16:57:31.802+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/organizations/search","query":"","status":200,"latency":0.079941125,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:03:25.599+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:03:25.600+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:03:25.600+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:03:25.779+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:03:25.781+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:03:25.838+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.057501167}
{"level":"error","timestamp":"2024-07-21T17:03:25.838+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:03:25.838+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.240069,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:21:25.027+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:21:25.028+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:21:25.028+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:21:25.244+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.003715167}
{"level":"error","timestamp":"2024-07-21T17:21:25.244+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:21:25.244+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.218812292,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:24:19.828+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:24:19.828+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:24:19.829+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:24:24.456+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:24:24.470+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:24:24.473+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:24:24.473+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.478+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.478+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.480+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.480+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.482+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.482+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.485+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.485+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:24:27.405+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:24:27.405+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:24:27.406+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:24:27.529+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:24:27.529+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:24:27.533+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.002923084}
{"level":"info","timestamp":"2024-07-21T17:24:27.533+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T17:24:27.598+0530","caller":"dao/user_dao.go:115","msg":"User created successfully","userID":"user-1","duration":0.064589583}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-1","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.204751542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-1"}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-1","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T17:29:41.954+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:29:41.955+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:29:41.955+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:29:45.749+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:29:45.766+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:29:45.769+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:29:45.769+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.775+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.775+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.779+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.779+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.781+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.781+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.783+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.783+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:32:24.069+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:32:24.070+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:32:24.071+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:32:24.174+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:32:24.176+0530","caller":"dao/user_dao.go:343","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T17:32:24.219+0530","caller":"dao/user_dao.go:377","msg":"User not found","userID":"user-2","duration":0.043753208}
{"level":"info","timestamp":"2024-07-21T17:32:24.219+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:32:24.287+0530","caller":"dao/user_dao.go:130","msg":"User created successfully","userID":"user-2","duration":0.06749725}
{"level":"error","timestamp":"2024-07-21T17:32:24.310+0530","caller":"dao/user_dao.go:186","msg":"BELONGS_TO relationship not created","userID":"user-2","orgID":"org-2","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:186\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:135\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-2","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.250714875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-2","userName":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:35:08.318+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:35:08.320+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:35:08.320+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:35:12.356+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:35:12.372+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:35:12.375+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:35:12.375+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.380+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.380+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.383+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.383+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.385+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.385+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.388+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.388+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"dao/user_dao.go:343","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T17:35:18.946+0530","caller":"dao/user_dao.go:377","msg":"User not found","userID":"user-2","duration":0.002736667}
{"level":"info","timestamp":"2024-07-21T17:35:18.946+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:35:19.011+0530","caller":"dao/user_dao.go:130","msg":"User created successfully","userID":"user-2","duration":0.065556667}
{"level":"info","timestamp":"2024-07-21T17:35:19.031+0530","caller":"dao/user_dao.go:188","msg":"BELONGS_TO relationship verified","userID":"user-2","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-2","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.200690625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-2","userName":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T18:32:24.629+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T18:32:24.630+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T18:32:24.631+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:11:21.376+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:11:21.390+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:11:21.393+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:11:21.393+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.398+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.398+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.400+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.400+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.403+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.403+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.405+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.405+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:11:24.388+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:11:24.388+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:11:24.389+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:11:24.493+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"12345"}
{"level":"warn","timestamp":"2024-07-21T19:11:24.500+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"12345","duration":0.006131708}
{"level":"info","timestamp":"2024-07-21T19:11:24.500+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"johndoe"}
{"level":"info","timestamp":"2024-07-21T19:11:24.595+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"12345","duration":0.094456834}
{"level":"error","timestamp":"2024-07-21T19:11:24.595+0530","caller":"dao/user_dao.go:138","msg":"Failed to verify relationships","error":"no results returned when verifying relationships","userID":"12345","orgID":"org-2","deptID":"dept-3","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:138\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"12345","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"12345"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.2216345,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"12345","userName":"johndoe"}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:44.100+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:44.100+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:44.106+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.004604709}
{"level":"error","timestamp":"2024-07-21T19:14:44.106+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:44.107+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.128635875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:14:50.269+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:50.270+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:50.270+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:50.304+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.003961833}
{"level":"error","timestamp":"2024-07-21T19:14:50.304+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:50.305+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.036481333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:14:57.874+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:57.877+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:57.889+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:57.921+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:57.940+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.008881375}
{"level":"error","timestamp":"2024-07-21T19:14:57.941+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:57.941+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.0669925,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:15:08.535+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-5"}
{"level":"warn","timestamp":"2024-07-21T19:15:08.540+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"user-5","duration":0.004036666}
{"level":"info","timestamp":"2024-07-21T19:15:08.540+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:15:08.556+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"user-5","duration":0.015222959}
{"level":"error","timestamp":"2024-07-21T19:15:08.558+0530","caller":"dao/user_dao.go:138","msg":"Failed to verify relationships","error":"no results returned when verifying relationships","userID":"user-5","orgID":"org-2","deptID":"dept-3","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:138\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-5","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-5"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-5","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.067388167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:16:03.024+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T19:16:03.025+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T19:16:03.025+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:16:06.631+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:16:06.643+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:16:06.645+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:16:06.645+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.648+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.648+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.649+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.649+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.668+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.669+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.671+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.672+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:16:15.615+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T19:16:15.617+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T19:16:15.617+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:16:17.760+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:16:17.768+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:16:17.771+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:16:17.771+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.776+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.776+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.778+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.778+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.779+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.779+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.782+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.782+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:16:20.739+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:16:20.739+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:16:20.740+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:16:20.846+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:16:20.848+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-7"}
{"level":"warn","timestamp":"2024-07-21T19:16:20.856+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"user-7","duration":0.008032625}
{"level":"info","timestamp":"2024-07-21T19:16:20.856+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:16:20.908+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"user-7","duration":0.052121458}
{"level":"info","timestamp":"2024-07-21T19:16:20.937+0530","caller":"dao/user_dao.go:189","msg":"BELONGS_TO relationship verified","userID":"user-7","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T19:16:20.937+0530","caller":"dao/user_dao.go:195","msg":"MEMBER_OF relationship verified","userID":"user-7","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-7","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-7"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.212257959,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-7","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:17:55.793+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:17:55.794+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:17:55.794+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"dao/user_dao.go:386","msg":"Listing users","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-21T19:17:55.929+0530","caller":"dao/user_dao.go:422","msg":"Users listed successfully","count":3,"duration":0.039218125}
{"level":"info","timestamp":"2024-07-21T19:17:55.929+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.137229541,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:26:48.584+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:26:48.586+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:26:48.586+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:26:52.566+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:26:52.583+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:26:52.586+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:26:52.586+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.592+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.592+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.595+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.595+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.597+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.597+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.616+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.616+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.681+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.681+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.712+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.712+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.746+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.746+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:27:45.155+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:27:45.155+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T21:27:45.156+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:27:45.330+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-21T21:27:45.331+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 1h23m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:27:45.332+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 1h23m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:27:45.332+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":401,"latency":0.177800959,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:28:43.832+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:28:43.833+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T21:28:43.834+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:28:43.863+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-21T21:28:43.863+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 1h24m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:28:43.864+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 1h24m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:28:43.864+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":401,"latency":0.033479625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:28:49.427+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-21T21:28:49.455+0530","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.027283916}
{"level":"info","timestamp":"2024-07-21T21:28:49.455+0530","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-21T21:28:49.476+0530","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.020523167}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.09955475,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:29:31.553+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-21T21:29:31.571+0530","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.017396917}
{"level":"info","timestamp":"2024-07-21T21:29:31.572+0530","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.623+0530","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.051574625}
{"level":"error","timestamp":"2024-07-21T21:29:31.639+0530","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.127985167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:30:33.365+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:30:33.366+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:30:33.366+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:30:33.459+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:30:33.500+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.039308666}
{"level":"info","timestamp":"2024-07-21T21:30:33.500+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:30:33.571+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.071246959,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:33.571+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:33.572+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:30:33.572+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.207691167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:30:44.814+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:30:44.814+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:30:44.815+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:30:44.854+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.001677375}
{"level":"info","timestamp":"2024-07-21T21:30:44.854+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.058991334,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:30:44.913+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.100099667,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:33:47.351+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:33:47.353+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:33:47.353+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:33:51.432+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:33:51.457+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:33:51.460+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:33:51.460+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.479+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.479+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.482+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.482+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.485+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.485+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.487+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.487+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.492+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.492+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.494+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.495+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.497+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.498+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:33:56.476+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:33:56.481+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.003786334}
{"level":"info","timestamp":"2024-07-21T21:33:56.481+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.102571792,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:33:56.584+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.241820083,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:34:46.864+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:34:46.865+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:34:46.865+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:34:46.898+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-21T21:34:46.899+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.036552875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:34:49.769+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:34:49.770+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:34:49.770+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:34:49.804+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.001931}
{"level":"info","timestamp":"2024-07-21T21:34:49.804+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.061609417,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:34:49.867+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.097590875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:43:29.456+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:43:29.457+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:43:29.457+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:43:33.515+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:43:33.525+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:43:33.527+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:43:33.527+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.531+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.531+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.534+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.534+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.537+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.537+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.539+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.539+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.540+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.540+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.542+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.542+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.544+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.545+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:43:38.885+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:43:38.887+0530","caller":"dao/user_dao.go:391","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:43:38.897+0530","caller":"dao/user_dao.go:425","msg":"User not found","userID":"user-1","duration":0.010531}
{"level":"info","timestamp":"2024-07-21T21:43:38.897+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:43:39.018+0530","caller":"dao/user_dao.go:124","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): roleIds, groupIds)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:124\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.023+0530","caller":"dao/user_dao.go:137","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.126017833,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.024+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.024+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:43:39.024+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.3190765,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:45:13.427+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:45:13.427+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:45:13.428+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:45:17.138+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:45:17.148+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:45:17.150+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:45:17.151+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.153+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.154+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.155+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.155+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.156+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.156+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.157+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.157+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.158+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.159+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.160+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.160+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.161+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.161+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:45:24.141+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:45:24.141+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:45:24.142+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:45:24.236+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"dao/user_dao.go:391","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:45:24.243+0530","caller":"dao/user_dao.go:425","msg":"User not found","userID":"user-1","duration":0.00545075}
{"level":"info","timestamp":"2024-07-21T21:45:24.243+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:45:24.349+0530","caller":"dao/user_dao.go:124","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): roleIds, groupIds)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:124\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"dao/user_dao.go:137","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.107144167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:45:24.351+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.210764458,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:49:14.715+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:49:14.733+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:49:14.735+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:49:14.735+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.740+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.740+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.741+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.742+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.743+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.743+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.745+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.745+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.747+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.747+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.748+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.748+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.750+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.751+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:49:18.797+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:49:18.798+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:49:18.798+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:49:18.889+0530","caller":"dao/user_dao.go:407","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:49:18.894+0530","caller":"dao/user_dao.go:441","msg":"User not found","userID":"user-1","duration":0.005072792}
{"level":"info","timestamp":"2024-07-21T21:49:18.894+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:49:18.930+0530","caller":"dao/user_dao.go:140","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid use of MATCH inside FOREACH (line 16, column 13 (offset: 512))\n\"            MATCH (r:ROLE {id: roleId})\"\n             ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:140\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.932+0530","caller":"dao/user_dao.go:153","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.038109167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:153\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.932+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.933+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:49:18.933+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.136654916,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:50:15.948+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:50:15.949+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:50:15.949+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:50:30.877+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:50:30.891+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:50:30.894+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:50:30.894+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.899+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.900+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.902+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.902+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.903+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.903+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.905+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.905+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.907+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.907+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.909+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.909+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.910+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.911+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:50:34.685+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:50:34.685+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:50:34.686+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:50:34.786+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"dao/user_dao.go:409","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:50:34.795+0530","caller":"dao/user_dao.go:443","msg":"User not found","userID":"user-1","duration":0.007503584}
{"level":"info","timestamp":"2024-07-21T21:50:34.795+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"dao/user_dao.go:155","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.126130708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:155\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:50:34.922+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.237640917,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:01:34.639+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:01:34.640+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:01:34.640+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:01:38.494+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:01:38.503+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:01:38.505+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:01:38.505+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.509+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.509+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.510+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.511+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.512+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.512+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.513+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.513+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.514+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.514+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.515+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.515+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.517+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.518+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:01:43.411+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:01:43.412+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T22:01:43.412+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.601+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:01:43.601+0530","caller":"dao/user_dao.go:409","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T22:01:43.611+0530","caller":"dao/user_dao.go:443","msg":"User not found","userID":"user-1","duration":0.010267667}
{"level":"info","timestamp":"2024-07-21T22:01:43.611+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T22:01:43.627+0530","caller":"dao/user_dao.go:149","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:149\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"dao/user_dao.go:155","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.018192208,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:155\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:01:43.630+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.2196795,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:05:33.088+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:05:33.090+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:05:33.090+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:05:36.982+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:05:36.996+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:05:36.998+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:05:36.999+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.004+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.004+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.006+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.006+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.007+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.007+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.008+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.008+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.010+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.010+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.012+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.012+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.014+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.015+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:05:41.392+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:05:41.393+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T22:05:41.393+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:48","msg":"Failed to fetch JWKS: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.GetCognitoPublicKey\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:48\ngithub.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:137\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:139","msg":"Error getting public key: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:139\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:05:41.402+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":401,"latency":0.010428042,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:06:51.039+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:06:51.040+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:06:51.040+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:06:51.207+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:06:51.207+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"dao/user_dao.go:412","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T22:06:51.223+0530","caller":"dao/user_dao.go:446","msg":"User not found","userID":"user-1","duration":0.014635458}
{"level":"info","timestamp":"2024-07-21T22:06:51.223+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:06:51.224+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:06:51.224+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-1","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:06:51+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:06:51+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:06:51.241+0530","caller":"dao/user_dao.go:152","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:152\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.244+0530","caller":"dao/user_dao.go:158","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.021535666,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:158\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.245+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.245+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:06:51.245+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.207572791,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:18:05.785+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:18:05.786+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:18:05.787+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:18:31.353+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:18:31.371+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:18:31.374+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:18:31.374+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.379+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.380+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.382+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.382+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.384+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.384+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.385+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.385+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.387+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.387+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.389+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.389+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.391+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.392+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:18:41.729+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:18:41.730+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:18:41.731+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:18:42.025+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:18:42.027+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-21T22:18:42.079+0530","caller":"dao/user_dao.go:449","msg":"User retrieved successfully","userID":"user-1","duration":0.052602625}
{"level":"error","timestamp":"2024-07-21T22:18:42.080+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:18:42.080+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.352215083,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:455","msg":"User not found","userID":"user-2","duration":0.0061735}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:18:47+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:18:47+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:18:47.028+0530","caller":"dao/user_dao.go:167","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.009573708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:167\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:18:47.028+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:18:47.029+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:18:47.029+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.069453041,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:19:40.686+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:19:40.687+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:19:40.688+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:19:46.181+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:19:46.197+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:19:46.200+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:19:46.201+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.206+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.206+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.207+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.207+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.209+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.209+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.212+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.212+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.214+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.214+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.216+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.216+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.218+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.218+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:19:50.022+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:19:50.022+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:19:50.023+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:19:51.260+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"dao/user_dao.go:414","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:19:51.268+0530","caller":"dao/user_dao.go:448","msg":"User not found","userID":"user-2","duration":0.007069042}
{"level":"info","timestamp":"2024-07-21T22:19:51.268+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:19:51.269+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:19:51.269+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:19:51+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:19:51+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:19:51.278+0530","caller":"dao/user_dao.go:154","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:154\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"dao/user_dao.go:160","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.013203,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:160\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:19:51.282+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":1.261322625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:21:07.627+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:21:07.628+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:21:07.628+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:21:11.934+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:21:11.953+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:21:11.956+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:21:11.957+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.962+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.962+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.965+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.965+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.967+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.967+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.969+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.969+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.970+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.970+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.972+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.972+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.974+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.975+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:21:16.049+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:21:16.050+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:21:16.050+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"dao/user_dao.go:420","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:21:16.251+0530","caller":"dao/user_dao.go:454","msg":"User not found","userID":"user-2","duration":0.007251833}
{"level":"info","timestamp":"2024-07-21T22:21:16.251+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:21:16.253+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:21:16.253+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:21:16+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:21:16+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"warn","timestamp":"2024-07-21T22:21:16.264+0530","caller":"dao/user_dao.go:160","msg":"User creation query didn't return a result"}
{"level":"error","timestamp":"2024-07-21T22:21:16.266+0530","caller":"dao/user_dao.go:166","msg":"Failed to create user","error":"user creation query didn't return a result","username":"user.one","duration":0.014426875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:166\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:21:16.266+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"user creation query didn't return a result","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:21:16.267+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:21:16.267+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.219547792,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:22:07.218+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:22:07.219+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:22:07.220+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:22:10.855+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:22:10.865+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:22:10.869+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:22:10.869+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.878+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.878+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.881+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.881+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.884+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.884+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.887+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.887+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.889+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.889+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.891+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.891+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.893+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.894+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:22:13.493+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:22:13.493+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:22:13.494+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:22:14.771+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:22:14.776+0530","caller":"dao/user_dao.go:455","msg":"User not found","userID":"user-2","duration":0.003604042}
{"level":"info","timestamp":"2024-07-21T22:22:14.776+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:22:14.778+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:22:14.778+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:22:14+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:22:14+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"warn","timestamp":"2024-07-21T22:22:14.784+0530","caller":"dao/user_dao.go:161","msg":"User creation query didn't return a result"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"dao/user_dao.go:167","msg":"Failed to create user","error":"user creation query didn't return a result","username":"user.one","duration":0.009491333,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:167\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"user creation query didn't return a result","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:22:14.786+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":1.294326417,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:25:39.247+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:25:39.249+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:25:39.249+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:25:46.756+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:25:46.778+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:25:46.781+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:25:46.781+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.787+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.787+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.788+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.788+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.790+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.790+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.792+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.792+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.793+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.793+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.794+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.794+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.795+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.796+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:25:50.141+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:25:50.141+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:25:50.142+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:25:50.398+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:25:50.402+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.003234}
{"level":"info","timestamp":"2024-07-21T22:25:50.402+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:25:50.403+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-21T22:25:50.403+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:25:50+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:25:50+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-21T22:25:50.513+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-21T22:25:50.513+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-21T22:25:50.514+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.112171375,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:25:50.515+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:25:50.515+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:25:50.515+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.37508475,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:47:18.013+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:47:18.016+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:47:18.016+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:47:18.127+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:47:18.129+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:47:18.136+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.007272125}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:47:18+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:47:18+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:47:18.149+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-27T15:47:18.149+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:47:18.150+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.013255083,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:18.151+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:18.151+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:47:18.151+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.147505333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:47:32.222+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.004338417}
{"level":"info","timestamp":"2024-07-27T15:47:32.223+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:47:32.223+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:47:32.224+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:47:32+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:47:32+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:47:32.229+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-27T15:47:32.229+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.007446959,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:47:32.230+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.040488583,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:49:19.444+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T15:49:19.445+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T15:49:19.445+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T15:49:36.805+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T15:49:36.818+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T15:49:36.821+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T15:49:36.821+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.826+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.826+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.828+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.828+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.830+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.830+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.832+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.832+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.834+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.834+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.836+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.836+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.838+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.838+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T15:49:43.103+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:49:43.103+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:49:43.104+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:49:43.199+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:49:43.199+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-2","duration":0.00265825}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:49:43+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:49:43+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:49:43.213+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T15:49:43.213+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T15:49:43.214+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.012798833,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:49:43.217+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.114211583,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:52:42.876+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:52:42.879+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:52:42.879+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:52:42.967+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T15:52:42.972+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-9","duration":0.003914708}
{"level":"info","timestamp":"2024-07-27T15:52:42.972+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T15:52:42.974+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:52:42.975+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:52:42+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:52:42+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:52:42.983+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.nine","duration":0.010979334,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:52:42.984+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:52:42.984+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:52:42.984+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.109020542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:25:55.329+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T16:25:55.331+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T16:25:55.331+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T16:25:59.390+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:5001"}
{"level":"info","timestamp":"2024-07-27T16:27:15.963+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T16:27:15.974+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T16:27:15.979+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T16:27:15.979+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.088+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.088+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.129+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.129+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.161+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.161+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.201+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.201+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.240+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.240+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.274+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.274+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.314+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.315+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T16:27:24.175+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:24.175+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:24.176+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:24.371+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-27T16:27:24.437+0530","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.064792542}
{"level":"info","timestamp":"2024-07-27T16:27:24.437+0530","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T16:27:24.576+0530","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.139040375}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.441000917,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T16:27:41.347+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:41.347+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:41.348+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-27T16:27:41.421+0530","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.047273875}
{"level":"info","timestamp":"2024-07-27T16:27:41.422+0530","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.533+0530","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.111685125}
{"level":"error","timestamp":"2024-07-27T16:27:41.595+0530","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.280816333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:27:46.860+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:46.860+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:46.861+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:46.887+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:46.890+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T16:27:46.935+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-9","duration":0.045264917}
{"level":"info","timestamp":"2024-07-27T16:27:46.936+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T16:27:46.937+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T16:27:46.937+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T16:27:46+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T16:27:46+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T16:27:47.026+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T16:27:47.026+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T16:27:47.056+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T16:27:47.057+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.nine","duration":0.121211708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T16:27:47.057+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T16:27:47.058+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T16:27:47.058+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.198236625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:56:08.472+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T16:56:08.474+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T16:56:08.474+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T17:42:52.269+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:42:52.289+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:42:52.294+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:42:52.294+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.364+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.364+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.367+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.367+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.369+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.369+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.372+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.372+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.375+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.375+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.377+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.377+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.379+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.379+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:43:26.978+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:43:26.979+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T17:43:26.979+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:43:27.154+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":401,"latency":0.177752834,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:43:42.690+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:43:42.691+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T17:43:42.691+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.718+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:43:42.718+0530","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:467","msg":"User not found","userID":"user-9","duration":0.021623583}
{"level":"info","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:148","msg":"Query: ","query":"\n            CREATE (u:USER {id: $id})\n            SET u += $props\n            WITH u\n            OPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n            FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n                CREATE (u)-[:WORKS_FOR]->(o)\n            )\n            WITH u\n            OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n            FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n                CREATE (u)-[:MEMBER_OF]->(d)\n            )\n        \n            RETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T17:43:42.741+0530","caller":"dao/user_dao.go:149","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:43:42+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T17:43:42+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T17:43:42.790+0530","caller":"dao/user_dao.go:157","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T17:43:42.790+0530","caller":"dao/user_dao.go:159","msg":"Result: ","result":{}}
{"level":"info","timestamp":"2024-07-27T17:43:42.792+0530","caller":"dao/user_dao.go:163","msg":"Result record","record":["user-9","User Nine","user.nine@example.com"]}
{"level":"info","timestamp":"2024-07-27T17:43:42.799+0530","caller":"dao/user_dao.go:186","msg":"User created successfully","userID":"user-9","duration":0.059429417}
{"level":"info","timestamp":"2024-07-27T17:43:42.836+0530","caller":"dao/user_dao.go:244","msg":"BELONGS_TO relationship verified","userID":"user-9","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:43:42.836+0530","caller":"dao/user_dao.go:250","msg":"MEMBER_OF relationship verified","userID":"user-9","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-9","creatorID":""}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.188652458,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-9"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-9","userName":"user.nine"}
