{"level":"info","timestamp":"2024-07-21T16:54:41.651+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T16:54:41.665+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T16:54:41.667+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T16:54:41.667+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.686+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.687+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.696+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.696+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.697+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.697+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.702+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T16:54:41.703+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T16:54:46.329+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:54:46.329+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:54:46.330+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:54:46.440+0530","caller":"dao/department_dao.go:366","msg":"Listing departments","limit":5,"offset":0}
{"level":"info","timestamp":"2024-07-21T16:54:46.492+0530","caller":"dao/department_dao.go:402","msg":"Departments listed successfully","count":2,"duration":0.051396583}
{"level":"info","timestamp":"2024-07-21T16:54:46.492+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments","query":"limit=5","status":200,"latency":0.164173375,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:55:16.473+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:55:16.474+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:55:16.474+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:55:16.525+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:55:16.525+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.526+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:55:16.571+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":2,"duration":0.044669667}
{"level":"info","timestamp":"2024-07-21T16:55:16.571+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.098736542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:55:35.366+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.397+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:55:35.398+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:55:35.398+0530","caller":"dao/department_dao.go:324","msg":"Retrieving department","deptID":"dept-3"}
{"level":"warn","timestamp":"2024-07-21T16:55:35.418+0530","caller":"dao/department_dao.go:358","msg":"Department not found","deptID":"dept-3","duration":0.020099292}
{"level":"info","timestamp":"2024-07-21T16:55:35.418+0530","caller":"dao/department_dao.go:60","msg":"Creating new department","deptName":"dept-3-org-2"}
{"level":"error","timestamp":"2024-07-21T16:55:35.423+0530","caller":"dao/department_dao.go:105","msg":"Failed to create department","error":"no id returned","deptName":"dept-3-org-2","duration":0.005391625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:105\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T16:55:35.424+0530","caller":"service/department_service.go:159","msg":"Error creating department","error":"no id returned","userID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:159\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T16:55:35.424+0530","caller":"util/http_util.go:11","msg":"Failed to create department","error":"internal server error","path":"/api/v1/departments","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:67\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T16:55:35.424+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":500,"latency":0.05865175,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:33.650+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:33.651+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:33.652+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:33.687+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:33.688+0530","caller":"dao/organization_dao.go:259","msg":"Retrieving organization","orgID":"org-2"}
{"level":"warn","timestamp":"2024-07-21T16:56:33.775+0530","caller":"dao/organization_dao.go:293","msg":"Organization not found","orgID":"org-2","duration":0.08631175}
{"level":"info","timestamp":"2024-07-21T16:56:33.775+0530","caller":"dao/organization_dao.go:60","msg":"Creating new organization","orgName":"Org 2"}
{"level":"info","timestamp":"2024-07-21T16:56:33.793+0530","caller":"dao/organization_dao.go:106","msg":"Organization created successfully","orgID":"org-2","duration":0.017936958}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-2","userID":""}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.157891291,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:33.806+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-2","orgName":"Org 2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:38.530+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.560+0530","caller":"dao/department_dao.go:324","msg":"Retrieving department","deptID":"dept-3"}
{"level":"warn","timestamp":"2024-07-21T16:56:38.566+0530","caller":"dao/department_dao.go:358","msg":"Department not found","deptID":"dept-3","duration":0.005950042}
{"level":"info","timestamp":"2024-07-21T16:56:38.566+0530","caller":"dao/department_dao.go:60","msg":"Creating new department","deptName":"dept-3-org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.578+0530","caller":"dao/department_dao.go:113","msg":"Department created successfully","deptID":"dept-3","duration":0.012126917}
{"level":"info","timestamp":"2024-07-21T16:56:38.582+0530","caller":"dao/department_dao.go:170","msg":"BELONGS_TO relationship verified","deptID":"dept-3","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-3","userID":""}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.066577666,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T16:56:38.596+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-3","deptName":"dept-3-org-2"}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:45.099+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:45.129+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.130+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-1"}}
{"level":"info","timestamp":"2024-07-21T16:56:45.134+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":2,"duration":0.0039305}
{"level":"info","timestamp":"2024-07-21T16:56:45.134+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.036093042,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:56:48.555+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:56:48.555+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:56:48.556+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:56:48.586+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"dao/department_dao.go:651","msg":"Searching departments","criteria":{"name":"org-2"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.587+0530","caller":"dao/department_dao.go:714","msg":"Executing query","query":"MATCH (d:DEPARTMENT) WHERE 1=1 AND toLower(d.name) CONTAINS toLower($name) RETURN d ORDER BY d.name ASC","params":{"name":"org-2"}}
{"level":"info","timestamp":"2024-07-21T16:56:48.591+0530","caller":"dao/department_dao.go:737","msg":"Departments searched successfully","resultCount":1,"duration":0.003952583}
{"level":"info","timestamp":"2024-07-21T16:56:48.591+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/departments/search","query":"","status":200,"latency":0.036426333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T16:57:31.723+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T16:57:31.724+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T16:57:31.724+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T16:57:31.755+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.756+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T16:57:31.758+0530","caller":"dao/organization_dao.go:346","msg":"Searching organizations","criteria":{"name":"Org"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.758+0530","caller":"dao/organization_dao.go:399","msg":"Executing query","query":"MATCH (o:ORGANIZATION) WHERE 1=1 AND toLower(o.name) CONTAINS toLower($name) RETURN o ORDER BY o.createdAt DESC","params":{"name":"Org"}}
{"level":"info","timestamp":"2024-07-21T16:57:31.802+0530","caller":"dao/organization_dao.go:422","msg":"Organizations searched successfully","count":2,"duration":0.043714167}
{"level":"info","timestamp":"2024-07-21T16:57:31.802+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/organizations/search","query":"","status":200,"latency":0.079941125,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:03:25.599+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:03:25.600+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:03:25.600+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:03:25.779+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:03:25.780+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:03:25.781+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:03:25.838+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.057501167}
{"level":"error","timestamp":"2024-07-21T17:03:25.838+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:03:25.838+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.240069,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:21:25.027+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:21:25.028+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:21:25.028+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:21:25.239+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:21:25.240+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:21:25.244+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.003715167}
{"level":"error","timestamp":"2024-07-21T17:21:25.244+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:21:25.244+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.218812292,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:24:19.828+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:24:19.828+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:24:19.829+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:24:24.456+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:24:24.470+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:24:24.473+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:24:24.473+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.478+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.478+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.480+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.480+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.482+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.482+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.485+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:24:24.485+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:24:27.405+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:24:27.405+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:24:27.406+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:24:27.529+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:24:27.529+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:24:27.530+0530","caller":"dao/user_dao.go:275","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T17:24:27.533+0530","caller":"dao/user_dao.go:309","msg":"User not found","userID":"user-1","duration":0.002923084}
{"level":"info","timestamp":"2024-07-21T17:24:27.533+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T17:24:27.598+0530","caller":"dao/user_dao.go:115","msg":"User created successfully","userID":"user-1","duration":0.064589583}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-1","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.204751542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-1"}
{"level":"info","timestamp":"2024-07-21T17:24:27.608+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-1","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T17:29:41.954+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:29:41.955+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:29:41.955+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:29:45.749+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:29:45.766+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:29:45.769+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:29:45.769+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.775+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.775+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.779+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.779+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.781+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.781+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.783+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:29:45.783+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:32:24.069+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:32:24.070+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:32:24.071+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:32:24.174+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:32:24.175+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:32:24.176+0530","caller":"dao/user_dao.go:343","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T17:32:24.219+0530","caller":"dao/user_dao.go:377","msg":"User not found","userID":"user-2","duration":0.043753208}
{"level":"info","timestamp":"2024-07-21T17:32:24.219+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:32:24.287+0530","caller":"dao/user_dao.go:130","msg":"User created successfully","userID":"user-2","duration":0.06749725}
{"level":"error","timestamp":"2024-07-21T17:32:24.310+0530","caller":"dao/user_dao.go:186","msg":"BELONGS_TO relationship not created","userID":"user-2","orgID":"org-2","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:186\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:135\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-2","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.250714875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T17:32:24.319+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-2","userName":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:35:08.318+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T17:35:08.320+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T17:35:08.320+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T17:35:12.356+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T17:35:12.372+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T17:35:12.375+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T17:35:12.375+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.380+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.380+0530","caller":"dao/user_dao.go:37","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.383+0530","caller":"dao/user_dao.go:55","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.383+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.385+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.385+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.388+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T17:35:12.388+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiODQzMDEyMjMtMjBiMS00YTY1LWEyZjEtZmI0MTM4NWJmNDMwIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU3ZTZjNDA5LTIxZGItNDJmYi05YzQyLTdiNGUxNzg2ZGU0MyIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTYwNDk5LCJleHAiOjE3MjE1NjQwOTksImlhdCI6MTcyMTU2MDQ5OSwianRpIjoiMWVlMTNkZjItNWFiOC00MDdmLThmMGYtOTk1YTI3OTE3NmY1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.So1KNBoNjcgyw-mLeuePOmfprZ-t0hlDYFefMacZrt5dszbIsEq8_SCkJeTGGkfdPLOr5dYVMLVTFit--LuZC0DEcU-gp3q6Qzt_RY7VASlGQUHHy4AmQE4oznvg4G0ZJByTU0ILwmKIQN_sx_nrzAP3oJFS479PfVvDRsKKu9ND5h7yYmF7E64n3_QFXDnmbsWp8o3DiTJoQNTUICfCDWIMFdApSpV1SuT7NsMzDwBWink5NOSwwkUane3B2EqI0fe-wLa7MIqLRRKnd8_8ZiF9-1XbKRXFePXjhZl-G5yUxHa-2byGf4NnqWPciJb8W0ZC3BqjOH2eg9nSnGqPJg"}
{"level":"info","timestamp":"2024-07-21T17:35:18.842+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T17:35:18.942+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721564099,"jti":"1ee13df2-5ab8-407f-8f0f-995a279176f5","iat":1721560499,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T17:35:18.943+0530","caller":"dao/user_dao.go:343","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T17:35:18.946+0530","caller":"dao/user_dao.go:377","msg":"User not found","userID":"user-2","duration":0.002736667}
{"level":"info","timestamp":"2024-07-21T17:35:18.946+0530","caller":"dao/user_dao.go:61","msg":"Creating new user","username":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T17:35:19.011+0530","caller":"dao/user_dao.go:130","msg":"User created successfully","userID":"user-2","duration":0.065556667}
{"level":"info","timestamp":"2024-07-21T17:35:19.031+0530","caller":"dao/user_dao.go:188","msg":"BELONGS_TO relationship verified","userID":"user-2","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-2","creatorID":""}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.200690625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T17:35:19.042+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-2","userName":"priyanka.sharma"}
{"level":"info","timestamp":"2024-07-21T18:32:24.629+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T18:32:24.630+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T18:32:24.631+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:11:21.376+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:11:21.390+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:11:21.393+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:11:21.393+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.398+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.398+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.400+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.400+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.403+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.403+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.405+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:11:21.405+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:11:24.388+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:11:24.388+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:11:24.389+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:11:24.493+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:11:24.494+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"12345"}
{"level":"warn","timestamp":"2024-07-21T19:11:24.500+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"12345","duration":0.006131708}
{"level":"info","timestamp":"2024-07-21T19:11:24.500+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"johndoe"}
{"level":"info","timestamp":"2024-07-21T19:11:24.595+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"12345","duration":0.094456834}
{"level":"error","timestamp":"2024-07-21T19:11:24.595+0530","caller":"dao/user_dao.go:138","msg":"Failed to verify relationships","error":"no results returned when verifying relationships","userID":"12345","orgID":"org-2","deptID":"dept-3","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:138\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"12345","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"12345"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.2216345,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:11:24.609+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"12345","userName":"johndoe"}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:43.980+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:44.100+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:44.100+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:44.101+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:44.106+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.004604709}
{"level":"error","timestamp":"2024-07-21T19:14:44.106+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:44.107+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.128635875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:14:50.269+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:50.270+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:50.270+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:50.300+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:50.304+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.003961833}
{"level":"error","timestamp":"2024-07-21T19:14:50.304+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:50.305+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.036481333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:14:57.874+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:14:57.877+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:14:57.889+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:14:57.921+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:14:57.931+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-2"}
{"level":"info","timestamp":"2024-07-21T19:14:57.940+0530","caller":"dao/user_dao.go:372","msg":"User retrieved successfully","userID":"user-2","duration":0.008881375}
{"level":"error","timestamp":"2024-07-21T19:14:57.941+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:14:57.941+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.0669925,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:15:08.505+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:15:08.535+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:15:08.536+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-5"}
{"level":"warn","timestamp":"2024-07-21T19:15:08.540+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"user-5","duration":0.004036666}
{"level":"info","timestamp":"2024-07-21T19:15:08.540+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:15:08.556+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"user-5","duration":0.015222959}
{"level":"error","timestamp":"2024-07-21T19:15:08.558+0530","caller":"dao/user_dao.go:138","msg":"Failed to verify relationships","error":"no results returned when verifying relationships","userID":"user-5","orgID":"org-2","deptID":"dept-3","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:138\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-5","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-5"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-5","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:15:08.572+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.067388167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:16:03.024+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T19:16:03.025+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T19:16:03.025+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:16:06.631+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:16:06.643+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:16:06.645+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:16:06.645+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.648+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.648+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.649+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.649+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.668+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.669+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.671+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:06.672+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:16:15.615+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T19:16:15.617+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T19:16:15.617+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T19:16:17.760+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T19:16:17.768+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T19:16:17.771+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T19:16:17.771+0530","caller":"dao/policy_dao.go:38","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.776+0530","caller":"dao/policy_dao.go:63","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.776+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.778+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.778+0530","caller":"dao/organization_dao.go:36","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.779+0530","caller":"dao/organization_dao.go:54","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.779+0530","caller":"dao/department_dao.go:36","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.782+0530","caller":"dao/department_dao.go:54","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T19:16:17.782+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T19:16:20.739+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:16:20.739+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:16:20.740+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:16:20.846+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:16:20.847+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:16:20.848+0530","caller":"dao/user_dao.go:344","msg":"Retrieving user","userID":"user-7"}
{"level":"warn","timestamp":"2024-07-21T19:16:20.856+0530","caller":"dao/user_dao.go:378","msg":"User not found","userID":"user-7","duration":0.008032625}
{"level":"info","timestamp":"2024-07-21T19:16:20.856+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:16:20.908+0530","caller":"dao/user_dao.go:131","msg":"User created successfully","userID":"user-7","duration":0.052121458}
{"level":"info","timestamp":"2024-07-21T19:16:20.937+0530","caller":"dao/user_dao.go:189","msg":"BELONGS_TO relationship verified","userID":"user-7","orgID":"org-2"}
{"level":"info","timestamp":"2024-07-21T19:16:20.937+0530","caller":"dao/user_dao.go:195","msg":"MEMBER_OF relationship verified","userID":"user-7","deptID":"dept-3"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-7","creatorID":""}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-7"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.212257959,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T19:16:20.950+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-7","userName":"mohit.beniwal"}
{"level":"info","timestamp":"2024-07-21T19:17:55.793+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T19:17:55.794+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T19:17:55.794+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721572477,"jti":"7898f86b-a613-4893-a105-5f44f2e7cb33","iat":1721568877,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T19:17:55.889+0530","caller":"dao/user_dao.go:386","msg":"Listing users","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-21T19:17:55.929+0530","caller":"dao/user_dao.go:422","msg":"Users listed successfully","count":3,"duration":0.039218125}
{"level":"info","timestamp":"2024-07-21T19:17:55.929+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.137229541,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:26:48.584+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:26:48.586+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:26:48.586+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:26:52.566+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:26:52.583+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:26:52.586+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:26:52.586+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.592+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.592+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.595+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.595+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.597+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.597+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.616+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.616+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.681+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.681+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.712+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.712+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.746+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:26:52.746+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:27:45.155+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:27:45.155+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T21:27:45.156+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:27:45.330+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-21T21:27:45.331+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 1h23m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:27:45.332+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 1h23m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:27:45.332+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":401,"latency":0.177800959,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:28:43.832+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:28:43.833+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOWI3ZjllYWMtZTRhNS00ZmQzLTlhMmYtMmNjNzEyYzViYzExIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjU5MGZmYjI1LTM0Y2QtNDE5MC04ZmI2LTE4OWI5ZjI5YTdmMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTY4ODc3LCJleHAiOjE3MjE1NzI0NzcsImlhdCI6MTcyMTU2ODg3NywianRpIjoiNzg5OGY4NmItYTYxMy00ODkzLWExMDUtNWY0NGYyZTdjYjMzIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.Gh266iSE-4RfHFALkRvgfz9BOM4n-cO8pu48Dz0MdiQ8tBzSVNKEykMVjuLrcksBCLhxE9aGjIuATtQ8Mx-Ooye9jjz19ntn9UHnEsIhVvKNRcqXb8oMMU7udHCdiNMSLD0kBP6l4C0-3qhTN5ONf6DW1n5EiYmFI18CKIvv442oQHSg3F0mQvAEJ0q_zvavUgXFl1BLl1VfmZWOSY2EJYiQIF5Vb_LN1s9Mw_D4a3ojYYxVv1YzljzXj1HDgD5NK16eSSm8wEdE6JH1XuCm2tVjjuCuDh6XxmZdIFvt26vWLu7rXTfYPWgjPBRiUteKTwP9RBIDGSWS6_25TLS5nw"}
{"level":"info","timestamp":"2024-07-21T21:28:43.834+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:28:43.863+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-21T21:28:43.863+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 1h24m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:28:43.864+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 1h24m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:28:43.864+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":401,"latency":0.033479625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:28:49.402+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:28:49.427+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:28:49.428+0530","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-21T21:28:49.455+0530","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.027283916}
{"level":"info","timestamp":"2024-07-21T21:28:49.455+0530","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-21T21:28:49.476+0530","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.020523167}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-21T21:28:49.501+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.09955475,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:29:31.520+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:29:31.553+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:29:31.554+0530","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-21T21:29:31.571+0530","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.017396917}
{"level":"info","timestamp":"2024-07-21T21:29:31.572+0530","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.623+0530","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.051574625}
{"level":"error","timestamp":"2024-07-21T21:29:31.639+0530","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-21T21:29:31.647+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.127985167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:30:33.365+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:30:33.366+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:30:33.366+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:30:33.459+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:30:33.460+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:30:33.500+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.039308666}
{"level":"info","timestamp":"2024-07-21T21:30:33.500+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:30:33.571+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.071246959,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:33.571+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:33.572+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:30:33.572+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.207691167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:30:44.814+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:30:44.814+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:30:44.815+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:30:44.852+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:30:44.854+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.001677375}
{"level":"info","timestamp":"2024-07-21T21:30:44.854+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.058991334,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:30:44.913+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:30:44.913+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.100099667,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:33:47.351+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:33:47.353+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:33:47.353+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:33:51.432+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:33:51.457+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:33:51.460+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:33:51.460+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.479+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.479+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.482+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.482+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.485+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.485+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.487+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.487+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.492+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.492+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.494+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.495+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.497+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:33:51.498+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:33:56.344+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:33:56.476+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:33:56.477+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:33:56.481+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.003786334}
{"level":"info","timestamp":"2024-07-21T21:33:56.481+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.102571792,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:33:56.584+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:33:56.584+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.241820083,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:34:46.864+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:34:46.865+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:34:46.865+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:34:46.898+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-21T21:34:46.899+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:34:46.899+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.036552875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:34:49.769+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:34:49.770+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:34:49.770+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:34:49.802+0530","caller":"dao/user_dao.go:390","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:34:49.804+0530","caller":"dao/user_dao.go:424","msg":"User not found","userID":"user-1","duration":0.001931}
{"level":"info","timestamp":"2024-07-21T21:34:49.804+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"dao/user_dao.go:136","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.061609417,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:136\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:34:49.866+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:34:49.867+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.097590875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:43:29.456+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:43:29.457+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:43:29.457+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:43:33.515+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:43:33.525+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:43:33.527+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:43:33.527+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.531+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.531+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.534+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.534+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.537+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.537+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.539+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.539+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.540+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.540+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.542+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.542+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.544+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:43:33.545+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:43:38.706+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:43:38.885+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:43:38.886+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:43:38.887+0530","caller":"dao/user_dao.go:391","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:43:38.897+0530","caller":"dao/user_dao.go:425","msg":"User not found","userID":"user-1","duration":0.010531}
{"level":"info","timestamp":"2024-07-21T21:43:38.897+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:43:39.018+0530","caller":"dao/user_dao.go:124","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): roleIds, groupIds)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:124\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.023+0530","caller":"dao/user_dao.go:137","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.126017833,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.024+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:43:39.024+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:43:39.024+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.3190765,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:45:13.427+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:45:13.427+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:45:13.428+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:45:17.138+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:45:17.148+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:45:17.150+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:45:17.151+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.153+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.154+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.155+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.155+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.156+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.156+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.157+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.157+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.158+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.159+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.160+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.160+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.161+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:45:17.161+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:45:24.141+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:45:24.141+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:45:24.142+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:45:24.236+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:45:24.237+0530","caller":"dao/user_dao.go:391","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:45:24.243+0530","caller":"dao/user_dao.go:425","msg":"User not found","userID":"user-1","duration":0.00545075}
{"level":"info","timestamp":"2024-07-21T21:45:24.243+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:45:24.349+0530","caller":"dao/user_dao.go:124","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): roleIds, groupIds)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:124\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"dao/user_dao.go:137","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.107144167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:45:24.350+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:45:24.351+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.210764458,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:48:23.221+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:49:14.715+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:49:14.733+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:49:14.735+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:49:14.735+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.740+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.740+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.741+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.742+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.743+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.743+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.745+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.745+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.747+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.747+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.748+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.748+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.750+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:49:14.751+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:49:18.797+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:49:18.798+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:49:18.798+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:49:18.888+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:49:18.889+0530","caller":"dao/user_dao.go:407","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:49:18.894+0530","caller":"dao/user_dao.go:441","msg":"User not found","userID":"user-1","duration":0.005072792}
{"level":"info","timestamp":"2024-07-21T21:49:18.894+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:49:18.930+0530","caller":"dao/user_dao.go:140","msg":"Failed to create user","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid use of MATCH inside FOREACH (line 16, column 13 (offset: 512))\n\"            MATCH (r:ROLE {id: roleId})\"\n             ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:140\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.932+0530","caller":"dao/user_dao.go:153","msg":"Failed to create user","error":"database operation failed","username":"user.one","duration":0.038109167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:153\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.932+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:49:18.933+0530","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:49:18.933+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.136654916,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T21:50:15.948+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T21:50:15.949+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T21:50:15.949+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T21:50:30.877+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T21:50:30.891+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T21:50:30.894+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T21:50:30.894+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.899+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.900+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.902+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.902+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.903+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.903+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.905+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.905+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.907+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.907+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.909+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.909+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.910+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T21:50:30.911+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T21:50:34.685+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T21:50:34.685+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T21:50:34.686+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T21:50:34.786+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T21:50:34.787+0530","caller":"dao/user_dao.go:409","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T21:50:34.795+0530","caller":"dao/user_dao.go:443","msg":"User not found","userID":"user-1","duration":0.007503584}
{"level":"info","timestamp":"2024-07-21T21:50:34.795+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"dao/user_dao.go:155","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.126130708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:155\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T21:50:34.921+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T21:50:34.922+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.237640917,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:01:34.639+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:01:34.640+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:01:34.640+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:01:38.494+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:01:38.503+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:01:38.505+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:01:38.505+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.509+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.509+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.510+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.511+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.512+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.512+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.513+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.513+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.514+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.514+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.515+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.515+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.517+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:01:38.518+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:01:43.411+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:01:43.412+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T22:01:43.412+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.600+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721581071,"jti":"05963da5-0cd2-4ebb-a9a4-c0c130184838","iat":1721577471,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:01:43.601+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:01:43.601+0530","caller":"dao/user_dao.go:409","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T22:01:43.611+0530","caller":"dao/user_dao.go:443","msg":"User not found","userID":"user-1","duration":0.010267667}
{"level":"info","timestamp":"2024-07-21T22:01:43.611+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"error","timestamp":"2024-07-21T22:01:43.627+0530","caller":"dao/user_dao.go:149","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:149\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"dao/user_dao.go:155","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.018192208,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:155\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:01:43.630+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:01:43.630+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.2196795,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:05:33.088+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:05:33.090+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:05:33.090+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:05:36.982+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:05:36.996+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:05:36.998+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:05:36.999+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.004+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.004+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.006+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.006+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.007+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.007+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.008+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.008+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.010+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.010+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.012+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.012+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.014+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:05:37.015+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:05:41.392+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:05:41.393+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTdhYzYwODUtMjg3ZS00NWJiLWI1ZGYtMGNjOGJlMDg3MGViIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQ1ODFhYTFjLTkyZTAtNGRjZS05NWQwLWRhMDNiMTdkMDIzNSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc3NDcxLCJleHAiOjE3MjE1ODEwNzEsImlhdCI6MTcyMTU3NzQ3MSwianRpIjoiMDU5NjNkYTUtMGNkMi00ZWJiLWE5YTQtYzBjMTMwMTg0ODM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.nnL4Sz4cYcYJ0XHdv89Mw7T1nicpnmm3Zo4NGhNb94AAu03Ir5SAW7ILhq9Tgwuqj3G7J4p1TEm33mGvysFXvO19CSg9ZTITIZ78FA3gfI45BktHohXSAHUWIl5wjJX0Cuq7qwm64gPwPkA9_YOosPQeJz4VnyLVmbwjeHOvAeEhe7nnLSmLm8q1gmf2jaY4mrBM5BBSedvVICLfsEWAo-RPNDaVwZ418O4GiuXWkey2ZRbZRJObenSgiu1-kcD86NYhsobnikkBEX-oOXrhCpDCpe1A8ycbG_qRPgnxnnkjKzezVIK8V7iYy4fQgyjzEHsnQRcYl4QL5xpcido2Ow"}
{"level":"info","timestamp":"2024-07-21T22:05:41.393+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:48","msg":"Failed to fetch JWKS: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.GetCognitoPublicKey\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:48\ngithub.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:137\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:139","msg":"Error getting public key: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:139\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:05:41.401+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"Get \"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json\": dial tcp: lookup cognito-idp.ap-south-1.amazonaws.com: no such host","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:05:41.402+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":401,"latency":0.010428042,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:06:51.039+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:06:51.040+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:06:51.040+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:06:51.207+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:06:51.207+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:06:51.208+0530","caller":"dao/user_dao.go:412","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-21T22:06:51.223+0530","caller":"dao/user_dao.go:446","msg":"User not found","userID":"user-1","duration":0.014635458}
{"level":"info","timestamp":"2024-07-21T22:06:51.223+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:06:51.224+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:06:51.224+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-1","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:06:51+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:06:51+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:06:51.241+0530","caller":"dao/user_dao.go:152","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:152\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.244+0530","caller":"dao/user_dao.go:158","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.021535666,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:158\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.245+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:06:51.245+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:06:51.245+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.207572791,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:18:05.785+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:18:05.786+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:18:05.787+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:18:31.353+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:18:31.371+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:18:31.374+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:18:31.374+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.379+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.380+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.382+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.382+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.384+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.384+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.385+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.385+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.387+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.387+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.389+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.389+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.391+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:18:31.392+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:18:41.729+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:18:41.730+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:18:41.731+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:18:42.025+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:42.026+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:18:42.027+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-21T22:18:42.079+0530","caller":"dao/user_dao.go:449","msg":"User retrieved successfully","userID":"user-1","duration":0.052602625}
{"level":"error","timestamp":"2024-07-21T22:18:42.080+0530","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:18:42.080+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.352215083,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:18:46.960+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:18:47.012+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:455","msg":"User not found","userID":"user-2","duration":0.0061735}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:18:47.019+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:18:47+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:18:47+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:18:47.028+0530","caller":"dao/user_dao.go:167","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.009573708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:167\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:18:47.028+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:18:47.029+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:18:47.029+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.069453041,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:19:40.686+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:19:40.687+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:19:40.688+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:19:46.181+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:19:46.197+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:19:46.200+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:19:46.201+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.206+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.206+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.207+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.207+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.209+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.209+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.212+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.212+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.214+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.214+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.216+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.216+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.218+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:19:46.218+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:19:50.022+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:19:50.022+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:19:50.023+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:19:51.260+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:19:51.261+0530","caller":"dao/user_dao.go:414","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:19:51.268+0530","caller":"dao/user_dao.go:448","msg":"User not found","userID":"user-2","duration":0.007069042}
{"level":"info","timestamp":"2024-07-21T22:19:51.268+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:19:51.269+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:19:51.269+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:19:51+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:19:51+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"error","timestamp":"2024-07-21T22:19:51.278+0530","caller":"dao/user_dao.go:154","msg":"Failed to create user = ","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:154\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/Users/xenon/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:70\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"dao/user_dao.go:160","msg":"Failed to create user","error":"internal server error","username":"user.one","duration":0.013203,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:160\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"internal server error","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:19:51.281+0530","caller":"util/http_util.go:11","msg":"Internal server error","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:61\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:19:51.282+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":1.261322625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:21:07.627+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:21:07.628+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:21:07.628+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:21:11.934+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:21:11.953+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:21:11.956+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:21:11.957+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.962+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.962+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.965+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.965+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.967+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.967+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.969+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.969+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.970+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.970+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.972+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.972+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.974+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:21:11.975+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:21:16.049+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:21:16.050+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:21:16.050+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:21:16.243+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:21:16.244+0530","caller":"dao/user_dao.go:420","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:21:16.251+0530","caller":"dao/user_dao.go:454","msg":"User not found","userID":"user-2","duration":0.007251833}
{"level":"info","timestamp":"2024-07-21T22:21:16.251+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:21:16.253+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:21:16.253+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:21:16+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:21:16+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"warn","timestamp":"2024-07-21T22:21:16.264+0530","caller":"dao/user_dao.go:160","msg":"User creation query didn't return a result"}
{"level":"error","timestamp":"2024-07-21T22:21:16.266+0530","caller":"dao/user_dao.go:166","msg":"Failed to create user","error":"user creation query didn't return a result","username":"user.one","duration":0.014426875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:166\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:21:16.266+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"user creation query didn't return a result","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:21:16.267+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:21:16.267+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.219547792,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:22:07.218+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:22:07.219+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:22:07.220+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:22:10.855+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:22:10.865+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:22:10.869+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:22:10.869+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.878+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.878+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.881+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.881+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.884+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.884+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.887+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.887+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.889+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.889+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.891+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.891+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.893+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:22:10.894+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:22:13.493+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:22:13.493+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:22:13.494+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:22:14.771+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:22:14.772+0530","caller":"dao/user_dao.go:421","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:22:14.776+0530","caller":"dao/user_dao.go:455","msg":"User not found","userID":"user-2","duration":0.003604042}
{"level":"info","timestamp":"2024-07-21T22:22:14.776+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:22:14.778+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n        CREATE (u:USER{id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (o:ORGANIZATION{id: $organizationID})\n        FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:WORKS_FOR]->(o)\n        )\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        UNWIND $roleIds AS roleId\n        OPTIONAL MATCH (r:ROLE {id: roleId})\n        FOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:HAS_ROLE]->(r)\n        )\n        WITH u\n        UNWIND $groupIds AS groupId\n        OPTIONAL MATCH (g:GROUP {id: groupId})\n        FOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n            CREATE (u)-[:BELONGS_TO_GROUP]->(g)\n        )\n        RETURN u.id as id\n        "}
{"level":"info","timestamp":"2024-07-21T22:22:14.778+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:22:14+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:22:14+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"warn","timestamp":"2024-07-21T22:22:14.784+0530","caller":"dao/user_dao.go:161","msg":"User creation query didn't return a result"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"dao/user_dao.go:167","msg":"Failed to create user","error":"user creation query didn't return a result","username":"user.one","duration":0.009491333,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:167\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"user creation query didn't return a result","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:22:14.786+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:22:14.786+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":1.294326417,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-21T22:25:39.247+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-21T22:25:39.249+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-21T22:25:39.249+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-21T22:25:46.756+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-21T22:25:46.778+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-21T22:25:46.781+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-21T22:25:46.781+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.787+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.787+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.788+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.788+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.790+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.790+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.792+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.792+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.793+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.793+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.794+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.794+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.795+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-21T22:25:46.796+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-21T22:25:50.141+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-21T22:25:50.141+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiM2Q4Y2E5ZTgtMDEzYS00YWE4LWI1N2UtNmRjMzA0MWEyMDMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjkwNjI2YmI2LThhYTktNDJkYy05NTRlLTViMzkzMGUxNWY3ZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIxNTc5ODAyLCJleHAiOjE3MjE1ODM0MDIsImlhdCI6MTcyMTU3OTgwMiwianRpIjoiZjc1ZGMyM2UtNmMxNi00MTRhLWExMjUtYTk4MDZmNTllNDZkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.CgVB4XtEpbS7FY3DUkcLR7VHBgCUUqXT22l01a2GmpsS9RHQ91tjzfRV8aLhduCbYobgNWBY9kmQmnh5hzMpaAgeFIA4z9igR2IjrgNAHE6t1F6NlRWjuVddzSthC-lLCeptF0ecTGxZyJrM5j_X-Opy0YOnGLs3PXBWFgbQU19S3nApZsVDE31xcScI9RYU8rCTp7eGCqC4RtWke-nA1PEfaMrFkakKsn6fBX8mvdMuYkb-EuD3soxow_fOEyaE_n9RJUpzGZ_00Bg-3J-KXzhjJCk4F5yMlnB6bgkyhxy9TvOGFp-ftJ6D2xaFLuwLcVEm9FlyscdfXEIxDwZIZA"}
{"level":"info","timestamp":"2024-07-21T22:25:50.142+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-21T22:25:50.398+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1721583402,"jti":"f75dc23e-6c16-414a-a125-a9806f59e46d","iat":1721579802,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-21T22:25:50.399+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-21T22:25:50.402+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.003234}
{"level":"info","timestamp":"2024-07-21T22:25:50.402+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-21T22:25:50.403+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-21T22:25:50.403+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-21T22:25:50+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-21T22:25:50+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-21T22:25:50.513+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-21T22:25:50.513+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-21T22:25:50.514+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.112171375,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:25:50.515+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-21T22:25:50.515+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-21T22:25:50.515+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.37508475,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:47:18.013+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:47:18.016+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:47:18.016+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:47:18.127+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:18.128+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:47:18.129+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:47:18.136+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.007272125}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:47:18.137+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:47:18+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:47:18+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:47:18.149+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-27T15:47:18.149+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:47:18.150+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.013255083,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:18.151+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:18.151+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:47:18.151+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.147505333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:47:32.191+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:47:32.218+0530","caller":"dao/user_dao.go:415","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:47:32.222+0530","caller":"dao/user_dao.go:449","msg":"User not found","userID":"user-2","duration":0.004338417}
{"level":"info","timestamp":"2024-07-27T15:47:32.223+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:47:32.223+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:47:32.224+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:47:32+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:47:32+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:47:32.229+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"warn","timestamp":"2024-07-27T15:47:32.229+0530","caller":"dao/user_dao.go:155","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"dao/user_dao.go:161","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.007446959,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:161\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:47:32.230+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:47:32.230+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.040488583,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:49:19.444+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T15:49:19.445+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T15:49:19.445+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T15:49:36.805+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T15:49:36.818+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T15:49:36.821+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T15:49:36.821+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.826+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.826+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.828+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.828+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.830+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.830+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.832+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.832+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.834+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.834+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.836+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.836+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.838+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T15:49:36.838+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T15:49:43.103+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:49:43.103+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:49:43.104+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:49:43.199+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:49:43.199+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:49:43.200+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-2"}
{"level":"warn","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-2","duration":0.00265825}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:49:43.203+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-2","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:49:43+05:30","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:49:43+05:30","userType":"DepartmentUser","username":"user.one"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:49:43.213+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T15:49:43.213+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T15:49:43.214+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.one","duration":0.012798833,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:49:43.216+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:49:43.217+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.114211583,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T15:52:42.876+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T15:52:42.879+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T15:52:42.879+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T15:52:42.967+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T15:52:42.968+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T15:52:42.972+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-9","duration":0.003914708}
{"level":"info","timestamp":"2024-07-27T15:52:42.972+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T15:52:42.974+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T15:52:42.975+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T15:52:42+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T15:52:42+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T15:52:42.982+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T15:52:42.983+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.nine","duration":0.010979334,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:52:42.984+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T15:52:42.984+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T15:52:42.984+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.109020542,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:25:55.329+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T16:25:55.331+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T16:25:55.331+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T16:25:59.390+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:5001"}
{"level":"info","timestamp":"2024-07-27T16:27:15.963+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T16:27:15.974+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T16:27:15.979+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T16:27:15.979+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.088+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.088+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.129+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.129+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.161+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.161+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.201+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.201+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.240+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.240+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.274+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.274+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.314+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T16:27:16.315+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T16:27:24.175+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:24.175+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:24.176+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:24.371+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:24.372+0530","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-27T16:27:24.437+0530","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.064792542}
{"level":"info","timestamp":"2024-07-27T16:27:24.437+0530","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T16:27:24.576+0530","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.139040375}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.441000917,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T16:27:24.615+0530","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T16:27:41.347+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:41.347+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:41.348+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:41.374+0530","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-27T16:27:41.421+0530","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.047273875}
{"level":"info","timestamp":"2024-07-27T16:27:41.422+0530","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.533+0530","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.111685125}
{"level":"error","timestamp":"2024-07-27T16:27:41.595+0530","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T16:27:41.627+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.280816333,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:27:46.860+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T16:27:46.860+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T16:27:46.861+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T16:27:46.887+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722079027,"jti":"97e8aaf4-1e14-4702-8019-16f583f20612","iat":1722075427,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T16:27:46.888+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T16:27:46.890+0530","caller":"dao/user_dao.go:417","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T16:27:46.935+0530","caller":"dao/user_dao.go:451","msg":"User not found","userID":"user-9","duration":0.045264917}
{"level":"info","timestamp":"2024-07-27T16:27:46.936+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T16:27:46.937+0530","caller":"dao/user_dao.go:133","msg":"Query: ","query":"\n\t\t\tCREATE (u:USER {id: $id})\n\t\t\tSET u += $props\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tFOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:WORKS_FOR]->(o)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:MEMBER_OF]->(d)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $roleIds AS roleId\n\t\t\tOPTIONAL MATCH (r:ROLE {id: roleId})\n\t\t\tFOREACH (_ IN CASE WHEN r IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:HAS_ROLE]->(r)\n\t\t\t)\n\t\t\tWITH u\n\t\t\tUNWIND $groupIds AS groupId\n\t\t\tOPTIONAL MATCH (g:GROUP {id: groupId})\n\t\t\tFOREACH (_ IN CASE WHEN g IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tCREATE (u)-[:BELONGS_TO_GROUP]->(g)\n\t\t\t)\n\t\t\tRETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T16:27:46.937+0530","caller":"dao/user_dao.go:134","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T16:27:46+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T16:27:46+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T16:27:47.026+0530","caller":"dao/user_dao.go:142","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T16:27:47.026+0530","caller":"dao/user_dao.go:144","msg":"Result: ","result":{}}
{"level":"warn","timestamp":"2024-07-27T16:27:47.056+0530","caller":"dao/user_dao.go:157","msg":"No results returned"}
{"level":"error","timestamp":"2024-07-27T16:27:47.057+0530","caller":"dao/user_dao.go:163","msg":"Failed to create user","error":"no results returned","username":"user.nine","duration":0.121211708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:163\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T16:27:47.057+0530","caller":"service/user_service.go:155","msg":"Error creating user","error":"no results returned","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:155\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T16:27:47.058+0530","caller":"util/http_util.go:11","msg":"Failed to create user","error":"internal server error","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T16:27:47.058+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":500,"latency":0.198236625,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T16:56:08.472+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T16:56:08.474+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T16:56:08.474+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T17:42:52.269+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:42:52.289+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:42:52.294+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:42:52.294+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.364+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.364+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.367+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.367+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.369+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.369+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.372+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.372+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.375+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.375+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.377+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.377+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.379+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:52.379+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:43:26.978+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:43:26.979+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNjQ2YTg1MjktYmMxZi00NGRmLTg0YzMtNWUxNjYxODAzNzI2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjEwZjQwNjhmLTFkZDYtNGNkNy1iYjc2LTQzZmFiZGMyODI3MCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDc1NDI3LCJleHAiOjE3MjIwNzkwMjcsImlhdCI6MTcyMjA3NTQyNywianRpIjoiOTdlOGFhZjQtMWUxNC00NzAyLTgwMTktMTZmNTgzZjIwNjEyIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.dGWB3__XeSm4A6LGYrmwF_Iib1I85yJF6dVDOzDhdaMfDwVMhfyOAy5BT5rLrvg_Qhz5x2TTzDQ9CmWi9FIBmB_5uk6030DKcezBYBmNBnvp7ZQ3fMTQBt5Bd1vVlX6G86l0pq4vhkP7HfrHMV6Dg58IOl-CwDT0GPLvgi3PmOcYk6OdgqOwVX6kOlX9PmISaT3f5sOEFPkwhglr-arbHZPb3S6NU-StwQnfudbtjk3ZIbPI2HrrzXTPfJFlp7SE8Ep3kMydCrlL87Uo9dWSlkeJdHz_oPCKPJguIIne-4ibZ9VKeZtWoy0TQ5cnPVbaIoIwqRB4TNlQHtoluuFVug"}
{"level":"info","timestamp":"2024-07-27T17:43:26.979+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:43:27.154+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T17:43:27.155+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":401,"latency":0.177752834,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:43:42.690+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:43:42.691+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T17:43:42.691+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.717+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:43:42.718+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:43:42.718+0530","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-9"}
{"level":"warn","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:467","msg":"User not found","userID":"user-9","duration":0.021623583}
{"level":"info","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:62","msg":"Creating new user","username":"user.nine"}
{"level":"info","timestamp":"2024-07-27T17:43:42.740+0530","caller":"dao/user_dao.go:148","msg":"Query: ","query":"\n            CREATE (u:USER {id: $id})\n            SET u += $props\n            WITH u\n            OPTIONAL MATCH (o:ORGANIZATION {id: $organizationID})\n            FOREACH (_ IN CASE WHEN o IS NOT NULL THEN [1] ELSE [] END |\n                CREATE (u)-[:WORKS_FOR]->(o)\n            )\n            WITH u\n            OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n            FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n                CREATE (u)-[:MEMBER_OF]->(d)\n            )\n        \n            RETURN u.id as id, u.name as name, u.email as email\n        "}
{"level":"info","timestamp":"2024-07-27T17:43:42.741+0530","caller":"dao/user_dao.go:149","msg":"Params: ","params: ":{"departmentID":"dept-1","groupIds":[],"id":"user-9","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:43:42+05:30","departmentID":"dept-1","email":"user.nine@example.com","name":"User Nine","organizationID":"org-1","status":"Active","updatedAt":"2024-07-27T17:43:42+05:30","userType":"DepartmentUser","username":"user.nine"},"roleIds":[]}}
{"level":"info","timestamp":"2024-07-27T17:43:42.790+0530","caller":"dao/user_dao.go:157","msg":"Query execution completed"}
{"level":"info","timestamp":"2024-07-27T17:43:42.790+0530","caller":"dao/user_dao.go:159","msg":"Result: ","result":{}}
{"level":"info","timestamp":"2024-07-27T17:43:42.792+0530","caller":"dao/user_dao.go:163","msg":"Result record","record":["user-9","User Nine","user.nine@example.com"]}
{"level":"info","timestamp":"2024-07-27T17:43:42.799+0530","caller":"dao/user_dao.go:186","msg":"User created successfully","userID":"user-9","duration":0.059429417}
{"level":"info","timestamp":"2024-07-27T17:43:42.836+0530","caller":"dao/user_dao.go:244","msg":"BELONGS_TO relationship verified","userID":"user-9","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:43:42.836+0530","caller":"dao/user_dao.go:250","msg":"MEMBER_OF relationship verified","userID":"user-9","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-9","creatorID":""}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.188652458,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-9"}
{"level":"info","timestamp":"2024-07-27T17:43:42.877+0530","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-9","userName":"user.nine"}
{"level":"info","timestamp":"2024-07-27T18:02:45.620+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:02:45.621+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:02:45.621+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:02:45.788+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:02:45.789+0530","caller":"dao/user_dao.go:475","msg":"Listing users","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-27T18:02:45.898+0530","caller":"dao/user_dao.go:511","msg":"Users listed successfully","count":1,"duration":0.109013}
{"level":"info","timestamp":"2024-07-27T18:02:45.899+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.281156166,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:07:00.004+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:07:00.005+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:07:00.006+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:07:00.091+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:07:00.092+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/user/search","query":"","status":404,"latency":0.090134917,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:07:20.713+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:07:20.714+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:07:20.714+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:07:20.739+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:07:20.740+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:07:20.740+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:20.740+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:20.740+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:20.740+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-27T18:07:20.740+0530","caller":"util/http_util.go:11","msg":"Query parameter is required","path":"/api/v1/users/search","method":"GET","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:07:20.741+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/search","query":"","status":400,"latency":0.027925167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:11:03.912+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:11:03.913+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:11:03.913+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:11:03.996+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:11:03.997+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:11:03.997+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:03.997+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:03.997+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:03.997+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-27T18:11:03.997+0530","caller":"util/http_util.go:11","msg":"Query parameter is required","path":"/api/v1/users/search","method":"GET","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:11:03.998+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/search","query":"","status":400,"latency":0.088264209,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:11:33.837+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:11:33.838+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:11:33.838+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-27T18:11:33.865+0530","caller":"util/http_util.go:11","msg":"Query parameter is required","path":"/api/v1/users/search","method":"GET","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:11:33.865+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/search","query":"name=one","status":400,"latency":0.029539125,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:11:44.777+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:11:44.778+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:11:44.778+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-27T18:11:44.806+0530","caller":"util/http_util.go:11","msg":"Failed to search users","error":"user search not implemented","path":"/api/v1/users/search","method":"GET","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:171\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:11:44.806+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/search","query":"query=name=one","status":500,"latency":0.029342791,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:18:37.005+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T18:18:37.009+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T18:18:37.010+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T18:19:22.013+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T18:19:22.029+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:19:22.034+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:19:22.034+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.043+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.043+0530","caller":"dao/user_dao.go:38","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.045+0530","caller":"dao/user_dao.go:56","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.045+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.046+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.046+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.047+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.047+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.048+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.048+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.049+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.049+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.051+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:19:22.051+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:19:25.521+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:19:25.521+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:19:25.521+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:19:25.698+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:19:25.699+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:19:25.699+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:25.699+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:25.699+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:25.699+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:19:25.701+0530","caller":"dao/user_dao.go:425","msg":"Retrieving user","userID":"search"}
{"level":"warn","timestamp":"2024-07-27T18:19:25.775+0530","caller":"dao/user_dao.go:459","msg":"User not found","userID":"search","duration":0.074056666}
{"level":"error","timestamp":"2024-07-27T18:19:25.775+0530","caller":"util/http_util.go:11","msg":"User not found","error":"user not found","path":"/api/v1/users/search","method":"GET","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).GetUser\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:127\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:19:25.775+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/search","query":"query=name=one","status":404,"latency":0.256103875,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:19:42.318+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:19:42.319+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:19:42.319+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:19:42.346+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:19:42.346+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:19:42.347+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:42.347+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:42.347+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:42.347+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:19:42.347+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"user"}}
{"level":"info","timestamp":"2024-07-27T18:19:42.401+0530","caller":"dao/user_dao.go:595","msg":"Users searched successfully","count":0,"duration":0.053674291}
{"level":"info","timestamp":"2024-07-27T18:19:42.401+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.08420025,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:19:56.419+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:19:56.420+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:19:56.420+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:19:56.446+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:19:56.447+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"user-9"}}
{"level":"info","timestamp":"2024-07-27T18:19:56.449+0530","caller":"dao/user_dao.go:595","msg":"Users searched successfully","count":0,"duration":0.002010125}
{"level":"info","timestamp":"2024-07-27T18:19:56.449+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.0306715,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:20:46.785+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:20:46.786+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:20:46.786+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:20:46.813+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:20:46.814+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:20:46.814+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:46.814+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:46.814+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:46.814+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:20:46.815+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User Nine"}}
{"level":"info","timestamp":"2024-07-27T18:20:46.820+0530","caller":"dao/user_dao.go:595","msg":"Users searched successfully","count":0,"duration":0.005767792}
{"level":"info","timestamp":"2024-07-27T18:20:46.821+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.037008125,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:20:50.726+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:20:50.726+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:20:50.726+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:20:50.753+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:20:50.754+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:20:50.757+0530","caller":"dao/user_dao.go:595","msg":"Users searched successfully","count":0,"duration":0.002656542}
{"level":"info","timestamp":"2024-07-27T18:20:50.757+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.031681167,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:22:12.872+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T18:22:12.873+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T18:22:12.873+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T18:22:16.603+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T18:22:16.611+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:22:16.616+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:22:16.616+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.622+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.622+0530","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.625+0530","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.625+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.627+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.627+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.628+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.628+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.630+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.630+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.632+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.632+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.634+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:22:16.634+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:22:19.598+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:22:19.599+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:22:19.599+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:22:19.693+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:22:19.694+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:22:19.708+0530","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected an expression, 'FOREACH', 'CALL', 'CREATE', 'LOAD CSV', 'DELETE', 'DETACH', 'FINISH', 'INSERT', 'MATCH', 'MERGE', 'NODETACH', 'OPTIONAL', 'REMOVE', 'RETURN', 'SET', 'UNION', 'UNWIND', 'USE', 'WITH' or <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.013918459,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:266\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T18:22:19.709+0530","caller":"service/user_service.go:268","msg":"Error searching organizations","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T18:22:19.709+0530","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search organizations: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:22:19.709+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.112362292,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:27:19.531+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T18:27:19.532+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T18:27:19.532+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T18:27:23.638+0530","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T18:27:23.654+0530","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:27:23.659+0530","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:27:23.660+0530","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.667+0530","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.667+0530","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.672+0530","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.672+0530","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.676+0530","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.676+0530","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.677+0530","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.677+0530","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.679+0530","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.679+0530","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.680+0530","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.680+0530","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.681+0530","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:27:23.682+0530","caller":"api/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:27:24.084+0530","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"::1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:27:24.084+0530","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T18:27:24.084+0530","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:27:24.180+0530","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:27:24.180+0530","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:27:24.180+0530","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:24.181+0530","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:24.181+0530","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722086015,"jti":"bb5a2a14-3888-4114-ac40-583e07b7b94d","iat":1722082415,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:24.181+0530","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:27:24.181+0530","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:27:24.181+0530","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:27:24.193+0530","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected an expression, 'FOREACH', 'CALL', 'CREATE', 'LOAD CSV', 'DELETE', 'DETACH', 'FINISH', 'INSERT', 'MATCH', 'MERGE', 'NODETACH', 'OPTIONAL', 'REMOVE', 'RETURN', 'SET', 'UNION', 'UNWIND', 'USE', 'WITH' or <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.011517333,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T18:27:24.193+0530","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"error","timestamp":"2024-07-27T18:27:24.193+0530","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/Users/xenon/aubrey/idev/projects/echo/api/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/Users/xenon/aubrey/idev/projects/echo/api/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/Users/xenon/aubrey/idev/projects/echo/api/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/xenon/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.22.2/libexec/src/net/http/server.go:2039"}
{"level":"info","timestamp":"2024-07-27T18:27:24.194+0530","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.110436375,"ip":"::1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:43:53.625+0530","caller":"api/main.go:98","msg":"Shutting down server..."}
{"level":"info","timestamp":"2024-07-27T18:43:53.631+0530","caller":"api/main.go:108","msg":"Server exiting"}
{"level":"info","timestamp":"2024-07-27T18:43:53.633+0530","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T13:17:30.364Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T15:37:49.762Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T15:41:02.263Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:10:05.292Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:15:29.833Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:17:25.778Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7687"}
{"level":"info","timestamp":"2024-07-27T17:18:00.107Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://localhost:7689"}
{"level":"info","timestamp":"2024-07-27T17:19:32.472Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:19:32.525Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:19:32.594Z","caller":"db/db.go:62","msg":"Neo4j connection closed successfully"}
{"level":"info","timestamp":"2024-07-27T17:20:07.467Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:20:07.487Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:20:07.488Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:20:07.489Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.208Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.209Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.219Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.219Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.230Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.231Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.254Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.254Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.266Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.267Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.276Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.276Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.283Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:20:08.285Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T17:20:12.663Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:20:12.664Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:20:12.664Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYTJmODRhZjctZmU1Yy00ZmIzLTk0ZWMtNjU3YjcwM2E3M2M2IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjAyYjgyZjQ3LTMzYWUtNDRkOC1hZWFjLWRmZWIwOWRlYWEyMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMDgyNDE1LCJleHAiOjE3MjIwODYwMTUsImlhdCI6MTcyMjA4MjQxNSwianRpIjoiYmI1YTJhMTQtMzg4OC00MTE0LWFjNDAtNTgzZTA3YjdiOTRkIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tYhxBXXPso464D-kN2pEDnAMTMJmIt91AedMrL9DrO3VfnBGJA8cA1qMPCmHyowQ9X-0w44HWpw8obVwWnwc63dGYrfon1MHaBtcOIdiESNY4LAG0PiL2VjxQ-31xwj3Gn_Yj7tT1L0nGuvbfT09XiULDMmVMkXQUbX-P3zjPHSlOaL6WlR2tZzOASZPhWK1EIAahrp-WlYRNIkq9aQggfmfo92EqR2YVUQavykNrpYYRDB1_lwEGHDCzkBMrZKHiRmDv1tNz6mKJl15JRWk6Yk2RZtatdJuCeyjL5WH1DIFcYR07Qzucwo5J2eVILGL9Baoo-5cFtiQl9dk2A8DKA"}
{"level":"info","timestamp":"2024-07-27T17:20:12.665Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:20:12.868Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T17:20:12.870Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 4h6m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:20:12.871Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 4h6m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T17:20:12.872Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.210275916,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T17:21:38.864Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:21:38.866Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:21:38.867Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:21:38.868Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:21:38.956Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:21:38.958Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:21:38.958Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:21:38.959Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:21:38.959Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:21:38.960Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:21:38.961Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T17:21:38.961Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T17:21:39.033Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.071865875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:21:39.035Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:21:39.035Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T17:21:39.035Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.172108459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T17:22:52.091Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:22:52.093Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:22:52.094Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:22:52.095Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:22:52.186Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:22:52.188Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:22:52.188Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:52.189Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:52.189Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:52.190Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:22:52.191Z","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-27T17:22:52.264Z","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.07327375}
{"level":"info","timestamp":"2024-07-27T17:22:52.265Z","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T17:22:52.396Z","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.131321667}
{"level":"error","timestamp":"2024-07-27T17:22:52.398Z","caller":"dao/organization_dao.go:121","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*OrganizationDAO).CreateOrganization\n\t/app/dao/organization_dao.go:121\ngithub.com/dev-mohitbeniwal/echo/api/service.(*OrganizationService).CreateOrganization\n\t/app/service/organization_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*OrganizationController).CreateOrganization\n\t/app/controller/organization_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:22:52.398Z","caller":"db/redis.go:173","msg":"Organization cached successfully","organizationID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:22:52.398Z","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-27T17:22:52.398Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.308675667,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:22:52.398Z","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:22:52.399Z","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"debug","timestamp":"2024-07-27T17:22:56.587Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:22:56.588Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:22:56.588Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:22:56.588Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:22:56.617Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:22:56.618Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:22:56.619Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:56.620Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:56.621Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:22:56.621Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:22:56.622Z","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-27T17:22:56.665Z","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.043212792}
{"level":"info","timestamp":"2024-07-27T17:22:56.666Z","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T17:22:56.788Z","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.121800792}
{"level":"error","timestamp":"2024-07-27T17:22:56.831Z","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/app/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/app/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/app/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/app/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:22:56.833Z","caller":"dao/department_dao.go:137","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/app/dao/department_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/app/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/app/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:22:56.833Z","caller":"db/redis.go:220","msg":"Department cached successfully","departmentID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:22:56.833Z","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-27T17:22:56.834Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.247239417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:22:56.834Z","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:22:56.834Z","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:22:56.834Z","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"debug","timestamp":"2024-07-27T17:23:11.481Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:11.482Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:11.482Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:11.483Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:11.510Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:11.511Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:11.512Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:11.512Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:11.513Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:11.513Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:11.514Z","caller":"dao/user_dao.go:426","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-27T17:23:11.547Z","caller":"dao/user_dao.go:460","msg":"User not found","userID":"user-1","duration":0.032687666}
{"level":"info","timestamp":"2024-07-27T17:23:11.547Z","caller":"dao/user_dao.go:63","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T17:23:11.610Z","caller":"dao/user_dao.go:157","msg":"Result record","record":["user-1","User One","user.one@example.com"]}
{"level":"info","timestamp":"2024-07-27T17:23:11.613Z","caller":"dao/user_dao.go:179","msg":"User created successfully","userID":"user-1","duration":0.066077125}
{"level":"info","timestamp":"2024-07-27T17:23:11.649Z","caller":"dao/user_dao.go:237","msg":"BELONGS_TO relationship verified","userID":"user-1","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:23:11.650Z","caller":"dao/user_dao.go:243","msg":"MEMBER_OF relationship verified","userID":"user-1","deptID":"dept-1"}
{"level":"error","timestamp":"2024-07-27T17:23:11.651Z","caller":"dao/user_dao.go:203","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/app/dao/user_dao.go:203\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/app/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/app/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:23:11.652Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T17:23:11.652Z","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-1","creatorID":""}
{"level":"info","timestamp":"2024-07-27T17:23:11.652Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.171369125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:23:11.652Z","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T17:23:11.653Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T17:23:14.176Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:14.177Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:14.178Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:14.179Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:14.209Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:14.211Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:14.212Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:14.212Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:14.213Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:14.213Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:14.214Z","caller":"dao/user_dao.go:426","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T17:23:14.222Z","caller":"dao/user_dao.go:454","msg":"User retrieved successfully","userID":"user-1","duration":0.007736208}
{"level":"error","timestamp":"2024-07-27T17:23:14.222Z","caller":"util/http_util.go:11","msg":"User already exists","error":"user conflict","path":"/api/v1/users","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/app/controller/user_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T17:23:14.223Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":409,"latency":0.046773542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T17:23:22.446Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:22.448Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:22.449Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:22.450Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:22.477Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:22.478Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:22.479Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:22.480Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:22.481Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:22.481Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:22.482Z","caller":"dao/organization_dao.go:260","msg":"Retrieving organization","orgID":"org-1"}
{"level":"warn","timestamp":"2024-07-27T17:23:22.489Z","caller":"dao/organization_dao.go:294","msg":"Organization not found","orgID":"org-1","duration":0.007188291}
{"level":"info","timestamp":"2024-07-27T17:23:22.490Z","caller":"dao/organization_dao.go:61","msg":"Creating new organization","orgName":"Org One"}
{"level":"info","timestamp":"2024-07-27T17:23:22.498Z","caller":"dao/organization_dao.go:107","msg":"Organization created successfully","orgID":"org-1","duration":0.00823675}
{"level":"error","timestamp":"2024-07-27T17:23:22.500Z","caller":"dao/organization_dao.go:121","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*OrganizationDAO).CreateOrganization\n\t/app/dao/organization_dao.go:121\ngithub.com/dev-mohitbeniwal/echo/api/service.(*OrganizationService).CreateOrganization\n\t/app/service/organization_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*OrganizationController).CreateOrganization\n\t/app/controller/organization_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:23:22.500Z","caller":"db/redis.go:173","msg":"Organization cached successfully","organizationID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:23:22.501Z","caller":"service/organization_service.go:169","msg":"Organization created successfully","orgID":"org-1","userID":""}
{"level":"info","timestamp":"2024-07-27T17:23:22.501Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/organizations","query":"","status":201,"latency":0.055290333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:23:22.501Z","caller":"service/organization_service.go:60","msg":"Organization created event received","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:23:22.502Z","caller":"util/notification_service.go:78","msg":"Notifying organization change","changeType":"created","orgID":"org-1","orgName":"Org One"}
{"level":"debug","timestamp":"2024-07-27T17:23:24.507Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:24.508Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:24.508Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:24.508Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:24.535Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:24.536Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:24.536Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:24.536Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:24.537Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:24.537Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:24.538Z","caller":"dao/department_dao.go:325","msg":"Retrieving department","deptID":"dept-1"}
{"level":"warn","timestamp":"2024-07-27T17:23:24.542Z","caller":"dao/department_dao.go:359","msg":"Department not found","deptID":"dept-1","duration":0.0042885}
{"level":"info","timestamp":"2024-07-27T17:23:24.543Z","caller":"dao/department_dao.go:61","msg":"Creating new department","deptName":"Department 1 Org 1"}
{"level":"info","timestamp":"2024-07-27T17:23:24.550Z","caller":"dao/department_dao.go:114","msg":"Department created successfully","deptID":"dept-1","duration":0.007856083}
{"level":"error","timestamp":"2024-07-27T17:23:24.554Z","caller":"dao/department_dao.go:169","msg":"BELONGS_TO relationship not created","deptID":"dept-1","orgID":"org-1","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).verifyRelationships\n\t/app/dao/department_dao.go:169\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/app/dao/department_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/app/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/app/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:23:24.555Z","caller":"dao/department_dao.go:137","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*DepartmentDAO).CreateDepartment\n\t/app/dao/department_dao.go:137\ngithub.com/dev-mohitbeniwal/echo/api/service.(*DepartmentService).CreateDepartment\n\t/app/service/department_service.go:157\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*DepartmentController).CreateDepartment\n\t/app/controller/department_controller.go:57\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:23:24.556Z","caller":"db/redis.go:220","msg":"Department cached successfully","departmentID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:23:24.556Z","caller":"service/department_service.go:173","msg":"Department created successfully","deptID":"dept-1","userID":""}
{"level":"info","timestamp":"2024-07-27T17:23:24.557Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/departments","query":"","status":201,"latency":0.049315583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:23:24.556Z","caller":"service/department_service.go:64","msg":"Department created event received","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:23:24.557Z","caller":"service/department_service.go:336","msg":"Updating department indexes","deptID":"dept-1"}
{"level":"info","timestamp":"2024-07-27T17:23:24.557Z","caller":"util/notification_service.go:87","msg":"Notifying department change","changeType":"created","deptID":"dept-1","deptName":"Department 1 Org 1"}
{"level":"debug","timestamp":"2024-07-27T17:23:26.833Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:26.833Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:26.834Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:26.834Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:26.862Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:26.862Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:26.862Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:26.863Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:26.863Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:26.863Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:26.863Z","caller":"dao/user_dao.go:426","msg":"Retrieving user","userID":"user-1"}
{"level":"warn","timestamp":"2024-07-27T17:23:26.870Z","caller":"dao/user_dao.go:460","msg":"User not found","userID":"user-1","duration":0.006407666}
{"level":"info","timestamp":"2024-07-27T17:23:26.871Z","caller":"dao/user_dao.go:63","msg":"Creating new user","username":"user.one"}
{"level":"info","timestamp":"2024-07-27T17:23:26.876Z","caller":"dao/user_dao.go:157","msg":"Result record","record":["user-1","User One","user.one@example.com"]}
{"level":"info","timestamp":"2024-07-27T17:23:26.880Z","caller":"dao/user_dao.go:179","msg":"User created successfully","userID":"user-1","duration":0.009215875}
{"level":"info","timestamp":"2024-07-27T17:23:26.883Z","caller":"dao/user_dao.go:237","msg":"BELONGS_TO relationship verified","userID":"user-1","orgID":"org-1"}
{"level":"info","timestamp":"2024-07-27T17:23:26.883Z","caller":"dao/user_dao.go:243","msg":"MEMBER_OF relationship verified","userID":"user-1","deptID":"dept-1"}
{"level":"error","timestamp":"2024-07-27T17:23:26.884Z","caller":"dao/user_dao.go:203","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).CreateUser\n\t/app/dao/user_dao.go:203\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).CreateUser\n\t/app/service/user_service.go:153\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).CreateUser\n\t/app/controller/user_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T17:23:26.884Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T17:23:26.885Z","caller":"service/user_service.go:169","msg":"User created successfully","userID":"user-1","creatorID":""}
{"level":"info","timestamp":"2024-07-27T17:23:26.885Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users","query":"","status":201,"latency":0.052015458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:23:26.885Z","caller":"service/user_service.go:60","msg":"User created event received","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T17:23:26.885Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"created","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T17:23:49.101Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T17:23:49.103Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T17:23:49.104Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMTc1ZDBlMjgtZWE4ZC00OTllLWIxZTAtNWZhMjgxYTBiYWJjIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImUzNThiNjk3LWJkMmEtNGJhMy1hNGU2LTRkNWM0ZmQwZTBlMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAwODkwLCJleHAiOjE3MjIxMDQ0OTAsImlhdCI6MTcyMjEwMDg5MCwianRpIjoiZDk2NDQ1ZDItMzUzZC00MTkzLThhZDYtYTQ3YzhlMDVkOTM1IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.tKOayfvqs7vAUPxpp3RehK5AE-o3LR5VQ7yYzelW9y8M9QdXcKPSkV8tT-GocPrVJ7Ns2lpO5eJojM8hEfi8W5KUCCSW6oXjbjOhYjd6NQ8tTVg0590yC2GZeZv1I90hE1xEcCcNcuB8CrzeEyCXVluz90NRGcCuxcbfDXw8TsimPnz26dFeUVM7ZXNmjt03uHSukJfPrhyARVzONQxEPXuxapPlbOQGSnq6n5RZN54tOXIFk0H0E99AY6530J4G-Caf-DGInthfls7LtvpKXus4JIiZkvBVkrjYj_CICWQckihSjzVzzPtOV8XYjaFmsO8v7-uQcwFQ7G9wTIDuaQ"}
{"level":"info","timestamp":"2024-07-27T17:23:49.105Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T17:23:49.136Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T17:23:49.138Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T17:23:49.139Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:49.139Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:49.140Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722104490,"jti":"d96445d2-353d-4193-8ad6-a47c8e05d935","iat":1722100890,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T17:23:49.140Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T17:23:49.141Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T17:23:49.141Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T17:23:49.151Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.009684792,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:23:49.152Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T17:23:49.153Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T17:23:49.153Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.05393025,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T17:31:51.059Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:31:51.232Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:31:51.237Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:31:51.239Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.227Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.228Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.245Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.245Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.262Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.263Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.294Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.295Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.318Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.318Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.327Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.328Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.335Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:31:52.336Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:38:31.148Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:38:31.248Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:38:31.250Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:38:31.251Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.065Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.065Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.076Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.076Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.089Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.090Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.099Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.099Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.110Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.110Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.120Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.120Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.128Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:38:32.129Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:39:55.356Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:39:55.376Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:39:55.377Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:39:55.378Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.394Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.395Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.400Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.400Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.402Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.402Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.405Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.405Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.408Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.408Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.412Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.412Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.415Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:39:55.416Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:42:46.898Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:42:46.913Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:42:46.915Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:42:46.915Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.925Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.925Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.930Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.930Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.934Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.934Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.937Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.938Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.940Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.940Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.942Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.942Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.944Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:42:46.945Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:44:51.803Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:44:51.816Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:44:51.817Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:44:51.817Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.827Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.828Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.831Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.831Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.833Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.834Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.836Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.836Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.838Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.838Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.840Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.840Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.842Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:44:51.843Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:46:00.876Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:46:00.893Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:46:00.894Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:46:00.894Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.904Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.904Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.907Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.908Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.917Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.919Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.927Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.927Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.930Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.930Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.933Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.933Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.936Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:46:00.936Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:47:26.571Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:47:26.588Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:47:26.590Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:47:26.590Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.600Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.600Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.603Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.603Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.605Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.605Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.607Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.607Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.609Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.609Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.611Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.611Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.613Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:47:26.614Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:49:39.170Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:49:39.252Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:49:39.255Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:49:39.255Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.167Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.167Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.189Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.189Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.208Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.209Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.221Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.222Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.247Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.250Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.264Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.265Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.273Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:49:40.274Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:52:45.127Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:52:45.145Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:52:45.146Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:52:45.147Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.162Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.162Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.165Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.165Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.167Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.167Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.169Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.170Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.172Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.172Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.174Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.175Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.177Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:52:45.177Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:53:47.873Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:53:47.889Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:53:47.890Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:53:47.891Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.902Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.902Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.908Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.909Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.915Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.915Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.918Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.918Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.921Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.921Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.925Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.925Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.928Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:53:47.929Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:54:19.600Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:54:19.620Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:54:19.622Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:54:19.622Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.634Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.635Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.639Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.640Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.643Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.643Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.645Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.646Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.649Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.649Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.653Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.653Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.655Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:54:19.656Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:56:19.020Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:56:19.039Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:56:19.040Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:56:19.041Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.050Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.050Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.053Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.053Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.055Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.055Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.058Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.058Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.060Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.060Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.062Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.062Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.064Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:56:19.064Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T17:58:41.504Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T17:58:41.530Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T17:58:41.532Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T17:58:41.532Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.544Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.544Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.550Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.550Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.555Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.556Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.559Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.559Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.563Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.565Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.571Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.571Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.574Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T17:58:41.576Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:00:12.377Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:00:12.479Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:00:12.484Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:00:12.484Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.308Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.309Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.343Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.348Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.395Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.396Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.411Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.412Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.441Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.442Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.459Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.459Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.498Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:00:13.509Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:02:01.340Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:02:01.463Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:02:01.465Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:02:01.466Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.392Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.393Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.414Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.415Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.430Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.431Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.446Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.447Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.465Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.466Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.476Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.476Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.485Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:02:02.487Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:03:29.106Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:03:29.239Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:03:29.243Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:03:29.244Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.886Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.886Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.901Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.901Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.916Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.916Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.926Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.927Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.938Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.939Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.953Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.953Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.961Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:03:29.962Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:04:06.009Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:04:06.037Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:04:06.038Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:04:06.039Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.057Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.057Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.060Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.060Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.063Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.063Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.066Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.066Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.068Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.069Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.071Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.071Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.073Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:04:06.073Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:05:15.554Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:05:15.596Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:05:15.598Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:05:15.598Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.609Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.609Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.613Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.613Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.617Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.617Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.619Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.619Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.621Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.622Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.624Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.624Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.626Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:05:15.626Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T18:07:39.361Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:07:39.362Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:07:39.363Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:07:39.364Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:07:39.498Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:07:39.499Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:07:39.500Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:39.500Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:39.501Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:07:39.501Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:07:39.502Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:07:39.502Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:07:39.550Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.04741825,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:07:39.550Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:07:39.550Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:07:39.551Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.190602708,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:10:39.836Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:10:39.864Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:10:39.865Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:10:39.866Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.879Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.879Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.883Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.883Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.885Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.885Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.888Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.888Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.890Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.890Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.892Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.892Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.894Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:10:39.895Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T18:10:41.590Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:10:41.591Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:10:41.591Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:10:41.592Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:10:41.702Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:10:41.702Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:10:41.703Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:10:41.703Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:10:41.704Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:10:41.704Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:10:41.705Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:10:41.705Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:10:41.713Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.008596542,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:10:41.714Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:10:41.714Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:10:41.715Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.125074125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T18:11:55.186Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:11:55.325Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:11:55.328Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:11:55.329Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.177Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.178Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.199Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.201Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.232Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.235Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.267Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.267Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.286Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.286Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.307Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.308Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.322Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:11:56.323Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:14:34.439Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:14:34.560Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:14:34.564Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:14:34.564Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.537Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.538Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.562Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.562Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.583Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.587Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.687Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.687Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.715Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.716Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.753Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.754Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.764Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:14:35.764Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:16:33.400Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:16:33.566Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:16:33.568Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:16:33.569Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.428Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.430Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.445Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.445Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.463Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.463Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.485Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.485Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.522Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.522Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.539Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.539Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.550Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:16:34.551Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:19:03.190Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:19:03.210Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:19:03.211Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:19:03.213Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.246Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.246Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.249Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.249Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.252Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.252Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.254Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.254Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.257Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.257Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.259Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.259Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.261Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:19:03.261Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:20:10.015Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:20:10.162Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:20:10.166Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:20:10.172Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.921Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.923Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.933Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.934Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.945Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.945Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.956Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.957Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.986Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:20:10.986Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:20:11.007Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:20:11.008Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:20:11.030Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:20:11.032Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T18:24:38.459Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T18:24:38.583Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T18:24:38.584Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T18:24:38.585Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.320Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.320Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.333Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.333Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.379Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.379Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.395Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.397Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.421Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.422Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.439Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.439Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.449Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T18:24:39.451Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T18:24:49.995Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:24:49.996Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:24:49.996Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:24:49.998Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:24:50.189Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:24:50.190Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:24:50.191Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:24:50.191Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:24:50.191Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:24:50.192Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:24:50.193Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:24:50.194Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:24:50.236Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.042483958,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:24:50.237Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:24:50.238Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:24:50.238Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.243782333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:27:01.748Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:27:01.749Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:27:01.749Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:27:01.750Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:27:01.848Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:27:01.849Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:27:01.849Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:01.850Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:01.850Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:27:01.850Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:27:01.851Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:27:01.851Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:27:01.898Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.046157,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:27:01.898Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:27:01.898Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:27:01.899Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.151492917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:31:28.415Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:31:28.417Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:31:28.417Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:31:28.418Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:31:28.510Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:31:28.511Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:31:28.512Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:31:28.512Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:31:28.512Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:31:28.513Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:31:28.513Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:31:28.514Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:31:28.544Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.029760334,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:31:28.544Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:31:28.545Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:31:28.545Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.13055925,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:35:37.368Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:35:37.370Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:35:37.370Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:35:37.371Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:35:37.488Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:35:37.490Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:35:37.490Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:35:37.490Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:35:37.491Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:35:37.491Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:35:37.492Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:35:37.492Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:35:37.521Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.028895958,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:35:37.521Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:35:37.522Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:35:37.522Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.154860292,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:39:02.115Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:39:02.116Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:39:02.117Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:39:02.118Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:39:02.206Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:39:02.208Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:39:02.208Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:02.209Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:02.209Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:02.209Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:39:02.210Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:39:02.210Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:39:02.251Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.04110375,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:39:02.254Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:39:02.255Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:39:02.255Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.142089583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:39:38.906Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:39:38.907Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:39:38.907Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:39:38.908Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:39:38.938Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:39:38.940Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:39:38.940Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:38.941Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:38.942Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:39:38.942Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:39:38.943Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:39:38.943Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:39:38.973Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.030191708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:39:38.974Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:39:38.974Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:39:38.974Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.069700459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:40:38.831Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:40:38.832Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:40:38.833Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:40:38.833Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:40:38.952Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:40:38.964Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:40:38.965Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:40:38.965Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:40:38.966Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:40:38.966Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:40:38.969Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:40:38.969Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:40:38.994Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.025164042,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:40:38.995Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:40:38.996Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:40:38.996Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.166481333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:41:27.589Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:41:27.590Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:41:27.591Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:41:27.591Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:41:27.621Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:41:27.623Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:41:27.623Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:41:27.623Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:41:27.624Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:41:27.624Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:41:27.624Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:41:27.625Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:41:27.652Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.027862208,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:41:27.653Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:41:27.654Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:41:27.654Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.066285417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:42:02.221Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:42:02.223Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:42:02.224Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:42:02.224Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:42:02.253Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:42:02.254Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:42:02.254Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:42:02.255Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:42:02.255Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:42:02.255Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:42:02.256Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:42:02.256Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:42:02.273Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.017203583,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:42:02.274Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:42:02.274Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:42:02.275Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.054220292,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:43:26.376Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:43:26.378Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:43:26.379Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:43:26.379Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:43:26.468Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:43:26.469Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:43:26.470Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:43:26.470Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:43:26.471Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:43:26.471Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:43:26.472Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:43:26.472Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:43:26.500Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.027855667,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:43:26.501Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:43:26.501Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:43:26.501Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.126511583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:45:03.376Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:45:03.377Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:45:03.378Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:45:03.379Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:45:03.471Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:45:03.472Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:45:03.473Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:03.473Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:03.473Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:03.474Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:45:03.474Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:45:03.474Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:45:03.503Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.029081875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:45:03.504Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:45:03.505Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:45:03.505Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.130474708,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:45:44.490Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:45:44.492Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:45:44.492Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:45:44.493Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:45:44.541Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:45:44.543Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:45:44.543Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:44.543Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:44.544Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:45:44.544Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:45:44.545Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:45:44.545Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:45:44.572Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.026240958,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:45:44.572Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:45:44.573Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:45:44.573Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.083946333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:48:51.780Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:48:51.781Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:48:51.782Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:48:51.782Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:48:51.869Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:48:51.870Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:48:51.871Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:48:51.871Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:48:51.872Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:48:51.872Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:48:51.872Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:48:51.873Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:48:51.905Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.032155042,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:48:51.906Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:48:51.906Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:48:51.906Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.127340001,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:50:54.857Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:50:54.858Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:50:54.858Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:50:54.859Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:50:54.946Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:50:54.948Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:50:54.948Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:50:54.949Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:50:54.949Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:50:54.949Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:50:54.950Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:50:54.950Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:50:54.986Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.035988917,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:50:54.987Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:50:54.987Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:50:54.987Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.131498584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:53:04.789Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:53:04.790Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:53:04.791Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:53:04.792Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:53:04.882Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:53:04.884Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:53:04.885Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:04.885Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:04.885Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:04.886Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:53:04.886Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:53:04.886Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:53:04.930Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.043931042,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:53:04.931Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:53:04.932Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:53:04.932Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.144988125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:53:52.941Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:53:52.950Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:53:52.951Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:53:52.952Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:53:52.981Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:53:52.983Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:53:52.983Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:52.983Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:52.983Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:53:52.984Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:53:52.984Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:53:52.984Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:53:52.999Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.014328917,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:53:53.000Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:53:53.000Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:53:53.001Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.061093042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:54:40.340Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:54:40.341Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:54:40.342Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:54:40.343Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:54:40.372Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:54:40.373Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:54:40.374Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:54:40.374Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:54:40.374Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:54:40.375Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:54:40.375Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:54:40.376Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:54:40.435Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.059228583,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:54:40.436Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:54:40.436Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:54:40.436Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.097955458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:55:13.636Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:55:13.637Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:55:13.638Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:55:13.638Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:55:13.667Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:55:13.668Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:55:13.668Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:55:13.669Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:55:13.669Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:55:13.669Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:55:13.670Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:55:13.670Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:55:13.679Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.008871167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:55:13.679Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:55:13.680Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:55:13.681Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.044592875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:56:33.111Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:56:33.112Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:56:33.112Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:56:33.113Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:56:33.259Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:56:33.264Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:56:33.266Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:56:33.267Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:56:33.268Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:56:33.268Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:56:33.276Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:56:33.277Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:56:33.307Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.029523,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:56:33.307Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:56:33.308Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:56:33.308Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.198843042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:57:19.068Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:57:19.069Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:57:19.070Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:57:19.070Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:57:19.112Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:57:19.113Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:57:19.113Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:57:19.114Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:57:19.114Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:57:19.114Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:57:19.115Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:57:19.115Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:57:19.130Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.015128333,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:57:19.131Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:57:19.131Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:57:19.132Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.064384459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:58:20.905Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:58:20.907Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:58:20.908Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:58:20.908Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:58:20.994Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:58:20.996Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:58:20.996Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:20.997Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:20.997Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:20.997Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:58:20.998Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:58:20.998Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:58:21.005Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.006632792,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:58:21.005Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:58:21.006Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:58:21.006Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.100863834,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T18:58:59.135Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T18:58:59.136Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T18:58:59.136Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T18:58:59.137Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T18:58:59.168Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T18:58:59.170Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T18:58:59.170Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:59.170Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:59.171Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T18:58:59.171Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T18:58:59.172Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T18:58:59.172Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T18:58:59.209Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.036809333,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:58:59.209Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T18:58:59.210Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T18:58:59.210Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.076433042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:01:56.458Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:01:56.460Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:01:56.461Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:01:56.462Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:01:56.549Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T19:01:56.550Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T19:01:56.551Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:01:56.551Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:01:56.551Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:01:56.552Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T19:01:56.552Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T19:01:56.552Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T19:01:56.580Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.027892541,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:01:56.581Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:01:56.581Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:01:56.582Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.124878416,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:03:15.191Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:03:15.193Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:03:15.194Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:03:15.195Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:03:15.279Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T19:03:15.281Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T19:03:15.282Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:03:15.282Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:03:15.282Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:03:15.283Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T19:03:15.283Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T19:03:15.283Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T19:03:15.313Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.029350625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:03:15.314Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:03:15.314Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:03:15.315Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.124886417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:05:29.461Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:05:29.462Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:05:29.462Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:05:29.463Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:05:29.559Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T19:05:29.561Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T19:05:29.561Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:05:29.561Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:05:29.561Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:05:29.562Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T19:05:29.562Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T19:05:29.562Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T19:05:29.601Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.038418708,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:05:29.601Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:05:29.602Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:05:29.602Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.143079333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:06:08.178Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:06:08.179Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:06:08.179Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:06:08.180Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:06:08.207Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T19:06:08.208Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T19:06:08.208Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:08.208Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:08.208Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:08.208Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T19:06:08.209Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T19:06:08.209Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T19:06:08.229Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.019760583,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:06:08.229Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:06:08.230Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:06:08.230Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.053580167,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:06:19.385Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:06:19.386Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:06:19.387Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:06:19.387Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:06:19.415Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T19:06:19.416Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T19:06:19.416Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:19.416Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:19.416Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722107250,"jti":"e833f133-f978-4baf-a36a-1d395888f1f9","iat":1722103650,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T19:06:19.417Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T19:06:19.417Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T19:06:19.417Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T19:06:19.423Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.00546225,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:06:19.424Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:06:19.424Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:06:19.425Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.039902875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:09:42.090Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:09:42.092Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:09:42.093Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:09:42.094Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:09:42.188Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:09:42.190Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 2m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:09:42.190Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 2m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:09:42.191Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.102071042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:14:27.445Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:14:27.447Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:14:27.448Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:14:27.449Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:14:27.609Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:14:27.611Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 6m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:14:27.612Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 6m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:14:27.612Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.168246333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:15:42.578Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:15:42.580Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:15:42.581Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:15:42.582Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:15:42.695Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:15:42.697Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 8m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:15:42.698Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 8m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:15:42.698Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.121320125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:16:15.992Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:16:15.993Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:16:15.994Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:16:15.995Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:16:16.022Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:16:16.024Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 8m46s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:16:16.024Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 8m46s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:16:16.025Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034164916,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:17:06.966Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:17:06.967Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:17:06.968Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:17:06.969Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:17:07.004Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:17:07.009Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 9m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:17:07.009Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 9m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:17:07.010Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.045587666,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:17:45.345Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:17:45.346Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:17:45.347Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:17:45.347Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:17:45.377Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:17:45.378Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 10m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:17:45.378Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 10m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:17:45.379Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03429425,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:18:42.625Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:18:42.627Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:18:42.628Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:18:42.629Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:18:42.658Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:18:42.660Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 11m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:18:42.661Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 11m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:18:42.661Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.037610209,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:18:58.627Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:18:58.628Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:18:58.628Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:18:58.629Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:18:58.657Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:18:58.658Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 11m28s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:18:58.659Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 11m28s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:18:58.659Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032283917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:20:30.408Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:20:30.410Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:20:30.411Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:20:30.412Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:20:30.499Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:20:30.500Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 13m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:20:30.501Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 13m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:20:30.501Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.093780626,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:21:05.287Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:21:05.288Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:21:05.288Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:21:05.289Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:21:05.316Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:21:05.318Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 13m35s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:21:05.319Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 13m35s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:21:05.319Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033053875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:26:51.703Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:26:51.705Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:26:51.706Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:26:51.707Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:26:51.812Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:26:51.814Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 19m21s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:26:51.814Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 19m21s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:26:51.815Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.1133315,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:27:08.846Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:27:08.846Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:27:08.847Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:27:08.847Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:27:08.874Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:27:08.875Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 19m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:27:08.875Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 19m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:27:08.875Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.029355958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:27:09.542Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:27:09.542Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:27:09.542Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:27:09.542Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:27:09.569Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:27:09.570Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 19m39s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:27:09.570Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 19m39s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:27:09.570Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.02900975,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:28:43.274Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:28:43.276Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:28:43.277Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:28:43.278Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:28:43.370Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:28:43.372Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 21m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:28:43.373Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 21m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:28:43.373Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.100865166,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:29:02.920Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:29:02.920Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:29:02.921Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:29:02.921Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:29:02.948Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:29:02.949Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 21m32s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:29:02.949Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 21m32s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:29:02.950Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030104584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:29:56.063Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:29:56.064Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:29:56.065Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:29:56.066Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:29:56.164Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:29:56.166Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 22m26s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:29:56.167Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 22m26s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:29:56.167Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.105117084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:30:26.286Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:30:26.287Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:30:26.287Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:30:26.288Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:30:26.316Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:30:26.318Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 22m56s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:30:26.318Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 22m56s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:30:26.319Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03369675,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:30:27.009Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:30:27.009Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:30:27.010Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:30:27.010Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:30:27.039Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:30:27.040Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 22m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:30:27.041Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 22m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:30:27.041Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032896875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:32:42.187Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:32:42.189Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:32:42.190Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:32:42.191Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:32:42.278Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:32:42.279Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 25m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:32:42.279Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 25m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:32:42.280Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.094457459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:32:48.502Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:32:48.503Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:32:48.503Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:32:48.504Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:32:48.531Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:32:48.533Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 25m18s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:32:48.533Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 25m18s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:32:48.533Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03207475,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:32:49.083Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:32:49.084Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:32:49.084Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:32:49.085Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:32:49.112Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:32:49.112Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 25m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:32:49.113Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 25m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:32:49.113Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030876417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:32:49.912Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:32:49.913Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:32:49.913Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:32:49.913Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:32:49.940Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:32:49.941Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 25m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:32:49.942Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 25m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:32:49.943Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030632458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:34:39.305Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:34:39.306Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:34:39.306Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:34:39.306Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:34:39.388Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:34:39.389Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 27m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:34:39.389Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 27m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:34:39.389Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.085617958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:34:59.368Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:34:59.368Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:34:59.368Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:34:59.369Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:34:59.395Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:34:59.395Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 27m29s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:34:59.395Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 27m29s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:34:59.396Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.0278825,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:35:27.196Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:35:27.197Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:35:27.197Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:35:27.199Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:35:27.227Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:35:27.228Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 27m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:35:27.229Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 27m57s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:35:27.229Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034102083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:35:41.995Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:35:41.996Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:35:41.996Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:35:41.996Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:35:42.025Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:35:42.026Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 28m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:35:42.026Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 28m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:35:42.027Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031568709,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:35:42.723Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:35:42.723Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:35:42.723Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:35:42.724Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:35:42.752Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:35:42.753Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 28m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:35:42.754Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 28m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:35:42.755Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032289125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:36:03.858Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:36:03.859Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:36:03.860Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:36:03.860Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:36:03.888Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:36:03.890Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 28m33s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:36:03.891Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 28m33s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:36:03.891Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033773583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:36:04.282Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:36:04.283Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:36:04.283Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:36:04.283Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:36:04.311Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:36:04.312Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 28m34s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:36:04.312Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 28m34s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:36:04.313Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031390917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:36:38.757Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:36:38.758Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:36:38.759Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:36:38.760Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:36:38.792Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:36:38.793Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 29m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:36:38.793Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 29m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:36:38.793Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.037395792,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:36:39.404Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:36:39.404Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:36:39.404Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:36:39.404Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:36:39.432Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:36:39.432Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 29m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:36:39.432Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 29m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:36:39.432Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.02839775,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:37:51.146Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:37:51.147Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:37:51.147Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:37:51.148Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:37:51.236Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:37:51.237Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 30m21s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:37:51.237Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 30m21s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:37:51.238Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.0930185,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:16.945Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:16.947Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:16.947Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:16.948Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:17.040Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:17.042Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 31m47s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:17.042Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 31m47s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:17.043Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.099108459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:32.538Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:32.538Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:32.539Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:32.539Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:32.580Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:32.581Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 32m2s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:32.582Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 32m2s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:32.583Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.045670041,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:32.835Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:32.836Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:32.836Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:32.836Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:32.864Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:32.865Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 32m2s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:32.866Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 32m2s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:32.866Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031973542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:33.542Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:33.543Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:33.544Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:33.544Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:33.573Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:33.574Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 32m3s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:33.575Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 32m3s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:33.575Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033679625,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:56.817Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:56.821Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:56.821Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:56.825Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:56.859Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:56.860Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 32m26s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:56.861Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 32m26s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:56.861Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.04836425,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:39:57.209Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:39:57.209Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:39:57.209Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:39:57.210Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:39:57.236Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:39:57.236Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 32m27s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:39:57.236Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 32m27s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:39:57.237Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028154875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:40:35.221Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:40:35.222Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:40:35.223Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:40:35.223Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:40:35.256Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:40:35.257Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 33m5s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:40:35.258Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 33m5s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:40:35.259Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.039011583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:40:40.719Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:40:40.719Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:40:40.720Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:40:40.720Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:40:40.746Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:40:40.748Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 33m10s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:40:40.748Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 33m10s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:40:40.749Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030750125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:40:44.888Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:40:44.889Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:40:44.890Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:40:44.890Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:40:44.918Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:40:44.919Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 33m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:40:44.920Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 33m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:40:44.920Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032455917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:40:45.453Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:40:45.453Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:40:45.454Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:40:45.454Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:40:45.485Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:40:45.486Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 33m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:40:45.487Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 33m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:40:45.487Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034688125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:40:59.039Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:40:59.039Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:40:59.040Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:40:59.040Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:40:59.068Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:40:59.069Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 33m29s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:40:59.069Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 33m29s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:40:59.070Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03374325,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:41:42.838Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:41:42.840Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:41:42.841Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:41:42.841Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:41:42.870Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:41:42.872Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 34m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:41:42.873Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 34m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:41:42.873Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.036996208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:41:43.549Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:41:43.550Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:41:43.550Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:41:43.550Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:41:43.577Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:41:43.578Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 34m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:41:43.578Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 34m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:41:43.579Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03017725,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:42:38.630Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:42:38.633Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:42:38.633Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:42:38.634Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:42:38.664Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:42:38.665Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 35m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:42:38.666Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 35m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:42:38.667Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.037371458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:42:39.435Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:42:39.435Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:42:39.435Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:42:39.435Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:42:39.462Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:42:39.462Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 35m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:42:39.462Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 35m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:42:39.463Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028167125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:30.272Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:30.273Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:30.274Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:30.274Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:30.303Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:30.304Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:30.305Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:30.305Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034955458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:30.577Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:30.578Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:30.578Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:30.578Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:30.605Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:30.606Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:30.607Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m0s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:30.607Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030565125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:42.937Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:42.938Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:42.938Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:42.939Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:42.965Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:42.966Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:42.967Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m12s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:42.967Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030606,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:43.705Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:43.705Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:43.705Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:43.706Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:43.733Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:43.734Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:43.735Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m13s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:43.735Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030937375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:44.286Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:44.287Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:44.288Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:44.288Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:44.317Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:44.318Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:44.318Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:44.319Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033135583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:43:55.544Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:43:55.544Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:43:55.545Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:43:55.545Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:43:55.573Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:43:55.575Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 36m25s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:43:55.575Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 36m25s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:43:55.576Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032790542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:44:54.222Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:44:54.223Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:44:54.224Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:44:54.225Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:44:54.253Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:44:54.254Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:44:54.254Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:44:54.255Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034648625,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:44:54.875Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:44:54.876Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:44:54.877Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:44:54.877Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:44:54.906Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:44:54.907Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:44:54.908Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:44:54.908Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033044666,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:45:05.643Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:45:05.643Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:45:05.644Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:45:05.644Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:45:05.738Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:45:05.739Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m35s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:45:05.740Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m35s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:45:05.741Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.0982985,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:45:06.245Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:45:06.245Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:45:06.245Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:45:06.246Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:45:06.272Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:45:06.273Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m36s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:45:06.273Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m36s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:45:06.274Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.029165125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:45:28.471Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:45:28.472Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:45:28.473Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:45:28.474Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:45:28.503Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:45:28.504Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m58s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:45:28.505Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m58s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:45:28.505Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.035206167,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:45:29.192Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:45:29.193Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:45:29.193Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:45:29.194Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:45:29.221Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:45:29.222Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m59s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:45:29.223Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m59s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:45:29.223Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031729041,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:45:29.526Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:45:29.527Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:45:29.527Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:45:29.527Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:45:29.553Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:45:29.553Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 37m59s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:45:29.553Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 37m59s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:45:29.554Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.027294708,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:00.534Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:00.535Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:00.536Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:00.537Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:00.566Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:00.569Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 38m30s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:00.569Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 38m30s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:00.570Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.037694208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:01.158Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:01.159Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:01.160Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:01.160Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:01.191Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:01.194Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 38m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:01.196Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 38m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:01.197Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.038680458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:01.644Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:01.645Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:01.646Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:01.646Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:01.678Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:01.680Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 38m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:01.680Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 38m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:01.680Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.036943917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:36.307Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:36.308Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:36.308Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:36.309Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:36.336Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:36.337Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:36.338Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:36.339Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032653084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:36.905Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:36.905Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:36.906Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:36.906Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:36.932Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:36.932Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:36.932Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m6s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:36.932Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.027368209,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:37.238Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:37.239Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:37.239Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:37.240Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:37.267Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:37.268Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:37.269Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:37.270Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032027542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:37.897Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:37.897Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:37.898Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:37.899Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:37.926Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:37.928Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:37.928Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:37.930Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.033953459,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:38.202Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:38.203Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:38.203Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:38.204Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:38.230Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:38.231Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:38.232Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:38.233Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031086625,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:46:55.377Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:46:55.379Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:46:55.379Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:46:55.380Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:46:55.406Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:46:55.407Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 39m25s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:46:55.408Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 39m25s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:46:55.409Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03203175,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:49:12.730Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:49:12.732Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:49:12.733Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:49:12.734Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:49:12.821Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:49:12.823Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 41m42s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:49:12.824Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 41m42s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:49:12.824Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.094735542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:49:13.537Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:49:13.537Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:49:13.538Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:49:13.538Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:49:13.564Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:49:13.565Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 41m43s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:49:13.565Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 41m43s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:49:13.566Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028605083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:50:31.038Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:50:31.040Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:50:31.041Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:50:31.042Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:50:31.149Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:50:31.151Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 43m1s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:50:31.152Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 43m1s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:50:31.152Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.115310542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:50:31.765Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:50:31.765Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:50:31.766Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:50:31.766Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:50:31.792Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:50:31.793Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 43m1s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:50:31.793Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 43m1s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:50:31.794Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028670375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:50:54.070Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:50:54.070Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:50:54.071Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:50:54.071Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:50:54.098Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:50:54.099Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 43m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:50:54.100Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 43m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:50:54.101Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031863834,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:50:54.695Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:50:54.696Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:50:54.697Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:50:54.698Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:50:54.726Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:50:54.727Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 43m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:50:54.728Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 43m24s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:50:54.728Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032682292,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:51:44.797Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:51:44.799Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:51:44.800Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:51:44.801Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:51:44.834Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:51:44.836Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 44m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:51:44.836Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 44m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:51:44.837Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.041360917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:51:45.422Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:51:45.423Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:51:45.423Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:51:45.423Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:51:45.450Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:51:45.451Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 44m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:51:45.451Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 44m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:51:45.452Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.029801458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:54:45.481Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:54:45.482Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:54:45.482Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:54:45.484Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:54:45.570Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:54:45.570Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 47m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:54:45.571Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 47m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:54:45.571Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.091976125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:54:46.423Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:54:46.424Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:54:46.424Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:54:46.425Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:54:46.453Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:54:46.454Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 47m16s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:54:46.454Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 47m16s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:54:46.455Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031891958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:55:20.396Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:55:20.397Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:55:20.397Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:55:20.398Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:55:20.425Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:55:20.426Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 47m50s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:55:20.426Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 47m50s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:55:20.427Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031785208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:55:20.752Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:55:20.753Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:55:20.754Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:55:20.754Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:55:20.782Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:55:20.784Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 47m50s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:55:20.784Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 47m50s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:55:20.785Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032937791,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:56:01.260Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:56:01.261Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:56:01.261Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:56:01.262Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:56:01.291Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:56:01.292Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 48m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:56:01.293Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 48m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:56:01.293Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034831501,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:56:01.859Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:56:01.860Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:56:01.861Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:56:01.862Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:56:01.890Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:56:01.891Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 48m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:56:01.891Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 48m31s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:56:01.892Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.0335555,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:56:49.359Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:56:49.360Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:56:49.360Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:56:49.361Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:56:49.391Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:56:49.393Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 49m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:56:49.393Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 49m19s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:56:49.394Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.035879958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:56:50.703Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:56:50.703Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:56:50.704Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:56:50.704Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:56:50.731Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:56:50.731Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 49m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:56:50.732Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 49m20s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:56:50.732Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030093125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:58:07.501Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:58:07.503Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:58:07.503Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:58:07.504Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:58:07.591Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:58:07.593Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 50m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:58:07.594Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 50m37s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:58:07.594Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.09427225,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:58:08.227Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:58:08.227Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:58:08.227Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:58:08.228Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:58:08.263Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:58:08.264Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 50m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:58:08.264Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 50m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:58:08.265Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.038013666,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:58:08.810Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:58:08.811Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:58:08.811Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:58:08.811Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:58:08.838Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:58:08.839Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 50m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:58:08.840Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 50m38s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:58:08.841Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.03120825,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T19:58:18.592Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T19:58:18.592Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T19:58:18.592Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T19:58:18.593Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T19:58:18.622Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T19:58:18.622Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 50m48s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T19:58:18.623Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 50m48s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T19:58:18.623Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031469667,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:01:14.682Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:01:14.684Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:01:14.685Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:01:14.686Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:01:14.848Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:01:14.850Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 53m44s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:01:14.851Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 53m44s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:01:14.851Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.17098025,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:01:15.264Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:01:15.265Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:01:15.265Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:01:15.266Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:01:15.314Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:01:15.315Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 53m45s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:01:15.315Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 53m45s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:01:15.316Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.052467375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:02:37.554Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:02:37.556Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:02:37.557Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:02:37.557Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:02:37.645Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:02:37.647Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:02:37.647Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m7s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:02:37.648Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.094955417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:02:38.173Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:02:38.174Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:02:38.174Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:02:38.175Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:02:38.201Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:02:38.203Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:02:38.203Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:02:38.204Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031089083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:02:38.633Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:02:38.633Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:02:38.634Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:02:38.635Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:02:38.662Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:02:38.663Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:02:38.664Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m8s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:02:38.664Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031787875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:02:39.037Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:02:39.038Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:02:39.038Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:02:39.039Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:02:39.066Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:02:39.067Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:02:39.067Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:02:39.068Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.030998291,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:02:39.529Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:02:39.530Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:02:39.530Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:02:39.530Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:02:39.557Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:02:39.557Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:02:39.558Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m9s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:02:39.558Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028825083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:10.507Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:10.508Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:10.508Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:10.509Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:10.539Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:10.540Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m40s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:10.540Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m40s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:10.541Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.034979542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:11.109Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:11.109Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:11.109Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:11.110Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:11.138Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:11.139Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 55m41s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:11.139Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 55m41s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:11.140Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031578541,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:44.711Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:44.713Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:44.714Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:44.714Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:44.744Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:44.745Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:44.746Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m14s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:44.747Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.036792334,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:45.317Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:45.318Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:45.318Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:45.318Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:45.347Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:45.348Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:45.348Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m15s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:45.349Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032567125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:57.209Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:57.210Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:57.211Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:57.211Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:57.240Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:57.241Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m27s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:57.241Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m27s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:57.241Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.032445583,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:03:57.987Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:03:57.988Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:03:57.988Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:03:57.989Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:03:58.014Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:03:58.015Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m28s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:03:58.015Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m28s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:03:58.015Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.028052792,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:04:24.655Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:04:24.656Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:04:24.656Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:04:24.657Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:04:24.686Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:04:24.688Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m54s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:04:24.688Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m54s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:04:24.689Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.035871209,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:04:25.311Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:04:25.312Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:04:25.313Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiMjZiNjRlYTYtMTZmYy00NmY1LWI3ODktMjVjYjVlYmM2MDA0IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjRiNzk0NDQxLTYxYjctNDMyNi05YTc4LWQ2N2JjOWUwYzMwZiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTAzNjUwLCJleHAiOjE3MjIxMDcyNTAsImlhdCI6MTcyMjEwMzY1MCwianRpIjoiZTgzM2YxMzMtZjk3OC00YmFmLWEzNmEtMWQzOTU4ODhmMWY5IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.XW9YF1vhcUquEUqeWCpFi5NQvCgv_vU58RuebtyCcKZVp3jCEV0f_FetM0BPqNoeBLUzw2Fl9Mb6yVGWsyz5K5N1hO0BVXjVG9v4wU87UUIClckLUq6Qp6q6186vWvQtllAFqdSfrzRwWEqfnU5XXBS17qKSFbulB0ObA6JkPAyMImh1whZzGtv9vvFnpPDtZcLNia8lNkv3OTNShWPrqWfFO0cHNClJs8SBV58zT4VJ7odq-e4VeARMyUrPgNVKnvcgdm0xXMoAx0XYQ1UrqY8Uw2SG0Ab_16sFxLvPyi1v8IOu4a_U_ZmYUoUe6SU9IRkEcG-ieTTtVl4KyqCM_A"}
{"level":"info","timestamp":"2024-07-27T20:04:25.313Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:04:25.341Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-27T20:04:25.342Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"token is expired by 56m55s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:04:25.342Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"token is expired by 56m55s","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:04:25.343Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":401,"latency":0.031971834,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:08:55.717Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:08:55.719Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:08:55.719Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:08:55.720Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:08:55.807Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:08:55.809Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:08:55.809Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:08:55.809Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:08:55.810Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:08:55.810Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:08:55.811Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T20:08:55.811Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T20:08:55.861Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.04997275,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:08:55.862Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"database operation failed","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:08:55.862Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: database operation failed","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:08:55.862Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.146121792,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:12:09.870Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:12:09.897Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:12:09.898Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:12:09.898Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.914Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.915Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.917Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.918Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.920Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.920Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.922Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.922Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.924Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.924Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.926Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.927Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.928Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:12:09.929Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:12:12.743Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:12:12.743Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:12:12.744Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:12:12.744Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:12:12.867Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:12:12.867Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:12:12.868Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:12:12.868Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:12:12.868Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:12:12.869Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:12:12.869Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T20:12:12.869Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"error","timestamp":"2024-07-27T20:12:12.876Z","caller":"dao/user_dao.go:650","msg":"Failed to execute search users query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","query":"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit","params":{"limit":0,"name":"User","offset":0},"duration":0.006314625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).SearchUsers\n\t/app/dao/user_dao.go:650\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:268\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:12:12.876Z","caller":"service/user_service.go:270","msg":"Error searching users","error":"failed to execute search query: Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","criteria":{"name":"User"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).SearchUsers\n\t/app/service/user_service.go:270\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:163\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:12:12.876Z","caller":"util/http_util.go:11","msg":"Failed to search users","error":"failed to search users: failed to execute search query: Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'ORDER': expected\n  \"!=\"\n  \"%\"\n  \"*\"\n  \"+\"\n  \"-\"\n  \".\"\n  \"/\"\n  \":\"\n  \"<\"\n  \"<=\"\n  \"<>\"\n  \"=\"\n  \">\"\n  \">=\"\n  \"AND\"\n  \"CALL\"\n  \"CREATE\"\n  \"DELETE\"\n  \"DETACH\"\n  \"FOREACH\"\n  \"LOAD\"\n  \"MATCH\"\n  \"MERGE\"\n  \"OPTIONAL\"\n  \"OR\"\n  \"REMOVE\"\n  \"RETURN\"\n  \"SET\"\n  \"UNION\"\n  \"UNWIND\"\n  \"USE\"\n  \"WITH\"\n  \"XOR\"\n  \"[\"\n  \"^\"\n  <EOF> (line 1, column 44 (offset: 43))\n\"MATCH (u:USER) WHERE u.name CONTAINS $name ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit\"\n                                            ^)","path":"/api/v1/users/search","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).SearchUsers\n\t/app/controller/user_controller.go:165\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:12:12.877Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":500,"latency":0.134516291,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:13:47.652Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:13:47.666Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:13:47.667Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:13:47.667Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.690Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.690Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.694Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.694Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.696Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.697Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.699Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.699Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.702Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.702Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.704Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.704Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.706Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:13:47.707Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:14:29.556Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:14:29.571Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:14:29.572Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:14:29.572Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.601Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.601Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.604Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.605Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.606Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.607Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.609Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.609Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.611Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.611Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.612Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.612Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.614Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:14:29.615Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:14:30.926Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:14:30.927Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:14:30.927Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:14:30.928Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:14:31.041Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:14:31.042Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:14:31.042Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:31.042Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:31.043Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:31.043Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:14:31.044Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T20:14:31.044Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User"}}
{"level":"info","timestamp":"2024-07-27T20:14:31.509Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.465192626}
{"level":"info","timestamp":"2024-07-27T20:14:31.510Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:14:31.510Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.584507584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:14:39.633Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:14:39.634Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:14:39.634Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:14:39.634Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:14:39.661Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:14:39.661Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:14:39.662Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:39.662Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:39.663Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:39.663Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:14:39.664Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"name":"User One"}}
{"level":"info","timestamp":"2024-07-27T20:14:39.664Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"name":"User One"}}
{"level":"info","timestamp":"2024-07-27T20:14:39.673Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.008186417}
{"level":"info","timestamp":"2024-07-27T20:14:39.673Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:14:39.673Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.040429875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:14:45.009Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:14:45.010Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:14:45.011Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:14:45.011Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:14:45.039Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:14:45.041Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:14:45.041Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:45.041Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:45.042Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:14:45.042Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:14:45.042Z","caller":"dao/user_dao.go:468","msg":"Listing users","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-27T20:14:45.101Z","caller":"dao/user_dao.go:504","msg":"Users listed successfully","count":1,"duration":0.058568959}
{"level":"info","timestamp":"2024-07-27T20:14:45.101Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.092585667,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:15:10.681Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:15:10.683Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:15:10.683Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:15:10.683Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:15:10.712Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:15:10.713Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:15:10.714Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:10.714Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:10.715Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:10.715Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:15:10.716Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user.name"}}
{"level":"info","timestamp":"2024-07-27T20:15:10.716Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user.name"}}
{"level":"info","timestamp":"2024-07-27T20:15:10.792Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.075879084}
{"level":"info","timestamp":"2024-07-27T20:15:10.792Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:15:10.792Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.112066208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:15:18.048Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:15:18.049Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:15:18.049Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:15:18.050Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:15:18.077Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:15:18.078Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:15:18.079Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:18.079Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:18.080Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:18.080Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:15:18.080Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:18.081Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:18.089Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.008194834}
{"level":"info","timestamp":"2024-07-27T20:15:18.090Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:15:18.090Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.0435805,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:15:23.412Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:15:23.412Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:15:23.413Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:15:23.414Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:15:23.440Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:15:23.442Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:15:23.442Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:23.443Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:23.443Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:23.443Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:15:23.444Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:23.444Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:23.452Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.007634667}
{"level":"info","timestamp":"2024-07-27T20:15:23.452Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:15:23.453Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.041208917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:15:41.959Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:15:41.960Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:15:41.961Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:15:41.962Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:15:41.991Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:15:41.993Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:15:41.993Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:41.994Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:41.994Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:15:41.994Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:15:41.995Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:41.995Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:15:42.010Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.014394625}
{"level":"info","timestamp":"2024-07-27T20:15:42.010Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:15:42.010Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.051939958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:17:14.987Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:17:14.988Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:17:14.989Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:17:14.990Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:17:15.157Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:17:15.159Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:17:15.160Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:15.160Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:15.160Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:15.161Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:17:15.161Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:17:15.162Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:17:15.205Z","caller":"dao/user_dao.go:677","msg":"Users searched successfully","count":0,"duration":0.043495625}
{"level":"info","timestamp":"2024-07-27T20:17:15.206Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:17:15.206Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.219577833,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:17:36.071Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:17:36.080Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:17:36.081Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:17:36.081Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.084Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.084Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.086Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.087Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.088Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.088Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.090Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.090Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.092Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.092Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.094Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.094Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.096Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:17:36.097Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:17:37.748Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:17:37.749Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:17:37.749Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:17:37.750Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:17:37.849Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:17:37.850Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:17:37.850Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:37.850Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:37.851Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:17:37.851Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:17:37.851Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:17:37.851Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user"}}
{"level":"debug","timestamp":"2024-07-27T20:17:37.852Z","caller":"dao/user_dao.go:654","msg":"Search users query","query":"MATCH (u:USER) WHERE u.username CONTAINS $username WITH u ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit RETURN u","params":{"limit":0,"offset":0,"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:17:37.917Z","caller":"dao/user_dao.go:680","msg":"Users searched successfully","count":0,"duration":0.065943}
{"level":"info","timestamp":"2024-07-27T20:17:37.917Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:17:37.918Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.170312417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:25:40.313Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:25:40.314Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:25:40.315Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:25:40.315Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:25:40.402Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:25:40.404Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:25:40.404Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:25:40.404Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:25:40.404Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:25:40.405Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:25:40.405Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:25:40.405Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user"}}
{"level":"debug","timestamp":"2024-07-27T20:25:40.405Z","caller":"dao/user_dao.go:654","msg":"Search users query","query":"MATCH (u:USER) WHERE u.username CONTAINS $username WITH u ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit RETURN u","params":{"limit":0,"offset":0,"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:25:40.411Z","caller":"dao/user_dao.go:680","msg":"Users searched successfully","count":0,"duration":0.00555325}
{"level":"info","timestamp":"2024-07-27T20:25:40.411Z","caller":"service/user_service.go:276","msg":"Users search completed","userCount":0}
{"level":"info","timestamp":"2024-07-27T20:25:40.411Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.099338042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:26:51.004Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:26:51.035Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:26:51.036Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:26:51.036Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.046Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.046Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.048Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.048Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.049Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.050Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.051Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.051Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.053Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.053Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.055Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.055Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.056Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:26:51.057Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:26:56.063Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:26:56.067Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:26:56.068Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:26:56.068Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.071Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.071Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.073Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.073Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.074Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.074Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.076Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.076Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.077Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.077Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.078Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.079Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.080Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:26:56.080Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:26:58.347Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:26:58.348Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:26:58.349Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:26:58.349Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:26:58.470Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:26:58.471Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:26:58.472Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:26:58.472Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:26:58.472Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:26:58.473Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:26:58.474Z","caller":"service/user_service.go:266","msg":"Searching users","criteria":{"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:26:58.474Z","caller":"dao/user_dao.go:557","msg":"Searching users","criteria":{"username":"user","limit":10}}
{"level":"debug","timestamp":"2024-07-27T20:26:58.474Z","caller":"dao/user_dao.go:654","msg":"Search users query","query":"MATCH (u:USER) WHERE u.username CONTAINS $username WITH u ORDER BY u.createdAt DESC SKIP $offset LIMIT $limit RETURN u","params":{"limit":10,"offset":0,"username":"user"}}
{"level":"info","timestamp":"2024-07-27T20:26:58.484Z","caller":"dao/user_dao.go:680","msg":"Users searched successfully","count":1,"duration":0.010549}
{"level":"info","timestamp":"2024-07-27T20:26:58.485Z","caller":"service/user_service.go:284","msg":"Users search completed","userCount":1}
{"level":"info","timestamp":"2024-07-27T20:26:58.485Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/users/search","query":"","status":200,"latency":0.138417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:27:43.913Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:27:43.913Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:27:43.914Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiYjY0NjQzYjYtOGEyNS00NDRlLTk4NTQtZDE1NmFkYjkyMmM4IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjQwNmI0MDhkLTJkZWUtNDI1Yy05ZDE1LWNkZjdiZDc2ZmZiNCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEwOTI1LCJleHAiOjE3MjIxMTQ1MjUsImlhdCI6MTcyMjExMDkyNSwianRpIjoiNzJlYzllNjMtOTNlNS00MDliLWFjYTAtOWZiNjg2ZDgzMzU3IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.eTUtl_OmqjJ9k_UxUt3AEH76N14POvBHIWaXNBKMGAt0y_WfnyVSlxF9HovTMKeq9-qdyxKmp3yMpE0qRqgbE-AgqJ4rztfawKbaPIDByY_neJI8CDhNCmxsjvQ_jcEtiD36J76eyYyea-9YzIAHnN9Yz3qKscCQ8tW16wpskV5zPtI927-V4OOPjavPDmoN5pE2MsIS4HSs4YavHDE4MhTXO9ndHv-8iKdh_bSnx2y4BTz6qKLVNkjjzDQVRiggyPHUSNF7mgFuxEbqLIiY4wUWr3h-Wep29igkOGO5m2PQs8nIxvGROkanLDu-65YhwcTbImnHHKkl4Q41qZw8Uw"}
{"level":"info","timestamp":"2024-07-27T20:27:43.914Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:27:43.958Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:27:43.960Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:27:43.960Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:27:43.961Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:27:43.961Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722114525,"jti":"72ec9e63-93e5-409b-aca0-9fb686d83357","iat":1722110925,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:27:43.961Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:27:43.962Z","caller":"dao/user_dao.go:468","msg":"Listing users","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-27T20:27:43.985Z","caller":"dao/user_dao.go:504","msg":"Users listed successfully","count":1,"duration":0.023170709}
{"level":"info","timestamp":"2024-07-27T20:27:43.985Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.073418417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:27:55.981Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:27:55.982Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:27:55.982Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":""}
{"level":"warn","timestamp":"2024-07-27T20:27:55.982Z","caller":"middleware/group_auth.go:104","msg":"No Authorization token provided"}
{"level":"info","timestamp":"2024-07-27T20:27:55.983Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":401,"latency":0.003035209,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:28:06.533Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:28:06.534Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:28:06.535Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":""}
{"level":"warn","timestamp":"2024-07-27T20:28:06.535Z","caller":"middleware/group_auth.go:104","msg":"No Authorization token provided"}
{"level":"info","timestamp":"2024-07-27T20:28:06.536Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":401,"latency":0.002972458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:28:46.480Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:28:46.481Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:28:46.482Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:28:46.482Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:28:46.571Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:28:46.572Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:28:46.572Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:28:46.572Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:28:46.573Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:28:46.573Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-27T20:28:46.574Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"invalid user: user username cannot be empty","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:28:46.574Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.09543,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:30:41.636Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:30:41.637Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:30:41.638Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:30:41.638Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:30:41.722Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:30:41.724Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:30:41.724Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:30:41.725Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:30:41.725Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:30:41.725Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:30:41.726Z","caller":"dao/user_dao.go:426","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:30:41.862Z","caller":"dao/user_dao.go:454","msg":"User retrieved successfully","userID":"user-1","duration":0.135984792}
{"level":"info","timestamp":"2024-07-27T20:30:41.862Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:30:41.862Z","caller":"dao/user_dao.go:426","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:30:41.865Z","caller":"dao/user_dao.go:454","msg":"User retrieved successfully","userID":"user-1","duration":0.002327792}
{"level":"error","timestamp":"2024-07-27T20:30:42.303Z","caller":"dao/user_dao.go:340","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.441114917,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:340\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:30:42.304Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:30:42.304Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:30:42.304Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.669152042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:31:49.766Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:31:49.775Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:31:49.776Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:31:49.777Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.781Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.781Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.783Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.783Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.785Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.785Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.787Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.787Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.788Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.788Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.789Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.789Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.791Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:31:49.791Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:31:50.693Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:31:50.694Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:31:50.694Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:31:50.695Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:31:50.792Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:31:50.792Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:31:50.793Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:31:50.793Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:31:50.793Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:31:50.793Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:31:50.794Z","caller":"dao/user_dao.go:429","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:31:50.801Z","caller":"dao/user_dao.go:457","msg":"User retrieved successfully","userID":"user-1","duration":0.007369875}
{"level":"info","timestamp":"2024-07-27T20:31:50.802Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:31:50.802Z","caller":"dao/user_dao.go:429","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:31:50.805Z","caller":"dao/user_dao.go:457","msg":"User retrieved successfully","userID":"user-1","duration":0.002805208}
{"level":"debug","timestamp":"2024-07-27T20:31:50.805Z","caller":"dao/user_dao.go:321","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u += $props\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"departmentID":"dept-1","groupIds":null,"id":"user-1","organizationID":"org-1","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","name":"User One","organizationID":"org-1","updatedAt":"2024-07-27T20:31:50Z","userType":"DepartmentUser","username":"user.one"},"roleIds":null}}
{"level":"error","timestamp":"2024-07-27T20:31:50.815Z","caller":"dao/user_dao.go:343","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.013334875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:343\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:31:50.816Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:31:50.816Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:31:50.816Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.123258708,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:33:49.574Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:33:49.602Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:33:49.604Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:33:49.604Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.613Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.613Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.615Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.615Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.617Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.617Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.619Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.619Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.620Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.621Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.622Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.622Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.624Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:33:49.625Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:33:51.247Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:33:51.247Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:33:51.247Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:33:51.248Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:33:51.427Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:33:51.428Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:33:51.429Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:33:51.429Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:33:51.430Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:33:51.431Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:33:51.431Z","caller":"dao/user_dao.go:432","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:33:51.445Z","caller":"dao/user_dao.go:460","msg":"User retrieved successfully","userID":"user-1","duration":0.013516833}
{"level":"info","timestamp":"2024-07-27T20:33:51.445Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:33:51.446Z","caller":"dao/user_dao.go:432","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:33:51.452Z","caller":"dao/user_dao.go:460","msg":"User retrieved successfully","userID":"user-1","duration":0.005899667}
{"level":"debug","timestamp":"2024-07-27T20:33:51.453Z","caller":"dao/user_dao.go:324","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:33:51Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:33:51.679Z","caller":"dao/user_dao.go:346","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.233995917,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:346\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:33:51.680Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:33:51.680Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:33:51.680Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.433937584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:35:06.153Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:35:06.167Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:35:06.168Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:35:06.168Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.192Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.192Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.194Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.195Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.196Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.196Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.197Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.197Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.199Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.199Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.200Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.201Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.202Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:35:06.203Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:35:09.583Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:35:09.583Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:35:09.583Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:35:09.584Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:35:09.679Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:35:09.680Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:35:09.680Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:09.681Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:09.681Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:09.681Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:35:09.682Z","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:09.689Z","caller":"dao/user_dao.go:461","msg":"User retrieved successfully","userID":"user-1","duration":0.007164834}
{"level":"info","timestamp":"2024-07-27T20:35:09.689Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:09.690Z","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:09.693Z","caller":"dao/user_dao.go:461","msg":"User retrieved successfully","userID":"user-1","duration":0.003674583}
{"level":"debug","timestamp":"2024-07-27T20:35:09.694Z","caller":"dao/user_dao.go:325","msg":"Update user query","query":"\n        MATCH (u:USER)\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n\t\tWHERE u.id = $id\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:35:09Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:35:09.989Z","caller":"dao/user_dao.go:329","msg":"Failed to execute query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'H': expected 'i/I' (line 11, column 4 (offset: 326))\n\"\t\tWHERE u.id = $id\"\n    ^)","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:35:09Z","userType":"DepartmentUser","username":"user.one"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser.func1\n\t/app/dao/user_dao.go:329\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:265\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:09.990Z","caller":"dao/user_dao.go:347","msg":"Failed to update user","error":"database operation failed","userID":"user-1","duration":0.300519959,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:347\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:09.990Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"database operation failed","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:09.990Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: database operation failed","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:35:09.991Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.408273084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:35:13.427Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:35:13.427Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:35:13.428Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:35:13.428Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:35:13.454Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:35:13.456Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:35:13.457Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:13.458Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:13.459Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:35:13.460Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:35:13.460Z","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:13.467Z","caller":"dao/user_dao.go:461","msg":"User retrieved successfully","userID":"user-1","duration":0.006821958}
{"level":"info","timestamp":"2024-07-27T20:35:13.468Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:13.469Z","caller":"dao/user_dao.go:433","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:35:13.474Z","caller":"dao/user_dao.go:461","msg":"User retrieved successfully","userID":"user-1","duration":0.005289292}
{"level":"debug","timestamp":"2024-07-27T20:35:13.475Z","caller":"dao/user_dao.go:325","msg":"Update user query","query":"\n        MATCH (u:USER)\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n\t\tWHERE u.id = $id\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:35:13Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:35:13.485Z","caller":"dao/user_dao.go:329","msg":"Failed to execute query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input 'H': expected 'i/I' (line 11, column 4 (offset: 326))\n\"\t\tWHERE u.id = $id\"\n    ^)","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:35:13Z","userType":"DepartmentUser","username":"user.one"},"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser.func1\n\t/app/dao/user_dao.go:329\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:265\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:13.486Z","caller":"dao/user_dao.go:347","msg":"Failed to update user","error":"database operation failed","userID":"user-1","duration":0.017792583,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:347\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:13.487Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"database operation failed","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:35:13.487Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: database operation failed","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:35:13.487Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.061111083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:36:06.820Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:36:06.835Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:36:06.836Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:36:06.837Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.851Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.852Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.854Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.855Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.857Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.857Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.859Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.859Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.862Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.862Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.864Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.864Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.866Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:36:06.867Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:36:17.992Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:36:17.992Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:36:17.993Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:36:17.993Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:36:18.085Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:36:18.085Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:36:18.086Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:36:18.086Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:36:18.086Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:36:18.086Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:36:18.087Z","caller":"dao/user_dao.go:432","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:36:18.097Z","caller":"dao/user_dao.go:460","msg":"User retrieved successfully","userID":"user-1","duration":0.009873958}
{"level":"info","timestamp":"2024-07-27T20:36:18.100Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:36:18.100Z","caller":"dao/user_dao.go:432","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:36:18.103Z","caller":"dao/user_dao.go:460","msg":"User retrieved successfully","userID":"user-1","duration":0.002192333}
{"level":"debug","timestamp":"2024-07-27T20:36:18.103Z","caller":"dao/user_dao.go:324","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:36:18Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:36:18.111Z","caller":"dao/user_dao.go:346","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.011167958,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:346\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:36:18.112Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:36:18.112Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:36:18.112Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.12013475,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:38:13.136Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:38:13.150Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:38:13.151Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:38:13.151Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.172Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.172Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.174Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.174Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.175Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.176Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.177Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.177Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.179Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.179Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.180Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.180Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.182Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:38:13.182Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:38:15.135Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:38:15.136Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:38:15.136Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:38:15.137Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:38:15.263Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:38:15.263Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:38:15.264Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:38:15.264Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:38:15.265Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:38:15.265Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:38:15.265Z","caller":"dao/user_dao.go:431","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:38:15.275Z","caller":"dao/user_dao.go:459","msg":"User retrieved successfully","userID":"user-1","duration":0.009586583}
{"level":"info","timestamp":"2024-07-27T20:38:15.276Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:38:15.277Z","caller":"dao/user_dao.go:431","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:38:15.280Z","caller":"dao/user_dao.go:459","msg":"User retrieved successfully","userID":"user-1","duration":0.003547958}
{"level":"debug","timestamp":"2024-07-27T20:38:15.281Z","caller":"dao/user_dao.go:324","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:38:15Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:38:15.294Z","caller":"dao/user_dao.go:346","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.018135416,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:346\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:38:15.295Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:38:15.295Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:38:15.295Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.160774334,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:39:10.633Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:39:10.664Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:39:10.665Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:39:10.665Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.675Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.675Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.677Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.677Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.679Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.679Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.680Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.680Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.682Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.682Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.683Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.683Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.685Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:39:10.685Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:39:31.075Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:39:31.079Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:39:31.079Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:39:31.080Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.082Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.082Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.083Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.083Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.085Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.085Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.086Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.086Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.087Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.087Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.088Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.088Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.090Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:39:31.090Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:39:32.646Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:39:32.647Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:39:32.647Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:39:32.648Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:39:32.754Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:39:32.754Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:39:32.755Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:39:32.755Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:39:32.755Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:39:32.756Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:39:32.756Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:39:32.766Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.009663458}
{"level":"info","timestamp":"2024-07-27T20:39:32.766Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:39:32.767Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:39:32.769Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002904667}
{"level":"info","timestamp":"2024-07-27T20:39:32.770Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:39:32.770Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:39:32Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:39:32.782Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.015884541,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:39:32.783Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:39:32.783Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:39:32.783Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.137198542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:40:47.920Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:40:47.931Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:40:47.932Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:40:47.932Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.943Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.943Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.944Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.945Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.946Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.946Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.947Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.948Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.949Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.949Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.950Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.950Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.952Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:40:47.952Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:40:49.517Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:40:49.521Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:40:49.521Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:40:49.522Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.524Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.524Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.525Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.525Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.527Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.527Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.528Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.529Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.530Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.530Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.531Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.531Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.533Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:40:49.533Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:40:50.923Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:40:50.924Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:40:50.924Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:40:50.925Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:40:51.021Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:40:51.021Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:40:51.021Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:40:51.022Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:40:51.022Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:40:51.022Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:40:51.023Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:40:51.030Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.007578292}
{"level":"info","timestamp":"2024-07-27T20:40:51.031Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:40:51.031Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:40:51.033Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002463916}
{"level":"info","timestamp":"2024-07-27T20:40:51.034Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:40:51.034Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:40:51Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:40:51.045Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.01419,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:40:51.046Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:40:51.046Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:40:51.046Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.123367167,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:41:02.057Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:41:02.057Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:41:02.059Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:41:02.060Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:41:02.088Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:41:02.090Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:41:02.090Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:02.091Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:02.091Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:02.091Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:41:02.092Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:02.097Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.005321625}
{"level":"info","timestamp":"2024-07-27T20:41:02.097Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:02.098Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:02.100Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002759625}
{"level":"info","timestamp":"2024-07-27T20:41:02.101Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:41:02.101Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:41:02Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:41:02.106Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.00911525,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:02.107Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:02.107Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:41:02.107Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.050865042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:41:26.335Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:41:26.336Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:41:26.336Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:41:26.337Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:41:26.364Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:41:26.365Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:41:26.365Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:26.365Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:26.366Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:26.366Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:41:26.366Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:26.383Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.016529084}
{"level":"info","timestamp":"2024-07-27T20:41:26.383Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:26.384Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:26.386Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002593917}
{"level":"info","timestamp":"2024-07-27T20:41:26.386Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:41:26.387Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:41:26Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:41:26.395Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.011425875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:26.397Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:26.398Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:41:26.398Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.064159584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:41:26.999Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:41:26.999Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:41:27.000Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:41:27.000Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:41:27.028Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:41:27.029Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:41:27.029Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:27.029Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:27.030Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:41:27.030Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:41:27.030Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:27.034Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.004163708}
{"level":"info","timestamp":"2024-07-27T20:41:27.035Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:27.036Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:41:27.041Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.005257791}
{"level":"info","timestamp":"2024-07-27T20:41:27.042Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:41:27.043Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:41:27Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:41:27.051Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.015823958,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:27.051Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:41:27.051Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:41:27.052Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.052827542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:42:08.005Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:42:08.016Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:42:08.017Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:42:08.017Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.021Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.024Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.025Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.026Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.027Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.027Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.029Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.030Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.032Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.033Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.035Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.035Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.036Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:08.037Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:42:26.451Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:42:26.454Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:42:26.455Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:42:26.455Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.457Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.457Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.459Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.459Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.460Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.460Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.461Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.461Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.463Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.463Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.464Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.464Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.465Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:26.466Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:42:42.693Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:42:42.698Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:42:42.699Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:42:42.699Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.703Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.704Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.705Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.705Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.706Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.707Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.708Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.708Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.709Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.709Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.710Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.710Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.711Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:42:42.712Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:42:46.424Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:42:46.424Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:42:46.424Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:42:46.425Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:42:46.529Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:42:46.530Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:42:46.530Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:42:46.531Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:42:46.531Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:42:46.531Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:42:46.532Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:42:46.540Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.0079165}
{"level":"info","timestamp":"2024-07-27T20:42:46.540Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:42:46.540Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:42:46.543Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002802458}
{"level":"info","timestamp":"2024-07-27T20:42:46.544Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:42:46.544Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"user-1","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:42:46Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:42:46.555Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.01470575,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:42:46.555Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:42:46.556Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:42:46.556Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.132824458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:43:15.855Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:43:15.863Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:43:15.863Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:43:15.864Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.867Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.867Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.868Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.868Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.870Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.870Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.871Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.872Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.873Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.873Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.874Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.874Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.875Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:43:15.876Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:43:16.565Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:43:16.566Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:43:16.566Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:43:16.566Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:43:16.661Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:43:16.661Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:43:16.662Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:16.662Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:16.662Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:16.662Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:43:16.663Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:16.668Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.005426333}
{"level":"info","timestamp":"2024-07-27T20:43:16.669Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:16.669Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:16.671Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.001901208}
{"level":"info","timestamp":"2024-07-27T20:43:16.671Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:43:16.672Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"8","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:43:16Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:43:16.674Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.005792875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:16.675Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:16.675Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:43:16.675Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.110143291,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:43:17.574Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:43:17.575Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:43:17.576Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:43:17.576Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:43:17.602Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:43:17.604Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:43:17.604Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:17.604Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:17.605Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:17.606Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:43:17.606Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:17.623Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.017130084}
{"level":"info","timestamp":"2024-07-27T20:43:17.627Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:17.627Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:17.631Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.003419042}
{"level":"info","timestamp":"2024-07-27T20:43:17.631Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:43:17.632Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"8","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:43:17Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:43:17.666Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.038508042,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:17.666Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:17.669Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:43:17.669Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.095606125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:43:18.302Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:43:18.303Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:43:18.303Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:43:18.303Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:43:18.330Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:43:18.331Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:43:18.331Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.331Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.332Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.332Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:43:18.332Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.337Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.004378708}
{"level":"info","timestamp":"2024-07-27T20:43:18.338Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.338Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.340Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002234208}
{"level":"info","timestamp":"2024-07-27T20:43:18.341Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:43:18.341Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"8","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:43:18Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:43:18.344Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.006276375,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:18.344Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:18.345Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:43:18.345Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.043266084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:43:18.901Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:43:18.901Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:43:18.902Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:43:18.903Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:43:18.940Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:43:18.941Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:43:18.942Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.942Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.942Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:18.942Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:43:18.943Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.948Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.004963458}
{"level":"info","timestamp":"2024-07-27T20:43:18.948Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.948Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:18.951Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.002957875}
{"level":"info","timestamp":"2024-07-27T20:43:18.952Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:43:18.953Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"8","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:43:18Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:43:18.958Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.009920417,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:18.959Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:18.959Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:43:18.959Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.0589975,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:43:19.479Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:43:19.480Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:43:19.480Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:43:19.481Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:43:19.508Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:43:19.508Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:43:19.509Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:19.509Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:19.509Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:43:19.510Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:43:19.510Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:19.513Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.003409542}
{"level":"info","timestamp":"2024-07-27T20:43:19.514Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:19.514Z","caller":"dao/user_dao.go:434","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:43:19.516Z","caller":"dao/user_dao.go:462","msg":"User retrieved successfully","userID":"user-1","duration":0.001947833}
{"level":"info","timestamp":"2024-07-27T20:43:19.516Z","caller":"dao/user_dao.go:266","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:43:19.517Z","caller":"dao/user_dao.go:327","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        WITH u\n        OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n        DELETE oldRoleRel\n        WITH u\n        UNWIND $roleIds AS roleId\n        MATCH (r:ROLE {id: roleId})\n        MERGE (u)-[:HAS_ROLE]->(r)\n        WITH u\n        OPTIONAL MATCH (u)-[oldGroupRel:BELONGS_TO_GROUP]->(:GROUP)\n        DELETE oldGroupRel\n        WITH u\n        UNWIND $groupIds AS groupId\n        MATCH (g:GROUP {id: groupId})\n        MERGE (u)-[:BELONGS_TO_GROUP]->(g)\n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","groupIds":null,"id":"8","name":"User One","organizationID":"org-1","roleIds":null,"updatedAt":"2024-07-27T20:43:19Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"error","timestamp":"2024-07-27T20:43:19.519Z","caller":"dao/user_dao.go:349","msg":"Failed to update user","error":"user not found","userID":"user-1","duration":0.005154834,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:349\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:19.519Z","caller":"service/user_service.go:189","msg":"Error updating user","error":"user not found","userID":"user-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:189\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:43:19.520Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"failed to update user: user not found","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:43:19.520Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.041446208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:46:32.906Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:46:32.914Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:46:32.915Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:46:32.915Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.920Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.920Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.921Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.921Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.922Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.922Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.923Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.923Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.924Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.924Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.925Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.925Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.927Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:46:32.927Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:46:45.228Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:46:45.232Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:46:45.232Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:46:45.232Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.234Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.235Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.236Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.236Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.236Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.237Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.237Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.237Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.238Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.238Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.239Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.239Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.241Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:46:45.241Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:48:24.027Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:48:24.041Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:48:24.042Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:48:24.042Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.050Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.050Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.051Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.052Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.053Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.053Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.054Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.054Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.056Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.056Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.057Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.057Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.058Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:48:24.058Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:48:25.317Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:48:25.317Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:48:25.318Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:48:25.319Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:48:25.454Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:48:25.454Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:48:25.455Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:25.455Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:25.456Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:25.456Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:48:25.457Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:25.465Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.008458834}
{"level":"info","timestamp":"2024-07-27T20:48:25.466Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:25.466Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:25.469Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.002846084}
{"level":"info","timestamp":"2024-07-27T20:48:25.469Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T17:23:26Z"}}
{"level":"debug","timestamp":"2024-07-27T20:48:25.470Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User One","organizationID":"org-1","updatedAt":"2024-07-27T20:48:25Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:48:25.705Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.239491709}
{"level":"error","timestamp":"2024-07-27T20:48:25.709Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:48:25.709Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:25.709Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:48:25.710Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.392964958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:48:25.709Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T17:23:26.000Z","newUpdatedAt":"2024-07-27T20:48:25.000Z"}
{"level":"info","timestamp":"2024-07-27T20:48:25.710Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T20:48:33.524Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:48:33.525Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:48:33.525Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:48:33.525Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:48:33.552Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:48:33.553Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:48:33.554Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:33.554Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:33.554Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:33.554Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:48:33.555Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:33.560Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.004816083}
{"level":"info","timestamp":"2024-07-27T20:48:33.560Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:33.561Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:33.565Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.004377792}
{"level":"info","timestamp":"2024-07-27T20:48:33.566Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:48:25Z"}}
{"level":"debug","timestamp":"2024-07-27T20:48:33.567Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User One","organizationID":"org-1","updatedAt":"2024-07-27T20:48:33Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:48:33.576Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.016176542}
{"level":"error","timestamp":"2024-07-27T20:48:33.578Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:48:33.579Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:33.579Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:48:33.580Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.0558805,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:48:33.579Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:48:25.000Z","newUpdatedAt":"2024-07-27T20:48:33.000Z"}
{"level":"info","timestamp":"2024-07-27T20:48:33.580Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T20:48:39.223Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:48:39.224Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:48:39.224Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:48:39.225Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:48:39.252Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:48:39.254Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:48:39.254Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:39.255Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:39.255Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:39.256Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:48:39.257Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:39.265Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.00845}
{"level":"info","timestamp":"2024-07-27T20:48:39.266Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:39.266Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:39.270Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.004256875}
{"level":"info","timestamp":"2024-07-27T20:48:39.271Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:48:33Z"}}
{"level":"debug","timestamp":"2024-07-27T20:48:39.272Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User One","organizationID":"org-1","updatedAt":"2024-07-27T20:48:39Z","userType":"DepartmentUser","username":"user.two"}}
{"level":"info","timestamp":"2024-07-27T20:48:39.282Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.016719625}
{"level":"error","timestamp":"2024-07-27T20:48:39.284Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:48:39.284Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:39.285Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:48:39.285Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:48:33.000Z","newUpdatedAt":"2024-07-27T20:48:39.000Z"}
{"level":"info","timestamp":"2024-07-27T20:48:39.285Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.two"}
{"level":"info","timestamp":"2024-07-27T20:48:39.285Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.061803375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-27T20:48:47.589Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:48:47.590Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:48:47.590Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:48:47.591Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:48:47.618Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:48:47.620Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:48:47.621Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:47.621Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:47.621Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:48:47.622Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:48:47.622Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:47.628Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.005367708}
{"level":"info","timestamp":"2024-07-27T20:48:47.628Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:47.629Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:47.633Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.00438625}
{"level":"info","timestamp":"2024-07-27T20:48:47.634Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.two","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:48:39Z"}}
{"level":"debug","timestamp":"2024-07-27T20:48:47.635Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User One","organizationID":"org-1","updatedAt":"2024-07-27T20:48:47Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:48:47.644Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.015243167}
{"level":"error","timestamp":"2024-07-27T20:48:47.646Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:48:47.647Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:48:47.647Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:48:47.647Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.058209208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:48:47.647Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:48:39.000Z","newUpdatedAt":"2024-07-27T20:48:47.000Z"}
{"level":"info","timestamp":"2024-07-27T20:48:47.648Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-27T20:51:16.746Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:51:16.759Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:51:16.760Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:51:16.761Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.770Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.770Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.771Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.771Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.773Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.773Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.774Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.775Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.776Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.777Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.778Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.778Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.779Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:51:16.780Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:53:08.390Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:53:08.398Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:53:08.399Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:53:08.399Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.404Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.404Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.406Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.406Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.407Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.407Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.408Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.408Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.409Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.410Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.411Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.411Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.412Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:53:08.413Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:53:38.917Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:53:38.918Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:53:38.918Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:53:38.919Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:53:39.099Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:53:39.100Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:53:39.101Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:39.101Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:39.102Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:39.102Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:53:39.103Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:39.113Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.010310584}
{"level":"info","timestamp":"2024-07-27T20:53:39.114Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:39.114Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:39.118Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.003898625}
{"level":"info","timestamp":"2024-07-27T20:53:39.118Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:48:47Z"}}
{"level":"debug","timestamp":"2024-07-27T20:53:39.119Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Two","organizationID":"org-1","updatedAt":"2024-07-27T20:53:39Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:53:39.141Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.02728925}
{"level":"error","timestamp":"2024-07-27T20:53:39.142Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:53:39.143Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:39.143Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:53:39.143Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.226231959,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:53:39.143Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:48:47.000Z","newUpdatedAt":"2024-07-27T20:53:39.000Z"}
{"level":"info","timestamp":"2024-07-27T20:53:39.143Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T20:53:54.835Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:53:54.836Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:53:54.837Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:53:54.837Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:53:54.865Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:53:54.867Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:53:54.867Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:54.868Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:54.868Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:53:54.868Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:53:54.869Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:54.879Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.010520208}
{"level":"info","timestamp":"2024-07-27T20:53:54.881Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:54.882Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:54.885Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.002668958}
{"level":"info","timestamp":"2024-07-27T20:53:54.885Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:53:39Z"}}
{"level":"debug","timestamp":"2024-07-27T20:53:54.886Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Two","organizationID":"org-1","updatedAt":"2024-07-27T20:53:54Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:53:54.897Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.016074917}
{"level":"error","timestamp":"2024-07-27T20:53:54.899Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:53:54.899Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:53:54.900Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:53:54.900Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.066044084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:53:54.900Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:53:39.000Z","newUpdatedAt":"2024-07-27T20:53:54.000Z"}
{"level":"info","timestamp":"2024-07-27T20:53:54.901Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T20:54:08.511Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:54:08.512Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:54:08.512Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:54:08.512Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:54:08.539Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:54:08.540Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:54:08.540Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:54:08.540Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:54:08.540Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:54:08.541Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:54:08.541Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:54:08.544Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.003477625}
{"level":"info","timestamp":"2024-07-27T20:54:08.545Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:54:08.545Z","caller":"dao/user_dao.go:455","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:54:08.547Z","caller":"dao/user_dao.go:483","msg":"User retrieved successfully","userID":"user-1","duration":0.002105042}
{"level":"info","timestamp":"2024-07-27T20:54:08.547Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:53:54Z"}}
{"level":"debug","timestamp":"2024-07-27T20:54:08.548Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","updatedAt":"2024-07-27T20:54:08Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:54:08.554Z","caller":"dao/user_dao.go:376","msg":"User updated successfully","userID":"user-1","duration":0.009703958}
{"level":"error","timestamp":"2024-07-27T20:54:08.556Z","caller":"dao/user_dao.go:390","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:390\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:54:08.556Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:54:08.556Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:54:08.556Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.045211167,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:54:08.556Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:53:54.000Z","newUpdatedAt":"2024-07-27T20:54:08.000Z"}
{"level":"info","timestamp":"2024-07-27T20:54:08.557Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-27T20:54:33.564Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:54:33.575Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:54:33.577Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:54:33.577Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.582Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.582Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.584Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.586Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.588Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.588Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.589Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.589Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.591Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.591Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.592Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.592Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.593Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:54:33.594Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:54:38.979Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:54:38.982Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:54:38.983Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:54:38.983Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.985Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.985Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.986Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.986Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.987Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.987Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.988Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.988Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.989Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.989Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.990Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.990Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.992Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:54:38.993Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:55:30.969Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:55:30.981Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:55:30.982Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:55:30.983Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.003Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.004Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.010Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.010Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.012Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.012Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.013Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.014Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.015Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.015Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.017Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.017Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.018Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:55:31.019Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:56:12.917Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:56:12.921Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:56:12.922Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:56:12.922Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.924Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.924Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.925Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.925Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.926Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.926Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.927Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.927Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.928Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.928Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.929Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.929Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.930Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:56:12.930Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:56:29.755Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:56:29.767Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:56:29.768Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:56:29.769Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.776Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.776Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.777Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.777Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.779Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.779Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.780Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.780Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.781Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.781Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.782Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.782Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.783Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:56:29.784Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:56:31.050Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:56:31.050Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:56:31.050Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:56:31.051Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:56:31.136Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:56:31.137Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:56:31.137Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:56:31.137Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:56:31.137Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:56:31.137Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:56:31.138Z","caller":"dao/user_dao.go:460","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:56:31.143Z","caller":"dao/user_dao.go:488","msg":"User retrieved successfully","userID":"user-1","duration":0.005727417}
{"level":"info","timestamp":"2024-07-27T20:56:31.143Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:56:31.144Z","caller":"dao/user_dao.go:460","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:56:31.145Z","caller":"dao/user_dao.go:488","msg":"User retrieved successfully","userID":"user-1","duration":0.001531667}
{"level":"info","timestamp":"2024-07-27T20:56:31.145Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:54:08Z"}}
{"level":"debug","timestamp":"2024-07-27T20:56:31.146Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","updatedAt":"2024-07-27T20:56:31Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:56:31.153Z","caller":"dao/user_dao.go:460","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:56:31.157Z","caller":"dao/user_dao.go:488","msg":"User retrieved successfully","userID":"user-1","duration":0.003601833}
{"level":"info","timestamp":"2024-07-27T20:56:31.162Z","caller":"dao/user_dao.go:381","msg":"User updated successfully","userID":"user-1","duration":0.018427417}
{"level":"error","timestamp":"2024-07-27T20:56:31.163Z","caller":"dao/user_dao.go:395","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:395\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:56:31.163Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:56:31.163Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:56:31.163Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.113864333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:56:31.164Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:54:08.000Z","newUpdatedAt":"2024-07-27T20:56:31.000Z"}
{"level":"info","timestamp":"2024-07-27T20:56:31.164Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-27T20:57:01.750Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:57:01.763Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:57:01.764Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:57:01.764Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.792Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.792Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.794Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.794Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.795Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.795Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.796Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.796Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.797Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.797Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.798Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.798Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.800Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:01.801Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:57:10.187Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:57:10.187Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:57:10.187Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:57:10.188Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:57:10.294Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:57:10.294Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:57:10.295Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:10.295Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:10.295Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:10.296Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:57:10.296Z","caller":"dao/user_dao.go:459","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:10.305Z","caller":"dao/user_dao.go:487","msg":"User retrieved successfully","userID":"user-1","duration":0.008405625}
{"level":"info","timestamp":"2024-07-27T20:57:10.306Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:10.306Z","caller":"dao/user_dao.go:459","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:10.308Z","caller":"dao/user_dao.go:487","msg":"User retrieved successfully","userID":"user-1","duration":0.001991333}
{"level":"info","timestamp":"2024-07-27T20:57:10.308Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:56:31Z"}}
{"level":"debug","timestamp":"2024-07-27T20:57:10.309Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","updatedAt":"2024-07-27T20:57:10Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:57:10.317Z","caller":"dao/user_dao.go:459","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:10.321Z","caller":"dao/user_dao.go:487","msg":"User retrieved successfully","userID":"user-1","duration":0.003408667}
{"level":"info","timestamp":"2024-07-27T20:57:10.327Z","caller":"dao/user_dao.go:380","msg":"User updated successfully","userID":"user-1","duration":0.020570042}
{"level":"error","timestamp":"2024-07-27T20:57:10.329Z","caller":"dao/user_dao.go:394","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:394\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:57:10.329Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:10.329Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:57:10.329Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.142849083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:57:10.329Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:56:31.000Z","newUpdatedAt":"2024-07-27T20:56:31.000Z"}
{"level":"info","timestamp":"2024-07-27T20:57:10.330Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-27T20:57:24.984Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:57:24.987Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:57:24.988Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:57:24.988Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.990Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.990Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.991Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.991Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.992Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.992Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.993Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.993Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.994Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.994Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.995Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.995Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.996Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:24.997Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-27T20:57:33.794Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T20:57:33.816Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T20:57:33.817Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T20:57:33.817Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.825Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.826Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.827Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.827Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.828Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.829Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.830Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.830Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.831Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.831Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.832Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.832Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.833Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T20:57:33.834Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T20:57:34.219Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:57:34.219Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:57:34.219Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:57:34.220Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:57:34.326Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:57:34.327Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:57:34.327Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:34.328Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:34.328Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:57:34.328Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:57:34.329Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:34.337Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.007584125}
{"level":"info","timestamp":"2024-07-27T20:57:34.337Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:34.337Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:34.340Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.002864042}
{"level":"info","timestamp":"2024-07-27T20:57:34.340Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"User Three","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:57:10Z"}}
{"level":"debug","timestamp":"2024-07-27T20:57:34.341Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","updatedAt":"2024-07-27T20:57:34Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-27T20:57:34.355Z","caller":"dao/user_dao.go:377","msg":"User updated successfully","userID":"user-1","duration":0.017962751}
{"level":"error","timestamp":"2024-07-27T20:57:34.356Z","caller":"dao/user_dao.go:391","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:391\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T20:57:34.357Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-27T20:57:34.357Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-27T20:57:34.357Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.139008959,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T20:57:34.357Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:57:10.000Z","newUpdatedAt":"2024-07-27T20:57:34.000Z"}
{"level":"info","timestamp":"2024-07-27T20:57:34.358Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-27T20:59:51.503Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T20:59:51.505Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T20:59:51.505Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T20:59:51.506Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T20:59:51.604Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T20:59:51.606Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T20:59:51.607Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:59:51.607Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:59:51.608Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T20:59:51.608Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T20:59:51.609Z","caller":"dao/role_dao.go:61","msg":"Creating new role","roleName":"readOnlyRole"}
{"level":"error","timestamp":"2024-07-27T20:59:51.757Z","caller":"dao/role_dao.go:110","msg":"Failed to create role","error":"database operation failed","roleName":"readOnlyRole","duration":0.1483455,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:110\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:59:51.758Z","caller":"service/role_service.go:142","msg":"Error creating role","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:142\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T20:59:51.758Z","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/roles","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T20:59:51.758Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/roles","query":"","status":500,"latency":0.256143875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T21:00:45.265Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T21:00:45.299Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T21:00:45.303Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T21:00:45.303Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.312Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.312Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.313Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.313Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.316Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.316Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.318Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.318Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.319Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.319Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.320Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.320Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.321Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:00:45.322Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T21:00:45.556Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T21:00:45.556Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T21:00:45.556Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T21:00:45.557Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T21:00:45.644Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T21:00:45.644Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T21:00:45.644Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:00:45.645Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:00:45.645Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:00:45.645Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T21:00:45.645Z","caller":"dao/role_dao.go:61","msg":"Creating new role","roleName":"readOnlyRole"}
{"level":"error","timestamp":"2024-07-27T21:00:45.700Z","caller":"dao/role_dao.go:98","msg":"Failed to execute create role query","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): organizationID, departmentID)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole.func1\n\t/app/dao/role_dao.go:98\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:69\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:00:45.702Z","caller":"dao/role_dao.go:111","msg":"Failed to create role","error":"database operation failed","roleName":"readOnlyRole","duration":0.056744667,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:111\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:00:45.702Z","caller":"service/role_service.go:142","msg":"Error creating role","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:142\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:00:45.703Z","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/roles","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T21:00:45.703Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/roles","query":"","status":500,"latency":0.147602917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T21:01:14.116Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T21:01:14.147Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T21:01:14.148Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T21:01:14.148Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.158Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.158Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.160Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.160Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.161Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.161Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.162Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.163Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.164Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.164Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.165Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.166Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.167Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:01:14.168Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T21:01:14.459Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T21:01:14.459Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T21:01:14.459Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T21:01:14.460Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T21:01:14.564Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T21:01:14.565Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T21:01:14.565Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:01:14.565Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:01:14.566Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:01:14.566Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T21:01:14.566Z","caller":"dao/role_dao.go:61","msg":"Creating new role","roleName":"readOnlyRole"}
{"level":"debug","timestamp":"2024-07-27T21:01:14.568Z","caller":"dao/role_dao.go:97","msg":"Create role query","query":"\n\t\t\tMERGE (r:ROLE {id: $id})\n\t\t\tON CREATE SET r += $props\n\t\t\tWITH r\n\t\t\tMATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tMERGE (r)-[:PART_OF]->(o)\n\t\t\tWITH r\n\t\t\tOPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\tFOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n\t\t\t\tMERGE (r)-[:PART_OF]->(d)\n\t\t\t)\n\t\t\tRETURN r.id as id\n\t\t","params":{"id":"role-1","props":{"createdAt":"2024-07-27T21:01:14Z","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-27T21:01:14Z"}}}
{"level":"error","timestamp":"2024-07-27T21:01:14.665Z","caller":"dao/role_dao.go:103","msg":"Failed to execute create role query","error":"Neo4jError: Neo.ClientError.Statement.ParameterMissing (Expected parameter(s): organizationID, departmentID)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole.func1\n\t/app/dao/role_dao.go:103\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:69\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:01:14.666Z","caller":"dao/role_dao.go:116","msg":"Failed to create role","error":"database operation failed","roleName":"readOnlyRole","duration":0.099441,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:116\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:01:14.666Z","caller":"service/role_service.go:142","msg":"Error creating role","error":"database operation failed","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:142\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-27T21:01:14.666Z","caller":"util/http_util.go:11","msg":"Database operation failed","error":"database operation failed","path":"/api/v1/roles","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:59\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-27T21:01:14.666Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/roles","query":"","status":500,"latency":0.208030334,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T21:04:02.566Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-27T21:04:02.578Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-27T21:04:02.579Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-27T21:04:02.580Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.587Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.588Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.589Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.589Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.590Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.590Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.592Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.592Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.593Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.593Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.594Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.594Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.595Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-27T21:04:02.596Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-27T21:04:03.418Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T21:04:03.419Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T21:04:03.420Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T21:04:03.420Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T21:04:03.529Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T21:04:03.530Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T21:04:03.530Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:03.530Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:03.531Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:03.531Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T21:04:03.532Z","caller":"dao/role_dao.go:61","msg":"Creating new role","roleName":"readOnlyRole"}
{"level":"debug","timestamp":"2024-07-27T21:04:03.533Z","caller":"dao/role_dao.go:119","msg":"Create role query","query":"\n\t\t\tMERGE (r:ROLE {id: $id})\n\t\t\tON CREATE SET \n\t\t\t\tr.name = $name,\n\t\t\t\tr.description = $description,\n\t\t\t\tr.organizationID = $organizationID,\n\t\t\t\tr.createdAt = $createdAt,\n\t\t\t\tr.updatedAt = $updatedAt\n\t\t\n\t\t\t\tSET r.departmentID = $departmentID\n\t\t\t\n\t\t\tWITH r\n\t\t\tMATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tMERGE (r)-[:PART_OF]->(o)\n\t\t\n\t\t\t\tWITH r\n\t\t\t\tMATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\t\tMERGE (r)-[:PART_OF]->(d)\n\t\t\t\n\t\t\tRETURN r.id as id\n\t\t","params":{"createdAt":"2024-07-27T21:04:03Z","departmentID":"dept-1","description":"Only provides readonly access","id":"role-1","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-27T21:04:03Z"}}
{"level":"info","timestamp":"2024-07-27T21:04:03.658Z","caller":"dao/role_dao.go:146","msg":"Role created successfully","roleID":"role-1","duration":0.126513541}
{"level":"error","timestamp":"2024-07-27T21:04:03.661Z","caller":"dao/role_dao.go:160","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:160\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-27T21:04:03.661Z","caller":"db/redis.go:314","msg":"Role cached successfully","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-27T21:04:03.662Z","caller":"service/role_service.go:156","msg":"Role created successfully","roleID":"role-1","creatorID":""}
{"level":"info","timestamp":"2024-07-27T21:04:03.662Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/roles","query":"","status":201,"latency":0.243829417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-27T21:04:03.662Z","caller":"service/role_service.go:60","msg":"Role created event received","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-27T21:04:03.662Z","caller":"util/notification_service.go:105","msg":"Notifying role change","changeType":"created","roleID":"role-1","roleName":"readOnlyRole"}
{"level":"debug","timestamp":"2024-07-27T21:04:12.400Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-27T21:04:12.401Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-27T21:04:12.401Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiNTVhMjY2M2MtYWNiNy00ZjcwLTk1MTUtYTVhOWNkNTdkY2M5IiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImQ1ZWQ0YTk3LTRiZmEtNGZiZi1hNmVlLTZlOThlNDYwMzM0OCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTEyMDc5LCJleHAiOjE3MjIxMTU2NzgsImlhdCI6MTcyMjExMjA3OSwianRpIjoiMTFkZDNjYzYtZTQ5MC00ZmI4LWE5MDYtOGVkNzNjMjhiMjVlIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.UqwpWvlKGCsv0bXxDs40tdqd1JhYSxcWKcD9f7tysZ6OsGkgwn4Qjtzx0_omkUKgth-cr_P2448zLnqeR3RFK4Lgt215bj7OoHejcz3sa6rFm20SNF9LytjwS6gnwnuh7iPfaGlw6QybrUudQEpxfSRoErghvBB0mygKvcOx2HRLRzrR89wjVc7EL3qaACN-1Iikit5tDGQBlGidDFV1E7RI3Mdn0Q9b68adVyafk1ZnNQ2EUGYLqnrTJh0b0R8U39vDUFevuqwq71EXQZmyqKidYrmNgGQSB3YVzwNwaFgSeMfVt3Kf7vDLVpuk9qW4liOmOVRJfsO0wBMRaMKJCg"}
{"level":"info","timestamp":"2024-07-27T21:04:12.402Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-27T21:04:12.431Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-27T21:04:12.431Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-27T21:04:12.432Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:12.432Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:12.432Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722115678,"jti":"11dd3cc6-e490-4fb8-a906-8ed73c28b25e","iat":1722112079,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-27T21:04:12.433Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-27T21:04:12.433Z","caller":"dao/role_dao.go:360","msg":"Listing roles","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-27T21:04:12.455Z","caller":"dao/role_dao.go:396","msg":"Roles listed successfully","count":1,"duration":0.021835333}
{"level":"info","timestamp":"2024-07-27T21:04:12.455Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/roles","query":"","status":200,"latency":0.05535325,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:22:47.355Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:22:47.451Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:22:47.460Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:22:47.460Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.305Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.305Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.345Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.350Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.372Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.372Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.406Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.407Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.421Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.423Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.446Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.446Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.458Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:22:48.461Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:22:50.295Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:22:50.295Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:22:50.295Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:22:50.296Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:22:50.411Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:22:50.411Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:22:50.412Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:22:50.412Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:22:50.412Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:22:50.412Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:22:50.412Z","caller":"dao/role_dao.go:360","msg":"Listing roles","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T09:22:50.673Z","caller":"dao/role_dao.go:396","msg":"Roles listed successfully","count":1,"duration":0.261412084}
{"level":"info","timestamp":"2024-07-28T09:22:50.674Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/roles","query":"","status":200,"latency":0.379231458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:23:46.057Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:23:46.058Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:23:46.059Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:23:46.059Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:23:46.087Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:23:46.089Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:23:46.089Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:23:46.089Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:23:46.090Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:23:46.090Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:23:46.093Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:23:46.218Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.125006833}
{"level":"info","timestamp":"2024-07-28T09:23:46.218Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:23:46.218Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:23:46.222Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.00360575}
{"level":"info","timestamp":"2024-07-28T09:23:46.222Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"User Three","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-27T20:57:34Z"}}
{"level":"debug","timestamp":"2024-07-28T09:23:46.223Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n                WITH u\n                OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n                DELETE oldRoleRel\n                WITH u\n                UNWIND $roleIds AS roleId\n                MATCH (r:ROLE {id: roleId})\n                MERGE (u)-[:HAS_ROLE]->(r)\n            \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","roleIds":["role-1"],"updatedAt":"2024-07-28T09:23:46Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:23:46.795Z","caller":"dao/user_dao.go:377","msg":"User updated successfully","userID":"user-1","duration":0.576403001}
{"level":"error","timestamp":"2024-07-28T09:23:46.796Z","caller":"dao/user_dao.go:391","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:391\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:23:46.797Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:23:46.797Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-28T09:23:46.797Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.74081375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:23:46.797Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-27T20:57:34.000Z","newUpdatedAt":"2024-07-28T09:23:46.000Z"}
{"level":"info","timestamp":"2024-07-28T09:23:46.797Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-28T09:24:52.949Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:24:52.958Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:24:52.958Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:24:52.959Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.965Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.968Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.971Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.973Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.975Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.975Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.978Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.978Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.981Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.981Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.985Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.985Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.988Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:24:52.988Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:25:03.095Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:25:03.100Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:25:03.100Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:25:03.101Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.104Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.105Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.107Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.107Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.110Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.110Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.112Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.112Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.114Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.114Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.116Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.116Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.118Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:25:03.118Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:25:04.083Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:25:04.084Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:25:04.084Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:25:04.085Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:25:04.178Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:25:04.178Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:25:04.179Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:04.179Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:04.179Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:04.179Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:25:04.180Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:04.191Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.011232042}
{"level":"info","timestamp":"2024-07-28T09:25:04.191Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:04.191Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:04.194Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.002923333}
{"level":"info","timestamp":"2024-07-28T09:25:04.195Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"User Three","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-28T09:23:46Z"}}
{"level":"debug","timestamp":"2024-07-28T09:25:04.195Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n                WITH u\n                OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n                DELETE oldRoleRel\n                WITH u\n                UNWIND $roleIds AS roleId\n                MATCH (r:ROLE {id: roleId})\n                MERGE (u)-[:HAS_ROLE]->(r)\n            \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","roleIds":["role-1"],"updatedAt":"2024-07-28T09:25:04Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:25:04.211Z","caller":"dao/user_dao.go:377","msg":"User updated successfully","userID":"user-1","duration":0.019771958}
{"level":"error","timestamp":"2024-07-28T09:25:04.212Z","caller":"dao/user_dao.go:391","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:391\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:25:04.212Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:04.212Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-28T09:25:04.213Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.129591084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:25:04.212Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-28T09:23:46.000Z","newUpdatedAt":"2024-07-28T09:25:04.000Z"}
{"level":"info","timestamp":"2024-07-28T09:25:04.213Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"info","timestamp":"2024-07-28T09:25:35.889Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:25:35.896Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:25:35.896Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:25:35.897Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.900Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.901Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.903Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.903Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.905Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.905Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.908Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.908Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.910Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.910Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.912Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.912Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.914Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:25:35.914Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:25:37.512Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:25:37.512Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:25:37.513Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:25:37.514Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:25:37.619Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:25:37.620Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:25:37.621Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.621Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.622Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.622Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:25:37.623Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"debug","timestamp":"2024-07-28T09:25:37.631Z","caller":"dao/user_dao.go:546","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:04Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.631Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.008637167}
{"level":"info","timestamp":"2024-07-28T09:25:37.632Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:37.632Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"debug","timestamp":"2024-07-28T09:25:37.636Z","caller":"dao/user_dao.go:546","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:04Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.636Z","caller":"dao/user_dao.go:484","msg":"User retrieved successfully","userID":"user-1","duration":0.003970375}
{"level":"info","timestamp":"2024-07-28T09:25:37.636Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"User Three","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-28T09:25:04Z"}}
{"level":"debug","timestamp":"2024-07-28T09:25:37.637Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n                WITH u\n                OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n                DELETE oldRoleRel\n                WITH u\n                UNWIND $roleIds AS roleId\n                MATCH (r:ROLE {id: roleId})\n                MERGE (u)-[:HAS_ROLE]->(r)\n            \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","roleIds":["role-1"],"updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"debug","timestamp":"2024-07-28T09:25:37.648Z","caller":"dao/user_dao.go:546","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:25:37.653Z","caller":"dao/user_dao.go:377","msg":"User updated successfully","userID":"user-1","duration":0.020832916}
{"level":"error","timestamp":"2024-07-28T09:25:37.654Z","caller":"dao/user_dao.go:391","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*UserDAO).UpdateUser\n\t/app/dao/user_dao.go:391\ngithub.com/dev-mohitbeniwal/echo/api/service.(*UserService).UpdateUser\n\t/app/service/user_service.go:187\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:25:37.654Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:25:37.654Z","caller":"service/user_service.go:204","msg":"User updated successfully","userID":"user-1","updaterID":""}
{"level":"info","timestamp":"2024-07-28T09:25:37.654Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.142901792,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:25:37.654Z","caller":"service/user_service.go:80","msg":"User updated event received","userID":"user-1","oldUpdatedAt":"2024-07-28T09:25:04.000Z","newUpdatedAt":"2024-07-28T09:25:37.000Z"}
{"level":"info","timestamp":"2024-07-28T09:25:37.655Z","caller":"util/notification_service.go:96","msg":"Notifying user change","changeType":"updated","userID":"user-1","userName":"user.one"}
{"level":"debug","timestamp":"2024-07-28T09:26:32.433Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:26:32.433Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:26:32.434Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:26:32.434Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:26:32.463Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:26:32.465Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:26:32.465Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:26:32.466Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:26:32.466Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:26:32.466Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:26:32.467Z","caller":"dao/user_dao.go:498","msg":"Listing users","limit":10,"offset":0}
{"level":"debug","timestamp":"2024-07-28T09:26:32.537Z","caller":"dao/user_dao.go:546","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:26:32.537Z","caller":"dao/user_dao.go:534","msg":"Users listed successfully","count":1,"duration":0.070443458}
{"level":"info","timestamp":"2024-07-28T09:26:32.537Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.105769333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:28:44.502Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:28:44.515Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:28:44.516Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:28:44.517Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.541Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.541Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.543Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.543Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.546Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.546Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.547Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.547Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.549Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.549Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.551Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.551Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.553Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.554Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:28:44.709Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:28:44.713Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:28:44.714Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:28:44.714Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.716Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.717Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.719Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.720Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.722Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.722Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.724Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.724Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.727Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.727Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.728Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.728Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.730Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:28:44.731Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:28:50.159Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:28:50.159Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:28:50.160Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:28:50.161Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:28:50.263Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:28:50.263Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:28:50.264Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:28:50.264Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:28:50.264Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:28:50.264Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:28:50.265Z","caller":"dao/user_dao.go:466","msg":"Retrieving user","userID":"user-1"}
{"level":"debug","timestamp":"2024-07-28T09:28:50.275Z","caller":"dao/user_dao.go:556","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:28:50.275Z","caller":"dao/user_dao.go:494","msg":"User retrieved successfully","userID":"user-1","duration":0.010163583}
{"level":"info","timestamp":"2024-07-28T09:28:50.276Z","caller":"dao/user_dao.go:254","msg":"Updating user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:28:50.276Z","caller":"dao/user_dao.go:466","msg":"Retrieving user","userID":"user-1"}
{"level":"debug","timestamp":"2024-07-28T09:28:50.279Z","caller":"dao/user_dao.go:556","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:28:50.279Z","caller":"dao/user_dao.go:494","msg":"User retrieved successfully","userID":"user-1","duration":0.003332042}
{"level":"info","timestamp":"2024-07-28T09:28:50.279Z","caller":"dao/user_dao.go:265","msg":"Old user","oldUser":{"identity":"8","id":"user-1","name":"User Three","username":"user.one","email":"user.one@example.com","user_type":"DepartmentUser","organization_id":"org-1","department_id":"dept-1","attributes":{"location":"Remote","title":"Engineer"},"status":"","created_at":"2024-07-27T17:23:26Z","updated_at":"2024-07-28T09:25:37Z"}}
{"level":"debug","timestamp":"2024-07-28T09:28:50.280Z","caller":"dao/user_dao.go:347","msg":"Update user query","query":"\n        MATCH (u:USER {id: $id})\n        SET u.name = $name,\n            u.username = $username,\n            u.email = $email,\n            u.userType = $userType,\n            u.organizationID = $organizationID,\n            u.departmentID = $departmentID,\n            u.attributes = $attributes,\n            u.updatedAt = $updatedAt\n        WITH u\n        OPTIONAL MATCH (u)-[oldOrgRel:WORKS_FOR]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH u\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (u)-[:WORKS_FOR]->(o)\n        WITH u\n        OPTIONAL MATCH (u)-[oldDeptRel:MEMBER_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH u\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (u)-[:MEMBER_OF]->(d)\n        )\n        \n                WITH u\n                OPTIONAL MATCH (u)-[oldRoleRel:HAS_ROLE]->(:ROLE)\n                DELETE oldRoleRel\n                WITH u\n                UNWIND $roleIds AS roleId\n                MATCH (r:ROLE {id: roleId})\n                MERGE (u)-[:HAS_ROLE]->(r)\n            \n        RETURN u\n        ","params":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","roleIds":["role-1"],"updatedAt":"2024-07-28T09:28:50Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:29:58.267Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:29:58.275Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:29:58.276Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:29:58.276Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.281Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.281Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.283Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.283Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.285Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.285Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.287Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.287Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.290Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.290Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.292Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.292Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.294Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:29:58.295Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:32:24.762Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:32:24.773Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:32:24.774Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:32:24.775Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.783Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.783Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.785Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.785Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.787Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.787Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.789Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.789Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.790Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.790Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.792Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.792Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.794Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:32:24.796Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:32:29.039Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:32:29.040Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:32:29.040Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:32:29.041Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:32:29.144Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:32:29.145Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:32:29.145Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:29.145Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:29.146Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:29.146Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:32:29.146Z","caller":"dao/user_dao.go:507","msg":"Listing users","limit":10,"offset":0}
{"level":"debug","timestamp":"2024-07-28T09:32:29.155Z","caller":"dao/user_dao.go:555","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:32:29.155Z","caller":"dao/user_dao.go:543","msg":"Users listed successfully","count":1,"duration":0.008883416}
{"level":"info","timestamp":"2024-07-28T09:32:29.156Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users","query":"","status":200,"latency":0.116884084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:32:43.025Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:32:43.026Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:32:43.027Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:32:43.027Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:32:43.054Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:32:43.055Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:32:43.055Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:43.056Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:43.056Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:32:43.056Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:32:43.057Z","caller":"db/redis.go:297","msg":"User retrieved from cache","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:32:43.057Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.032355417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:33:04.256Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:33:04.260Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:33:04.261Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:33:04.261Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.264Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.264Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.266Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.266Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.268Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.268Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.269Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.269Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.271Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.271Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.272Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.272Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.273Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:33:04.274Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:33:09.510Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:33:09.514Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:33:09.515Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:33:09.515Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.517Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.517Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.519Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.519Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.521Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.521Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.523Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.523Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.525Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.525Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.526Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.526Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.527Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:33:09.528Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:33:11.050Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:33:11.051Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:33:11.051Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:33:11.051Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:33:11.147Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:33:11.147Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:33:11.147Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:33:11.147Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:33:11.147Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:33:11.148Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:33:11.148Z","caller":"db/redis.go:297","msg":"User retrieved from cache","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:33:11.148Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.097681542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:34:08.677Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:34:08.693Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:34:08.694Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:34:08.695Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.712Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.712Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.715Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.715Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.717Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.717Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.720Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.720Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.723Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.723Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.725Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.725Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.727Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:34:08.727Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:34:10.424Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:34:10.425Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:34:10.425Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:34:10.426Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:34:10.529Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:34:10.529Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:34:10.530Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:10.530Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:10.531Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:10.531Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:34:10.531Z","caller":"db/redis.go:297","msg":"User retrieved from cache","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:34:10.532Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.107872584,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:34:33.150Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:34:33.150Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:34:33.151Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:34:33.152Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:34:33.185Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:34:33.187Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:34:33.187Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:33.187Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:33.188Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:34:33.188Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:34:33.188Z","caller":"db/redis.go:285","msg":"User not found in cache","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:34:33.189Z","caller":"dao/user_dao.go:456","msg":"Retrieving user","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:34:33.311Z","caller":"dao/user_dao.go:477","msg":"User retrieved successfully","userID":"user-1","duration":0.122531333}
{"level":"debug","timestamp":"2024-07-28T09:34:33.312Z","caller":"dao/user_dao.go:487","msg":"Role IDs found","roleIds":["role-1"]}
{"level":"debug","timestamp":"2024-07-28T09:34:33.312Z","caller":"dao/user_dao.go:564","msg":"Node properties","props":{"attributes":"{\"location\":\"Remote\",\"title\":\"Engineer\"}","createdAt":"2024-07-27T17:23:26Z","departmentID":"dept-1","email":"user.one@example.com","id":"user-1","name":"User Three","organizationID":"org-1","status":"Active","updatedAt":"2024-07-28T09:25:37Z","userType":"DepartmentUser","username":"user.one"}}
{"level":"info","timestamp":"2024-07-28T09:34:33.312Z","caller":"dao/user_dao.go:502","msg":"User retrieved successfully","userID":"user-1","duration":0.123632208}
{"level":"debug","timestamp":"2024-07-28T09:34:33.313Z","caller":"db/redis.go:267","msg":"User cached successfully","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:34:33.313Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.166532792,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:34:44.963Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:34:44.990Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:34:44.992Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:34:44.993Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.003Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.005Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.008Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.008Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.010Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.010Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.012Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.012Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.013Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.014Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.015Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.015Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.016Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:34:45.017Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:35:39.705Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:35:39.709Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:35:39.710Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:35:39.710Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.713Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.713Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.714Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.715Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.716Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.716Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.718Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.718Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.720Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.720Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.721Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.721Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.723Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:35:39.724Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:36:39.833Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:36:39.845Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:36:39.850Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:36:39.851Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.868Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.868Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.871Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.871Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.873Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.873Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.874Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.874Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.876Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.876Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.877Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.877Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.879Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:36:39.880Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:37:04.520Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:37:04.524Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:37:04.525Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:37:04.525Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.527Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.527Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.529Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.529Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.531Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.531Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.533Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.533Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.535Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.535Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.536Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.536Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.538Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:04.539Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:37:13.128Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:37:13.140Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:37:13.141Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:37:13.142Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.148Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.148Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.150Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.150Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.152Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.152Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.155Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.155Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.157Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.157Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.158Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.158Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.160Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:13.161Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:37:21.226Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:37:21.227Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:37:21.228Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:37:21.229Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:37:21.393Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:37:21.395Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:37:21.396Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:37:21.396Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:37:21.396Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:37:21.397Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:37:21.397Z","caller":"db/redis.go:297","msg":"User retrieved from cache","userID":"user-1"}
{"level":"info","timestamp":"2024-07-28T09:37:21.398Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/users/user-1","query":"","status":200,"latency":0.172026625,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:37:59.585Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:37:59.590Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:37:59.591Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:37:59.591Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.594Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.594Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.596Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.596Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.597Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.598Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.599Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.599Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.601Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.601Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.602Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.602Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.604Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:37:59.604Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:38:42.677Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:38:42.678Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:38:42.678Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:38:42.679Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:38:42.790Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:38:42.791Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:38:42.791Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:38:42.791Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:38:42.792Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:38:42.792Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:38:42.792Z","caller":"dao/role_dao.go:61","msg":"Creating new role","roleName":"readOnlyUserGroup"}
{"level":"debug","timestamp":"2024-07-28T09:38:42.795Z","caller":"dao/role_dao.go:119","msg":"Create role query","query":"\n\t\t\tMERGE (r:ROLE {id: $id})\n\t\t\tON CREATE SET \n\t\t\t\tr.name = $name,\n\t\t\t\tr.description = $description,\n\t\t\t\tr.organizationID = $organizationID,\n\t\t\t\tr.createdAt = $createdAt,\n\t\t\t\tr.updatedAt = $updatedAt\n\t\t\n\t\t\t\tSET r.departmentID = $departmentID\n\t\t\t\n\t\t\tWITH r\n\t\t\tMATCH (o:ORGANIZATION {id: $organizationID})\n\t\t\tMERGE (r)-[:PART_OF]->(o)\n\t\t\n\t\t\t\tWITH r\n\t\t\t\tMATCH (d:DEPARTMENT {id: $departmentID})\n\t\t\t\tMERGE (r)-[:PART_OF]->(d)\n\t\t\t\n\t\t\tRETURN r.id as id\n\t\t","params":{"createdAt":"2024-07-28T09:38:42Z","departmentID":"dept-1","description":"Only provides readonly access","id":"group-1","name":"readOnlyUserGroup","organizationID":"org-1","updatedAt":"2024-07-28T09:38:42Z"}}
{"level":"info","timestamp":"2024-07-28T09:38:42.963Z","caller":"dao/role_dao.go:146","msg":"Role created successfully","roleID":"group-1","duration":0.170970292}
{"level":"error","timestamp":"2024-07-28T09:38:42.965Z","caller":"dao/role_dao.go:160","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).CreateRole\n\t/app/dao/role_dao.go:160\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).CreateRole\n\t/app/service/role_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).CreateRole\n\t/app/controller/role_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:38:42.965Z","caller":"db/redis.go:314","msg":"Role cached successfully","roleID":"group-1"}
{"level":"info","timestamp":"2024-07-28T09:38:42.965Z","caller":"service/role_service.go:156","msg":"Role created successfully","roleID":"group-1","creatorID":""}
{"level":"info","timestamp":"2024-07-28T09:38:42.965Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/roles","query":"","status":201,"latency":0.289458125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:38:42.965Z","caller":"service/role_service.go:60","msg":"Role created event received","roleID":"group-1"}
{"level":"info","timestamp":"2024-07-28T09:38:42.966Z","caller":"util/notification_service.go:105","msg":"Notifying role change","changeType":"created","roleID":"group-1","roleName":"readOnlyUserGroup"}
{"level":"info","timestamp":"2024-07-28T09:39:30.787Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:39:30.792Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:39:30.793Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:39:30.793Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.796Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.796Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.797Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.797Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.799Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.799Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.800Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.800Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.802Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.802Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.803Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.803Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.804Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:30.805Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:39:36.857Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:39:36.860Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:39:36.861Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:39:36.861Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.863Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.863Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.865Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.865Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.867Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.867Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.868Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.868Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.870Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.870Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.871Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.871Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.872Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:36.873Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:39:56.650Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:39:56.659Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:39:56.660Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:39:56.660Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.667Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.667Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.669Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.669Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.670Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.670Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.671Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.672Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.673Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.673Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.674Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.674Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.675Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:39:56.676Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:41:31.628Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:41:31.658Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:41:31.659Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:41:31.659Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.669Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.669Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.672Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.672Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.674Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.674Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.675Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.675Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.677Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.677Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.678Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.678Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.680Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:41:31.681Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:43:28.147Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:43:28.158Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:43:28.159Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:43:28.159Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.167Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.167Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.169Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.169Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.170Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.171Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.172Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.172Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.173Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.173Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.175Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.175Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.176Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:43:28.176Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:43:46.895Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:43:46.899Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:43:46.900Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:43:46.900Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.903Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.903Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.905Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.905Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.907Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.908Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.909Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.909Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.911Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.911Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.912Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.913Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.914Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:43:46.914Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:44:02.688Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:44:02.692Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:44:02.693Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:44:02.693Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.695Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.695Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.697Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.697Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.698Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.698Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.700Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.700Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.701Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.701Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.702Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.702Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.704Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:44:02.704Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:44:10.409Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:44:10.416Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:44:10.416Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:44:10.417Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.420Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.420Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.422Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.422Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.424Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.424Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.425Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.425Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.426Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.427Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.428Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.428Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.429Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:44:10.429Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:45:07.924Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:45:07.936Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:45:07.936Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:45:07.937Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.944Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.944Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.946Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.946Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.947Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.948Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.949Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.949Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.951Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.951Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.952Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.952Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.954Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:45:07.955Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:46:37.952Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:46:37.953Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:46:37.953Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:46:37.954Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:46:38.104Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:46:38.105Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:46:38.106Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:46:38.106Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:46:38.107Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:46:38.107Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:46:38.109Z","caller":"dao/permission_dao.go:59","msg":"Creating new permission","permissionName":"CAN_READ"}
{"level":"info","timestamp":"2024-07-28T09:46:38.225Z","caller":"dao/permission_dao.go:105","msg":"Permission created successfully","permissionID":"permission","duration":0.115769667}
{"level":"error","timestamp":"2024-07-28T09:46:38.226Z","caller":"dao/permission_dao.go:119","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*PermissionDAO).CreatePermission\n\t/app/dao/permission_dao.go:119\ngithub.com/dev-mohitbeniwal/echo/api/service.(*PermissionService).CreatePermission\n\t/app/service/permission_service.go:134\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*PermissionController).CreatePermission\n\t/app/controller/permission_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:46:38.226Z","caller":"db/redis.go:412","msg":"Permission cached successfully","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:46:38.226Z","caller":"service/permission_service.go:150","msg":"Permission created successfully","permissionID":"permission","creatorID":""}
{"level":"info","timestamp":"2024-07-28T09:46:38.227Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/permissions","query":"","status":201,"latency":0.275681709,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:46:38.226Z","caller":"service/permission_service.go:59","msg":"Permission created event received","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:46:38.227Z","caller":"util/notification_service.go:123","msg":"Notifying permission change","changeType":"created","permissionID":"permission","permissionName":"CAN_READ"}
{"level":"debug","timestamp":"2024-07-28T09:47:11.450Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:47:11.450Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:47:11.451Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:47:11.451Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:47:11.479Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:47:11.480Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:47:11.481Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:11.481Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:11.481Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:11.482Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-28T09:47:11.482Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"invalid user: user username cannot be empty","path":"/api/v1/users/permission","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:47:11.483Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/permission","query":"","status":500,"latency":0.033241959,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:47:17.687Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:47:17.688Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:47:17.688Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:47:17.689Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:47:17.720Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:47:17.721Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:47:17.721Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:17.722Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:17.722Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:47:17.722Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:47:17.723Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permission","query":"","status":404,"latency":0.036230917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:48:13.122Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:48:13.130Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:48:13.130Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:48:13.131Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.136Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.136Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.138Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.138Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.140Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.140Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.141Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.141Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.143Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.143Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.144Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.144Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.145Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:48:13.146Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:48:14.871Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:48:14.871Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:48:14.872Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:48:14.872Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:48:14.976Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:48:14.977Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:48:14.978Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:48:14.978Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:48:14.978Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:48:14.978Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:48:14.979Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permission","query":"","status":404,"latency":0.108589042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:49:11.147Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:49:11.148Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:49:11.148Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:49:11.149Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:49:11.186Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:49:11.187Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:49:11.187Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:11.188Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:11.188Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:11.188Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:49:11.189Z","caller":"dao/permission_dao.go:303","msg":"Listing permissions","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T09:49:11.260Z","caller":"dao/permission_dao.go:339","msg":"Permissions listed successfully","count":1,"duration":0.071893083}
{"level":"info","timestamp":"2024-07-28T09:49:11.261Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/permissions","query":"","status":200,"latency":0.114999417,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:49:18.135Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:49:18.136Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:49:18.137Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:49:18.137Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:49:18.167Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:49:18.168Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:49:18.169Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:18.169Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:18.170Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:18.170Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T09:49:18.170Z","caller":"db/redis.go:444","msg":"Permission retrieved from cache","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:49:18.171Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/permissions/permission","query":"","status":200,"latency":0.035933375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:49:24.474Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:49:24.474Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:49:24.475Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:49:24.475Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:49:24.501Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:49:24.503Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:49:24.503Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:24.503Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:24.503Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:24.504Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:49:24.504Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permission/permission","query":"","status":404,"latency":0.030021292,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:49:32.854Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:49:32.854Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:49:32.855Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:49:32.855Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:49:32.882Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:49:32.884Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:49:32.885Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:32.885Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:32.885Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:49:32.886Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:49:32.886Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permission/permission","query":"","status":404,"latency":0.03285225,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:50:18.445Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:50:18.455Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:50:18.456Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:50:18.456Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.463Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.463Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.466Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.466Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.469Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.469Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.470Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.470Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.472Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.472Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.473Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.473Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.474Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:50:18.475Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:50:29.672Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:50:29.675Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:50:29.676Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:50:29.676Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.678Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.678Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.679Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.679Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.681Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.681Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.682Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.682Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.683Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.683Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.684Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.684Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.685Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:50:29.686Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:50:30.900Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:50:30.901Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:50:30.901Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:50:30.902Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:50:31.004Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:50:31.004Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:50:31.005Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:31.005Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:31.006Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:31.006Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:50:31.006Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permission/permission","query":"","status":404,"latency":0.106411875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:50:47.064Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:50:47.064Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:50:47.065Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:50:47.066Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:50:47.093Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:50:47.094Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:50:47.094Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:47.095Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:47.095Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:50:47.095Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:50:47.097Z","caller":"dao/permission_dao.go:263","msg":"Retrieving permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:50:47.153Z","caller":"dao/permission_dao.go:291","msg":"Permission retrieved successfully","permissionID":"permission","duration":0.056166667}
{"level":"info","timestamp":"2024-07-28T09:50:47.153Z","caller":"dao/permission_dao.go:127","msg":"Updating permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:50:47.154Z","caller":"dao/permission_dao.go:263","msg":"Retrieving permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:50:47.156Z","caller":"dao/permission_dao.go:291","msg":"Permission retrieved successfully","permissionID":"permission","duration":0.001967916}
{"level":"info","timestamp":"2024-07-28T09:50:47.182Z","caller":"dao/permission_dao.go:184","msg":"Permission updated successfully","permissionID":"permission","duration":0.02872425}
{"level":"error","timestamp":"2024-07-28T09:50:47.183Z","caller":"dao/permission_dao.go:198","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*PermissionDAO).UpdatePermission\n\t/app/dao/permission_dao.go:198\ngithub.com/dev-mohitbeniwal/echo/api/service.(*PermissionService).UpdatePermission\n\t/app/service/permission_service.go:166\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*PermissionController).UpdatePermission\n\t/app/controller/permission_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:50:47.184Z","caller":"db/redis.go:412","msg":"Permission cached successfully","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:50:47.184Z","caller":"service/permission_service.go:183","msg":"Permission updated successfully","permissionID":"permission","updaterID":""}
{"level":"info","timestamp":"2024-07-28T09:50:47.184Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permissions/permission","query":"","status":200,"latency":0.120500126,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:50:47.184Z","caller":"service/permission_service.go:79","msg":"Permission updated event received","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:50:47.184Z","caller":"util/notification_service.go:123","msg":"Notifying permission change","changeType":"updated","permissionID":"permission","permissionName":"CAN_READ"}
{"level":"debug","timestamp":"2024-07-28T09:51:16.982Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:51:16.982Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:51:16.983Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:51:16.983Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:51:17.010Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:51:17.012Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:51:17.012Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:17.013Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:17.013Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:17.013Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:51:17.013Z","caller":"dao/permission_dao.go:305","msg":"Listing permissions","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T09:51:17.020Z","caller":"dao/permission_dao.go:341","msg":"Permissions listed successfully","count":1,"duration":0.006787834}
{"level":"info","timestamp":"2024-07-28T09:51:17.021Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/permissions","query":"","status":200,"latency":0.0394825,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:51:34.061Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:51:34.062Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:51:34.063Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:51:34.063Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:51:34.090Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:51:34.090Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:51:34.091Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:34.091Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:34.092Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:34.092Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:51:34.093Z","caller":"dao/permission_dao.go:263","msg":"Retrieving permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:51:34.099Z","caller":"dao/permission_dao.go:291","msg":"Permission retrieved successfully","permissionID":"permission","duration":0.006202542}
{"level":"info","timestamp":"2024-07-28T09:51:34.099Z","caller":"dao/permission_dao.go:127","msg":"Updating permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:51:34.099Z","caller":"dao/permission_dao.go:263","msg":"Retrieving permission","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:51:34.101Z","caller":"dao/permission_dao.go:291","msg":"Permission retrieved successfully","permissionID":"permission","duration":0.001966333}
{"level":"info","timestamp":"2024-07-28T09:51:34.105Z","caller":"dao/permission_dao.go:184","msg":"Permission updated successfully","permissionID":"permission","duration":0.006023541}
{"level":"error","timestamp":"2024-07-28T09:51:34.107Z","caller":"dao/permission_dao.go:198","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*PermissionDAO).UpdatePermission\n\t/app/dao/permission_dao.go:198\ngithub.com/dev-mohitbeniwal/echo/api/service.(*PermissionService).UpdatePermission\n\t/app/service/permission_service.go:166\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*PermissionController).UpdatePermission\n\t/app/controller/permission_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T09:51:34.107Z","caller":"db/redis.go:412","msg":"Permission cached successfully","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:51:34.107Z","caller":"service/permission_service.go:183","msg":"Permission updated successfully","permissionID":"permission","updaterID":""}
{"level":"info","timestamp":"2024-07-28T09:51:34.108Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/permissions/permission","query":"","status":200,"latency":0.046947084,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:51:34.107Z","caller":"service/permission_service.go:79","msg":"Permission updated event received","permissionID":"permission"}
{"level":"info","timestamp":"2024-07-28T09:51:34.108Z","caller":"util/notification_service.go:123","msg":"Notifying permission change","changeType":"updated","permissionID":"permission","permissionName":"CAN_READ"}
{"level":"debug","timestamp":"2024-07-28T09:51:37.503Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:51:37.504Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:51:37.504Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:51:37.505Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:51:37.531Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:51:37.532Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:51:37.533Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:37.533Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:37.534Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:51:37.534Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:51:37.534Z","caller":"dao/permission_dao.go:305","msg":"Listing permissions","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T09:51:37.540Z","caller":"dao/permission_dao.go:341","msg":"Permissions listed successfully","count":1,"duration":0.006126167}
{"level":"info","timestamp":"2024-07-28T09:51:37.541Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/permissions","query":"","status":200,"latency":0.038280375,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:52:23.389Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:52:23.389Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:52:23.390Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:52:23.391Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:52:23.501Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:52:23.502Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:52:23.503Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:23.503Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:23.503Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:23.504Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"error","timestamp":"2024-07-28T09:52:23.505Z","caller":"util/http_util.go:11","msg":"Failed to update user","error":"invalid user: user username cannot be empty","path":"/api/v1/users/user-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*UserController).UpdateUser\n\t/app/controller/user_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:52:23.505Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/users/user-1","query":"","status":500,"latency":0.117207458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T09:52:44.033Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:52:44.033Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:52:44.034Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:52:44.035Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:52:44.065Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:52:44.067Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:52:44.067Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:44.068Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:44.068Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:52:44.068Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:52:44.069Z","caller":"dao/role_dao.go:369","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:52:44.162Z","caller":"dao/role_dao.go:397","msg":"Role retrieved successfully","roleID":"role-1","duration":0.092955625}
{"level":"info","timestamp":"2024-07-28T09:52:44.162Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:52:44.162Z","caller":"dao/role_dao.go:369","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:52:44.164Z","caller":"dao/role_dao.go:397","msg":"Role retrieved successfully","roleID":"role-1","duration":0.002135666}
{"level":"error","timestamp":"2024-07-28T09:52:44.182Z","caller":"dao/role_dao.go:283","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.020412167,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:283\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:52:44.183Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:52:44.183Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:52:44.183Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.150886833,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:53:18.744Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:53:18.750Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:53:18.751Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:53:18.751Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.753Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.753Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.755Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.755Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.756Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.756Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.757Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.757Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.758Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.758Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.759Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.759Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.760Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:53:18.761Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:53:20.601Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:53:20.601Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:53:20.602Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:53:20.602Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:53:20.713Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:53:20.713Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:53:20.713Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:53:20.714Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:53:20.714Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:53:20.714Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:53:20.714Z","caller":"dao/role_dao.go:371","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:53:20.721Z","caller":"dao/role_dao.go:399","msg":"Role retrieved successfully","roleID":"role-1","duration":0.006846375}
{"level":"info","timestamp":"2024-07-28T09:53:20.721Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:53:20.722Z","caller":"dao/role_dao.go:371","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:53:20.723Z","caller":"dao/role_dao.go:399","msg":"Role retrieved successfully","roleID":"role-1","duration":0.001718917}
{"level":"error","timestamp":"2024-07-28T09:53:20.727Z","caller":"dao/role_dao.go:250","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:250\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:53:20.728Z","caller":"dao/role_dao.go:285","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.00602925,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:285\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:53:20.728Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:53:20.728Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:53:20.728Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.127420501,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:55:22.651Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:55:22.662Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:55:22.663Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:55:22.663Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.687Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.687Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.689Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.689Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.690Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.690Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.691Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.692Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.693Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.693Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.694Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.694Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.695Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:22.696Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:55:23.270Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:55:23.271Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:55:23.271Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:55:23.271Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:55:23.365Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:55:23.365Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:55:23.366Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:23.366Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:23.366Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:23.366Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:55:23.367Z","caller":"dao/role_dao.go:370","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:23.373Z","caller":"dao/role_dao.go:398","msg":"Role retrieved successfully","roleID":"role-1","duration":0.006296291}
{"level":"info","timestamp":"2024-07-28T09:55:23.373Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:23.374Z","caller":"dao/role_dao.go:370","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:23.376Z","caller":"dao/role_dao.go:398","msg":"Role retrieved successfully","roleID":"role-1","duration":0.002258417}
{"level":"error","timestamp":"2024-07-28T09:55:23.382Z","caller":"dao/role_dao.go:249","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:249\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:23.383Z","caller":"dao/role_dao.go:284","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.009405916,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:284\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:23.383Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:23.383Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:55:23.384Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.113519042,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:55:29.672Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:55:29.675Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:55:29.676Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:55:29.676Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.678Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.678Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.680Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.680Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.681Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.681Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.683Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.683Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.684Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.684Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.685Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.685Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.686Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:29.687Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:55:38.269Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:55:38.273Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:55:38.274Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:55:38.274Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.275Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.276Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.277Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.277Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.278Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.278Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.279Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.279Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.280Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.280Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.281Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.281Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.282Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:38.283Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:55:52.252Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:55:52.261Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:55:52.262Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:55:52.262Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.266Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.266Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.267Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.267Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.268Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.268Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.270Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.270Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.271Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.271Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.272Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.272Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.273Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:55:52.274Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:55:53.191Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:55:53.192Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:55:53.192Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:55:53.192Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:55:53.282Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:55:53.282Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:55:53.282Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:53.283Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:53.283Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:55:53.283Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:55:53.283Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:53.287Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.004345667}
{"level":"info","timestamp":"2024-07-28T09:55:53.288Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:53.288Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:55:53.289Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.001545667}
{"level":"debug","timestamp":"2024-07-28T09:55:53.290Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T09:55:53Z"}}}
{"level":"error","timestamp":"2024-07-28T09:55:53.293Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:53.293Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.005820916,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:53.294Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:55:53.294Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:55:53.294Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.103111916,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:58:44.146Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:58:44.159Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:58:44.161Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:58:44.161Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.181Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.181Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.183Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.183Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.185Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.185Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.186Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.186Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.187Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.188Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.189Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.189Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.190Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:58:44.191Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T09:58:44.586Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T09:58:44.587Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T09:58:44.587Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T09:58:44.587Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T09:58:44.685Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T09:58:44.686Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T09:58:44.686Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:58:44.686Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:58:44.686Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T09:58:44.686Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T09:58:44.687Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:58:44.691Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.004205958}
{"level":"info","timestamp":"2024-07-28T09:58:44.691Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:58:44.691Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T09:58:44.693Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.001541083}
{"level":"debug","timestamp":"2024-07-28T09:58:44.693Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_PERMISSION]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_PERMISSION]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T09:58:44Z"}}}
{"level":"error","timestamp":"2024-07-28T09:58:44.861Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"role not found","roleID":"role-1","duration":0.169321625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:58:44.861Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"role not found","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T09:58:44.861Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: role not found","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T09:58:44.861Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.275253542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T09:59:09.942Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:59:09.946Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:59:09.947Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:59:09.947Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.949Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.949Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.950Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.950Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.951Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.952Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.952Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.953Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.953Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.954Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.954Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.955Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.955Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:59:09.956Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T09:59:12.950Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T09:59:12.953Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T09:59:12.954Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T09:59:12.954Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.956Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.956Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.958Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.958Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.959Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.959Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.961Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.961Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.962Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.962Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.963Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.963Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.964Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T09:59:12.965Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:01:51.333Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:01:51.334Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:01:51.335Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:01:51.336Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:01:51.485Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:01:51.486Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:01:51.487Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:01:51.488Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:01:51.488Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:01:51.488Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:01:51.490Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:01:51.549Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.059214875}
{"level":"info","timestamp":"2024-07-28T10:01:51.550Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:01:51.550Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:01:51.552Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.001839542}
{"level":"debug","timestamp":"2024-07-28T10:01:51.552Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:01:51Z"}}}
{"level":"error","timestamp":"2024-07-28T10:01:51.557Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:01:51.558Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.0083435,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:01:51.558Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:01:51.559Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:01:51.559Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.226890376,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:02:37.014Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:02:37.015Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:02:37.015Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:02:37.016Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:02:37.043Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:02:37.044Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:02:37.044Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:02:37.045Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:02:37.045Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:02:37.045Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:02:37.045Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:02:37.051Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.005997}
{"level":"info","timestamp":"2024-07-28T10:02:37.052Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:02:37.052Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:02:37.056Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.003540166}
{"level":"debug","timestamp":"2024-07-28T10:02:37.057Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:02:37Z"}}}
{"level":"error","timestamp":"2024-07-28T10:02:37.061Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:02:37.062Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.009579125,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:02:37.062Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:02:37.062Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:02:37.063Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.048541458,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:04:15.477Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:04:15.486Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:04:15.487Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:04:15.488Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.492Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.492Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.494Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.494Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.495Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.495Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.496Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.497Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.498Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.498Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.499Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.499Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.500Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:04:15.501Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:05:10.514Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:05:10.517Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:05:10.518Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:05:10.518Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.520Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.520Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.522Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.522Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.523Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.523Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.524Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.524Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.525Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.525Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.526Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.526Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.527Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:05:10.528Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:05:52.238Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:05:52.241Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:05:52.241Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:05:52.241Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.243Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.243Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.244Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.245Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.246Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.246Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.247Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.247Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.248Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.248Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.249Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.249Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.250Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:05:52.251Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:06:31.383Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:06:31.392Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:06:31.393Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:06:31.393Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.396Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.396Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.398Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.398Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.399Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.399Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.400Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.401Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.402Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.402Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.403Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.403Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.404Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:31.405Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:06:39.115Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:06:39.121Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:06:39.122Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:06:39.122Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.126Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.126Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.128Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.128Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.129Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.129Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.130Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.130Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.131Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.131Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.132Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.132Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.133Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:39.134Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:06:50.351Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:06:50.354Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:06:50.355Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:06:50.355Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.357Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.358Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.359Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.359Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.360Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.360Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.361Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.361Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.362Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.362Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.363Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.363Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.364Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:06:50.365Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:07:00.676Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:07:00.679Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:07:00.680Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:07:00.680Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.682Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.682Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.683Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.683Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.685Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.685Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.686Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.686Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.687Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.687Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.688Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.688Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.689Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:07:00.690Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:07:11.051Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:07:11.053Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:07:11.054Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:07:11.054Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:07:11.157Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:07:11.157Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:07:11.158Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:07:11.158Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:07:11.159Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:07:11.159Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:07:11.160Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:07:11.167Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.007413208}
{"level":"info","timestamp":"2024-07-28T10:07:11.168Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:07:11.168Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:07:11.171Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.003513166}
{"level":"debug","timestamp":"2024-07-28T10:07:11.172Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:07:11Z"}}}
{"level":"error","timestamp":"2024-07-28T10:07:11.179Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:07:11.180Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.012175875,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:07:11.180Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:07:11.180Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:07:11.181Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.129738292,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:07:35.492Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:07:35.495Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:07:35.496Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:07:35.496Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.498Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.498Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.499Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.499Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.500Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.500Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.501Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.501Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.502Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.502Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.503Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.503Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.504Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:07:35.505Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:08:15.628Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:08:15.629Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:08:15.629Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:08:15.630Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:08:15.799Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:08:15.800Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:08:15.801Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:08:15.802Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:08:15.802Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:08:15.802Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:08:15.804Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:08:15.825Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.020587625}
{"level":"info","timestamp":"2024-07-28T10:08:15.825Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:08:15.826Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:08:15.829Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.003014875}
{"level":"debug","timestamp":"2024-07-28T10:08:15.829Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:08:15Z"}}}
{"level":"error","timestamp":"2024-07-28T10:08:15.834Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:08:15.835Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.010038417,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:08:15.836Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:08:15.836Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:08:15.836Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.209032958,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:09:00.211Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:09:00.230Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:09:00.234Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:09:00.235Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.250Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.250Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.252Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.252Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.253Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.253Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.254Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.254Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.255Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.255Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.256Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.256Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.257Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:09:00.258Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:09:02.467Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:09:02.467Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:09:02.470Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:09:02.471Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:09:02.576Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:09:02.577Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:09:02.577Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:09:02.578Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:09:02.578Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:09:02.578Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:09:02.579Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:09:02.586Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.007149166}
{"level":"info","timestamp":"2024-07-28T10:09:02.586Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:09:02.587Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:09:02.589Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.002705875}
{"level":"debug","timestamp":"2024-07-28T10:09:02.590Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_` + echo_neo4j.LabelPermission + `]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:09:02Z"}}}
{"level":"error","timestamp":"2024-07-28T10:09:02.597Z","caller":"dao/role_dao.go:252","msg":"Failed to execute update role query","error":"Neo4jError: Neo.ClientError.Statement.SyntaxError (Invalid input ' + echo_neo4j.LabelPermission + ': expected\n  \"*\"\n  \"]\"\n  \"{\"\n  \"|\"\n  a parameter (line 19, column 44 (offset: 616))\n\"        OPTIONAL MATCH (r)-[oldPermRel:HAS_` + echo_neo4j.LabelPermission + `]->(:` + echo_neo4j.LabelPermission + `)\"\n                                            ^)","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole.func1\n\t/app/dao/role_dao.go:252\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction.transactionWorkBridge.func1\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:113\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).executeTransactionFunction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:494\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).runRetriable\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:434\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*sessionWithContext).ExecuteWrite\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session_with_context.go:376\ngithub.com/neo4j/neo4j-go-driver/v5/neo4j.(*session).WriteTransaction\n\t/go/pkg/mod/github.com/neo4j/neo4j-go-driver/v5@v5.22.0/neo4j/session.go:90\ngithub.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:202\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:09:02.598Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"database operation failed","roleID":"role-1","duration":0.011332,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:09:02.598Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"database operation failed","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:09:02.598Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: database operation failed","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:09:02.599Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.132240959,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:09:55.077Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:09:55.109Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:09:55.111Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:09:55.111Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.125Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.126Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.127Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.127Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.128Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.128Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.132Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.132Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.135Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.135Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.137Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.137Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.139Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:09:55.140Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:17.408Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:17.412Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:17.413Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:17.413Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.415Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.415Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.416Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.416Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.418Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.418Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.419Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.419Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.420Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.420Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.421Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.421Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.422Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:17.423Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:20.644Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:20.647Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:20.648Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:20.648Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.651Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.651Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.652Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.652Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.653Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.654Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.655Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.655Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.656Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.656Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.657Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.657Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.658Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:20.658Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:28.603Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:28.606Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:28.606Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:28.607Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.608Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.608Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.610Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.610Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.611Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.611Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.612Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.612Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.613Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.613Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.614Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.614Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.615Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:28.615Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:30.910Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:30.913Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:30.913Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:30.913Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.915Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.915Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.916Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.916Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.917Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.917Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.918Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.918Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.919Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.919Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.919Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.919Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.920Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:30.921Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:33.747Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:33.750Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:33.750Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:33.751Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.753Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.753Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.754Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.755Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.756Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.756Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.757Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.757Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.758Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.758Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.759Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.759Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.760Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:33.761Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:35.423Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:35.426Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:35.426Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:35.427Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.428Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.428Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.429Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.429Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.430Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.431Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.431Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.431Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.432Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.432Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.433Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.433Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.434Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:35.435Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:42.703Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:42.714Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:42.715Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:42.715Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.722Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.722Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.723Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.723Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.724Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.724Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.725Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.725Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.726Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.726Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.727Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.727Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.728Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.729Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:42.950Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:42.956Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:42.957Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:42.957Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.959Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.959Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.960Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.960Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.961Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.961Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.962Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.962Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.963Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.963Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.964Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.964Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.965Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:42.966Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:50.675Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:50.678Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:50.679Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:50.679Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.680Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.681Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.682Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.682Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.683Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.684Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.685Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.685Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.686Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.686Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.687Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.687Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.688Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:50.688Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:10:56.111Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:10:56.114Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:10:56.115Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:10:56.115Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.116Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.116Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.117Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.117Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.118Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.119Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.120Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.120Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.122Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.122Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.125Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.125Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.126Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:10:56.126Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:11:12.375Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:11:12.378Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:11:12.379Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:11:12.379Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.381Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.381Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.383Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.383Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.384Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.384Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.385Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.385Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.386Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.386Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.386Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.387Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.387Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:12.388Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:11:16.795Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:11:16.799Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:11:16.800Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:11:16.800Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.802Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.802Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.803Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.803Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.805Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.805Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.806Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.806Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.807Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.807Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.808Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.808Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.810Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:16.811Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:11:24.552Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:11:24.555Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:11:24.556Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:11:24.556Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.558Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.558Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.559Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.559Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.560Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.560Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.561Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.561Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.562Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.563Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.564Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.564Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.567Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:24.568Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:11:26.099Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:11:26.102Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:11:26.103Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:11:26.103Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.105Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.105Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.106Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.106Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.107Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.107Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.108Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.109Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.109Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.109Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.110Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.110Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.112Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:11:26.112Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:11:27.718Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:11:27.719Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:11:27.719Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:11:27.720Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:11:27.822Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:11:27.823Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:11:27.823Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:27.823Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:27.824Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:27.824Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:11:27.825Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:27.862Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.037510167}
{"level":"info","timestamp":"2024-07-28T10:11:27.862Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:27.863Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:27.865Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.002258208}
{"level":"debug","timestamp":"2024-07-28T10:11:27.866Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_PERMISSION]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_PERMISSION]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permissions"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:11:27Z"}}}
{"level":"error","timestamp":"2024-07-28T10:11:27.877Z","caller":"dao/role_dao.go:287","msg":"Failed to update role","error":"role not found","roleID":"role-1","duration":0.014638667,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:287\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:11:27.877Z","caller":"service/role_service.go:176","msg":"Error updating role","error":"role not found","roleID":"role-1","updaterID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:176\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:11:27.878Z","caller":"util/http_util.go:11","msg":"Failed to update role","error":"failed to update role: role not found","path":"/api/v1/roles/role-1","method":"PUT","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:11:27.878Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":500,"latency":0.160049709,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:11:59.631Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:11:59.631Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:11:59.632Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:11:59.632Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:11:59.681Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:11:59.682Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:11:59.683Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:59.683Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:59.684Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:11:59.684Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:11:59.684Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:59.690Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.005571542}
{"level":"info","timestamp":"2024-07-28T10:11:59.690Z","caller":"dao/role_dao.go:191","msg":"Updating role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:59.690Z","caller":"dao/role_dao.go:373","msg":"Retrieving role","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:59.693Z","caller":"dao/role_dao.go:401","msg":"Role retrieved successfully","roleID":"role-1","duration":0.002937042}
{"level":"debug","timestamp":"2024-07-28T10:11:59.695Z","caller":"dao/role_dao.go:247","msg":"Update role query","query":"\n        MATCH (r:ROLE {id: $id})\n        SET r += $props\n        WITH r\n        OPTIONAL MATCH (r)-[oldOrgRel:PART_OF]->(:ORGANIZATION)\n        DELETE oldOrgRel\n        WITH r\n        MATCH (o:ORGANIZATION {id: $organizationID})\n        MERGE (r)-[:PART_OF]->(o)\n        WITH r\n        OPTIONAL MATCH (r)-[oldDeptRel:PART_OF]->(:DEPARTMENT)\n        DELETE oldDeptRel\n        WITH r\n        OPTIONAL MATCH (d:DEPARTMENT {id: $departmentID})\n        FOREACH (_ IN CASE WHEN d IS NOT NULL THEN [1] ELSE [] END |\n            MERGE (r)-[:PART_OF]->(d)\n        )\n        WITH r\n        OPTIONAL MATCH (r)-[oldPermRel:HAS_PERMISSION]->(:` + echo_neo4j.LabelPermission + `)\n        DELETE oldPermRel\n        WITH r\n        UNWIND $permissions AS permissionID\n        MATCH (p:` + echo_neo4j.LabelPermission + ` {id: permissionID})\n        MERGE (r)-[:HAS_PERMISSION]->(p)\n        RETURN r\n        ","params":{"departmentID":"dept-1","id":"role-1","organizationID":"org-1","permissions":["permission"],"props":{"attributes":"null","departmentID":"dept-1","description":"Only provides readonly access","name":"readOnlyRole","organizationID":"org-1","updatedAt":"2024-07-28T10:11:59Z"}}}
{"level":"info","timestamp":"2024-07-28T10:11:59.794Z","caller":"dao/role_dao.go:294","msg":"Role updated successfully","roleID":"role-1","duration":0.103540583}
{"level":"error","timestamp":"2024-07-28T10:11:59.797Z","caller":"dao/role_dao.go:308","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*RoleDAO).UpdateRole\n\t/app/dao/role_dao.go:308\ngithub.com/dev-mohitbeniwal/echo/api/service.(*RoleService).UpdateRole\n\t/app/service/role_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*RoleController).UpdateRole\n\t/app/controller/role_controller.go:86\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T10:11:59.797Z","caller":"db/redis.go:314","msg":"Role cached successfully","roleID":"role-1"}
{"level":"info","timestamp":"2024-07-28T10:11:59.797Z","caller":"service/role_service.go:191","msg":"Role updated successfully","roleID":"role-1","updaterID":""}
{"level":"info","timestamp":"2024-07-28T10:11:59.797Z","caller":"service/role_service.go:80","msg":"Role updated event received","roleID":"role-1","oldUpdatedAt":"2024-07-27T21:04:03.000Z","newUpdatedAt":"2024-07-28T10:11:59.000Z"}
{"level":"info","timestamp":"2024-07-28T10:11:59.797Z","caller":"util/notification_service.go:105","msg":"Notifying role change","changeType":"updated","roleID":"role-1","roleName":"readOnlyRole"}
{"level":"info","timestamp":"2024-07-28T10:11:59.797Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/roles/role-1","query":"","status":200,"latency":0.166971167,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:12:49.475Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:12:49.476Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:12:49.477Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:12:49.478Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:12:49.507Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:12:49.508Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:12:49.509Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:12:49.509Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:12:49.509Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:12:49.510Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:12:49.510Z","caller":"dao/group_dao.go:60","msg":"Creating new group","name":"readOnlyUserGroup"}
{"level":"error","timestamp":"2024-07-28T10:12:49.524Z","caller":"dao/group_dao.go:112","msg":"Failed to create group","error":"failed to execute create group query: Neo4jError: Neo.ClientError.Statement.SyntaxError (Variable `g` not defined (line 9, column 18 (offset: 223))\n\"            WITH g\"\n                  ^)","name":"readOnlyUserGroup","duration":0.013911625,"stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*GroupDAO).CreateGroup\n\t/app/dao/group_dao.go:112\ngithub.com/dev-mohitbeniwal/echo/api/service.(*GroupService).CreateGroup\n\t/app/service/group_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).CreateGroup\n\t/app/controller/group_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:12:49.525Z","caller":"service/group_service.go:142","msg":"Error creating group","error":"failed to execute create group query: Neo4jError: Neo.ClientError.Statement.SyntaxError (Variable `g` not defined (line 9, column 18 (offset: 223))\n\"            WITH g\"\n                  ^)","creatorID":"","stacktrace":"github.com/dev-mohitbeniwal/echo/api/service.(*GroupService).CreateGroup\n\t/app/service/group_service.go:142\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).CreateGroup\n\t/app/controller/group_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:12:49.526Z","caller":"util/http_util.go:11","msg":"Failed to create group","error":"internal server error","path":"/api/v1/groups","method":"POST","stacktrace":"github.com/dev-mohitbeniwal/echo/api/util.RespondWithError\n\t/app/util/http_util.go:11\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).CreateGroup\n\t/app/controller/group_controller.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:12:49.526Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/groups","query":"","status":500,"latency":0.051755209,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:14:43.396Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:14:43.408Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:14:43.409Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:14:43.409Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.432Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.432Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.434Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.434Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.435Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.435Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.436Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.436Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.437Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.437Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.438Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.438Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.439Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:14:43.440Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:15:04.192Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:15:04.194Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:15:04.195Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:15:04.195Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.197Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.197Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.199Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.199Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.201Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.201Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.202Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.202Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.203Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.203Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.204Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.204Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.205Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:15:04.206Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:15:07.460Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:15:07.461Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:15:07.466Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:15:07.467Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:15:07.579Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:15:07.579Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:15:07.580Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:15:07.580Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:15:07.581Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:15:07.581Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:15:07.582Z","caller":"dao/group_dao.go:60","msg":"Creating new group","name":"readOnlyUserGroup"}
{"level":"info","timestamp":"2024-07-28T10:15:07.684Z","caller":"dao/group_dao.go:142","msg":"Group created successfully","id":"group-1","duration":0.102071208}
{"level":"error","timestamp":"2024-07-28T10:15:07.685Z","caller":"dao/group_dao.go:147","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*GroupDAO).CreateGroup\n\t/app/dao/group_dao.go:147\ngithub.com/dev-mohitbeniwal/echo/api/service.(*GroupService).CreateGroup\n\t/app/service/group_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).CreateGroup\n\t/app/controller/group_controller.go:53\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T10:15:07.685Z","caller":"db/redis.go:362","msg":"Group cached successfully","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:15:07.686Z","caller":"service/group_service.go:156","msg":"Group created successfully","groupID":"group-1","creatorID":""}
{"level":"info","timestamp":"2024-07-28T10:15:07.686Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/groups","query":"","status":201,"latency":0.226706333,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:15:07.686Z","caller":"service/group_service.go:60","msg":"Group created event received","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:15:07.686Z","caller":"util/notification_service.go:114","msg":"Notifying group change","changeType":"created","groupID":"group-1","groupName":"readOnlyUserGroup"}
{"level":"info","timestamp":"2024-07-28T10:16:01.877Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:16:01.888Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:16:01.889Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:16:01.890Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.896Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.896Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.897Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.898Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.898Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.899Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.900Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.900Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.901Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.901Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.902Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.902Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.903Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:16:01.904Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:16:15.656Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:16:15.660Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:16:15.661Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:16:15.661Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.664Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.664Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.665Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.666Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.667Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.667Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.668Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.668Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.669Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.669Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.671Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.671Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.672Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:16:15.672Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:16:54.674Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:16:54.675Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:16:54.675Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:16:54.676Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:16:54.817Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:16:54.818Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:16:54.819Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:16:54.819Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:16:54.819Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:16:54.820Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:16:54.821Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"debug","timestamp":"2024-07-28T10:17:25.945Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:17:25.946Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:17:25.946Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:17:25.947Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:17:25.982Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:17:25.983Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:17:25.984Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:17:25.984Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:17:25.985Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:17:25.985Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:17:25.985Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:18:42.985Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:18:42.998Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:18:42.999Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:18:42.999Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.007Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.007Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.008Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.008Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.009Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.009Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.010Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.010Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.012Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.012Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.014Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.014Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.015Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:18:43.016Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:18:45.332Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:18:45.333Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:18:45.333Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:18:45.333Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:18:45.448Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:18:45.448Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:18:45.449Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:18:45.449Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:18:45.449Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:18:45.449Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:18:45.450Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"debug","timestamp":"2024-07-28T10:19:08.097Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:19:08.098Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:19:08.099Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:19:08.100Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:19:08.134Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:19:08.135Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:19:08.136Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:08.136Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:08.136Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:08.136Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:19:08.137Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/group/","query":"","status":404,"latency":0.040649875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:19:11.577Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:19:11.578Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:19:11.578Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:19:11.579Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:19:11.618Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:19:11.619Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:19:11.620Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:11.621Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:11.622Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:11.623Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:19:11.623Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/groups","query":"","status":404,"latency":0.046961208,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:19:18.128Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:19:18.129Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:19:18.130Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiOTY4Y2RhNDEtMDE4ZS00ZjA1LThlY2UtMzg1YzM0NzBjMjczIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6ImY1NDdhYWQ3LTA2YWYtNGExYi04NWI3LTc1NDlhNjNjMWVlZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTU4NDYyLCJleHAiOjE3MjIxNjIwNjIsImlhdCI6MTcyMjE1ODQ2MiwianRpIjoiODVhODFiMGItOWMwMS00ZTRmLWE5ZDgtYWFjYTk1Mzc4ZWM4IiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.RzcPqNKWfjeFwfO_wGJkkdBtJcGUpLd83doI9QmyZ2Na01QPWX2_lkTZoqYFiy-J1DPAM577qujC6MTLEKihQ8ixMLnqfXj_1mM5gzjr95Sx2C1G-LBpF_-F2xy9z3rpAkdAuqk6UlqARTdz1LtZBvWjou-eoCd_7HIQL0e4ea9SWIBKbGvpGdFEP9JZi0PVtRXo3Cp5vi7v2FDcFCxnvczVc_HQJibADYFRPZzSMag_jUL1OIDETniWdtmCA64_eHr3V6mR7ImCIcdCPoOLQWrGKY1EouUQstaGQl3LFgmM4j7txVihr53x4dqgjbty-pMb3s6xRcr8J8Rya5MOuA"}
{"level":"info","timestamp":"2024-07-28T10:19:18.131Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:19:18.166Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:19:18.167Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:19:18.168Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:18.168Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:18.169Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722162062,"jti":"85a81b0b-9c01-4e4f-a9d8-aaca95378ec8","iat":1722158462,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:18.169Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:19:18.170Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"debug","timestamp":"2024-07-28T10:19:41.968Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:19:41.968Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:19:41.969Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:19:41.970Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:19:42.004Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:19:42.005Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:19:42.005Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:42.006Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:42.006Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:19:42.006Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:19:42.006Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"debug","timestamp":"2024-07-28T10:20:33.478Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:20:33.480Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:20:33.481Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:20:33.482Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:20:33.520Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:20:33.521Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:20:33.522Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:20:33.522Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:20:33.523Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:20:33.524Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:20:33.524Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"debug","timestamp":"2024-07-28T10:20:42.073Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:20:42.073Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:20:42.073Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ1"}
{"level":"info","timestamp":"2024-07-28T10:20:42.074Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:20:42.111Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"error","timestamp":"2024-07-28T10:20:42.112Z","caller":"middleware/group_auth.go:153","msg":"Error parsing token: %v","error":"crypto/rsa: verification error","stacktrace":"github.com/dev-mohitbeniwal/echo/api/middleware.parseTokenUnverified\n\t/app/middleware/group_auth.go:153\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:110\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"error","timestamp":"2024-07-28T10:20:42.113Z","caller":"middleware/group_auth.go:112","msg":"Error parsing token: %v","error":"crypto/rsa: verification error","stacktrace":"github.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:112\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"info","timestamp":"2024-07-28T10:20:42.115Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/groups/group-1","query":"","status":401,"latency":0.042436125,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:20:57.969Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:20:57.977Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:20:57.979Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:20:57.979Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.981Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.981Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.982Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.982Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.983Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.984Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.985Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.985Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.987Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.987Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.989Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.989Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.990Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:20:57.993Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:21:02.623Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:21:02.633Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:21:02.634Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:21:02.634Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.645Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.645Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.646Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.646Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.648Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.648Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.649Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.649Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.651Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.651Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.652Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.653Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.653Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:02.654Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:21:19.116Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:21:19.119Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:21:19.119Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:21:19.119Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.121Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.121Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.122Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.122Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.154Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.155Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.156Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.157Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.162Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.163Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.167Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.167Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.168Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:19.169Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:21:51.375Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:21:51.388Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:21:51.389Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:21:51.389Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.396Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.396Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.398Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.398Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.399Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.399Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.401Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.401Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.402Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.402Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.403Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.404Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.405Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:51.406Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:21:53.350Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:21:53.353Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:21:53.354Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:21:53.354Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.356Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.356Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.358Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.358Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.359Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.359Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.360Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.360Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.361Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.361Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.362Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.362Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.362Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:53.363Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:21:57.735Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:21:57.737Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:21:57.739Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:21:57.739Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.740Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.741Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.742Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.742Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.743Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.743Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.744Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.744Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.745Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.745Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.746Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.746Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.747Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:21:57.747Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:21:59.415Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:21:59.416Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:21:59.416Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:21:59.417Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:21:59.557Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:21:59.557Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:21:59.558Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:21:59.559Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:21:59.559Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:21:59.560Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:21:59.560Z","caller":"controller/group_controller.go:75","msg":"UpdateGroup Request","Context":"/api/v1/groups/group-1"}
{"level":"info","timestamp":"2024-07-28T10:21:59.562Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:22:20.968Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:22:20.971Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:22:20.972Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:22:20.972Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.973Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.973Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.975Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.975Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.976Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.976Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.977Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.977Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.978Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.978Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.979Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.979Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.980Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:20.981Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:22:42.844Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:22:42.854Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:22:42.856Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:22:42.856Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.870Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.870Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.872Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.873Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.875Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.875Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.876Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.878Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.879Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.879Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.880Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.880Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.881Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:42.881Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:22:48.264Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:22:48.267Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:22:48.268Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:22:48.268Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.270Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.270Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.271Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.271Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.272Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.272Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.273Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.273Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.274Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.274Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.275Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.275Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.276Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:22:48.277Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:22:51.624Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:22:51.624Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:22:51.625Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:22:51.625Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:22:51.773Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:22:51.774Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:22:51.774Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:22:51.775Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:22:51.775Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:22:51.776Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:22:51.776Z","caller":"controller/group_controller.go:82","msg":"Updating group","group_id":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:22:51.777Z","caller":"dao/group_dao.go:344","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:24:20.773Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:24:20.794Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:24:20.795Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:24:20.796Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.804Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.804Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.805Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.806Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.807Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.807Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.808Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.808Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.810Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.810Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.811Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.811Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.812Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:24:20.813Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:25:19.574Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:25:19.575Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:25:19.579Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:25:19.582Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:25:19.787Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:25:19.789Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:25:19.790Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:25:19.791Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:25:19.791Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:25:19.792Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:25:19.793Z","caller":"dao/group_dao.go:386","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:27:50.984Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:27:50.994Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:27:50.999Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:27:51.000Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.020Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.021Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.025Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.025Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.031Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.032Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.043Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.047Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.054Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.054Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.058Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.058Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.060Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:27:51.061Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:28:22.957Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:28:22.962Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:28:22.963Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:28:22.963Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.964Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.965Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.966Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.969Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.970Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.971Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.972Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.972Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.973Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.973Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.975Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.975Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.976Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:28:22.977Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"info","timestamp":"2024-07-28T10:28:26.412Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:28:26.419Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:28:26.420Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:28:26.420Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.425Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.425Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.426Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.426Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.427Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.427Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.428Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.429Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.430Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.430Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.431Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.431Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.433Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:28:26.434Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:28:30.788Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:28:30.788Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:28:30.789Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:28:30.790Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:28:30.931Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:28:30.934Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:28:30.935Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:30.936Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:30.936Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:30.937Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:28:30.938Z","caller":"dao/group_dao.go:60","msg":"Creating new group","name":"readOnlyUserGroup"}
{"level":"info","timestamp":"2024-07-28T10:28:31.027Z","caller":"dao/group_dao.go:143","msg":"Group created successfully","id":"group-1","duration":0.089660833}
{"level":"error","timestamp":"2024-07-28T10:28:31.029Z","caller":"dao/group_dao.go:148","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*GroupDAO).CreateGroup\n\t/app/dao/group_dao.go:148\ngithub.com/dev-mohitbeniwal/echo/api/service.(*GroupService).CreateGroup\n\t/app/service/group_service.go:140\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).CreateGroup\n\t/app/controller/group_controller.go:55\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T10:28:31.030Z","caller":"db/redis.go:362","msg":"Group cached successfully","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:31.030Z","caller":"service/group_service.go:156","msg":"Group created successfully","groupID":"group-1","creatorID":""}
{"level":"info","timestamp":"2024-07-28T10:28:31.031Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"POST","path":"/api/v1/groups","query":"","status":201,"latency":0.243328875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:28:31.030Z","caller":"service/group_service.go:60","msg":"Group created event received","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:31.031Z","caller":"util/notification_service.go:114","msg":"Notifying group change","changeType":"created","groupID":"group-1","groupName":"readOnlyUserGroup"}
{"level":"debug","timestamp":"2024-07-28T10:28:52.432Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:28:52.433Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:28:52.433Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:28:52.434Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:28:52.476Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:28:52.477Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:28:52.477Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:52.478Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:52.479Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:52.479Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:28:52.480Z","caller":"dao/group_dao.go:387","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:28:52.500Z","caller":"dao/group_dao.go:423","msg":"Groups listed successfully","count":1,"duration":0.01952225}
{"level":"info","timestamp":"2024-07-28T10:28:52.500Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.06931475,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:28:55.892Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:28:55.893Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:28:55.894Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:28:55.894Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:28:55.949Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:28:55.954Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:28:55.954Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:55.955Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:55.956Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:28:55.956Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:28:55.957Z","caller":"controller/group_controller.go:82","msg":"Updating group","group_id":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:55.957Z","caller":"dao/group_dao.go:345","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:55.972Z","caller":"dao/group_dao.go:373","msg":"Group retrieved successfully","groupID":"group-1","duration":0.015269667}
{"level":"info","timestamp":"2024-07-28T10:28:55.976Z","caller":"dao/group_dao.go:168","msg":"Updating group","id":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:55.976Z","caller":"dao/group_dao.go:345","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:55.979Z","caller":"dao/group_dao.go:373","msg":"Group retrieved successfully","groupID":"group-1","duration":0.00329225}
{"level":"info","timestamp":"2024-07-28T10:28:56.099Z","caller":"dao/group_dao.go:275","msg":"Group updated successfully","id":"group-1","duration":0.123641125}
{"level":"error","timestamp":"2024-07-28T10:28:56.101Z","caller":"dao/group_dao.go:280","msg":"Failed to create audit log","error":"dial tcp [::1]:9200: connect: connection refused","stacktrace":"github.com/dev-mohitbeniwal/echo/api/dao.(*GroupDAO).UpdateGroup\n\t/app/dao/group_dao.go:280\ngithub.com/dev-mohitbeniwal/echo/api/service.(*GroupService).UpdateGroup\n\t/app/service/group_service.go:174\ngithub.com/dev-mohitbeniwal/echo/api/controller.(*GroupController).UpdateGroup\n\t/app/controller/group_controller.go:91\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.GroupAuthMiddleware.func3\n\t/app/middleware/group_auth.go:131\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.RateLimiter.func2\n\t/app/middleware/rate_limiter.go:46\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/dev-mohitbeniwal/echo/api/router.SetupRouter.Logger.func1\n\t/app/middleware/logger.go:20\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3142\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2044"}
{"level":"debug","timestamp":"2024-07-28T10:28:56.102Z","caller":"db/redis.go:362","msg":"Group cached successfully","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:28:56.102Z","caller":"service/group_service.go:191","msg":"Group updated successfully","groupID":"group-1","updaterID":""}
{"level":"info","timestamp":"2024-07-28T10:28:56.102Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"PUT","path":"/api/v1/groups/group-1","query":"","status":200,"latency":0.211164917,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:28:56.102Z","caller":"service/group_service.go:80","msg":"Group updated event received","groupID":"group-1","oldUpdatedAt":"2024-07-28T10:28:30.000Z","newUpdatedAt":"2024-07-28T10:28:55.000Z"}
{"level":"info","timestamp":"2024-07-28T10:28:56.103Z","caller":"util/notification_service.go:114","msg":"Notifying group change","changeType":"updated","groupID":"group-1","groupName":"readOnlyUserGroup"}
{"level":"debug","timestamp":"2024-07-28T10:29:04.370Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:29:04.371Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:29:04.372Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:29:04.373Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:29:04.411Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:29:04.413Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:29:04.414Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:29:04.414Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:29:04.415Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:29:04.415Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:29:04.416Z","caller":"dao/group_dao.go:387","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:29:04.421Z","caller":"dao/group_dao.go:423","msg":"Groups listed successfully","count":1,"duration":0.005625042}
{"level":"info","timestamp":"2024-07-28T10:29:04.422Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.05223325,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:30:24.841Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:30:24.843Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:30:24.844Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:30:24.845Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:30:24.963Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:30:24.964Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:30:24.965Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:30:24.966Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:30:24.967Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:30:24.967Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:30:24.968Z","caller":"dao/group_dao.go:387","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:30:24.981Z","caller":"dao/group_dao.go:423","msg":"Groups listed successfully","count":1,"duration":0.013003041}
{"level":"info","timestamp":"2024-07-28T10:30:24.982Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.141925666,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:31:47.208Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:31:47.221Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:31:47.222Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:31:47.222Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.230Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.230Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.231Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.231Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.232Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.232Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.233Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.234Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.236Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.236Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.243Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.243Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.244Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:31:47.245Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:31:59.057Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:31:59.058Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:31:59.059Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:31:59.060Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:31:59.193Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:31:59.194Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:31:59.194Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:31:59.195Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:31:59.195Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:31:59.196Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"debug","timestamp":"2024-07-28T10:31:59.196Z","caller":"db/redis.go:382","msg":"Group not found in cache","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:31:59.197Z","caller":"dao/group_dao.go:345","msg":"Retrieving group","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:31:59.308Z","caller":"dao/group_dao.go:393","msg":"Group retrieved successfully","groupID":"group-1","duration":0.111502}
{"level":"debug","timestamp":"2024-07-28T10:31:59.309Z","caller":"db/redis.go:362","msg":"Group cached successfully","groupID":"group-1"}
{"level":"info","timestamp":"2024-07-28T10:31:59.309Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups/group-1","query":"","status":200,"latency":0.251852542,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:32:03.860Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:32:03.860Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:32:03.861Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:32:03.861Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:32:03.898Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:32:03.899Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:32:03.901Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:03.902Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:03.904Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:03.905Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:32:03.905Z","caller":"dao/group_dao.go:406","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:32:03.911Z","caller":"dao/group_dao.go:442","msg":"Groups listed successfully","count":1,"duration":0.006152583}
{"level":"info","timestamp":"2024-07-28T10:32:03.912Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.052500625,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"debug","timestamp":"2024-07-28T10:32:10.572Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:32:10.574Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:32:10.574Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:32:10.576Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:32:10.614Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:32:10.616Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:32:10.616Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:10.617Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:10.619Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:10.620Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:32:10.621Z","caller":"dao/group_dao.go:406","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:32:10.628Z","caller":"dao/group_dao.go:442","msg":"Groups listed successfully","count":1,"duration":0.0069325}
{"level":"info","timestamp":"2024-07-28T10:32:10.629Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.056968875,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
{"level":"info","timestamp":"2024-07-28T10:32:50.153Z","caller":"db/db.go:21","msg":"Connecting to Neo4j at URI","uri":"bolt://neo4j:7687"}
{"level":"info","timestamp":"2024-07-28T10:32:50.182Z","caller":"db/db.go:49","msg":"Successfully connected to Neo4j"}
{"level":"info","timestamp":"2024-07-28T10:32:50.183Z","caller":"db/redis.go:53","msg":"Successfully connected to Redis"}
{"level":"info","timestamp":"2024-07-28T10:32:50.184Z","caller":"dao/policy_dao.go:39","msg":"Ensuring unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.193Z","caller":"dao/policy_dao.go:64","msg":"Successfully ensured unique constraint on Policy ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.193Z","caller":"dao/user_dao.go:39","msg":"Ensuring unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.194Z","caller":"dao/user_dao.go:57","msg":"Successfully ensured unique constraint on User ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.194Z","caller":"dao/organization_dao.go:37","msg":"Ensuring unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.196Z","caller":"dao/organization_dao.go:55","msg":"Successfully ensured unique constraint on Organization ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.196Z","caller":"dao/department_dao.go:37","msg":"Ensuring unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.197Z","caller":"dao/department_dao.go:55","msg":"Successfully ensured unique constraint on Department ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.197Z","caller":"dao/role_dao.go:37","msg":"Ensuring unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.198Z","caller":"dao/role_dao.go:55","msg":"Successfully ensured unique constraint on Role ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.198Z","caller":"dao/group_dao.go:36","msg":"Ensuring unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.199Z","caller":"dao/group_dao.go:54","msg":"Successfully ensured unique constraint on Group ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.199Z","caller":"dao/permission_dao.go:35","msg":"Ensuring unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.201Z","caller":"dao/permission_dao.go:53","msg":"Successfully ensured unique constraint on Permission ID"}
{"level":"info","timestamp":"2024-07-28T10:32:50.202Z","caller":"app/main.go:88","msg":"Starting server","port":"8080"}
{"level":"debug","timestamp":"2024-07-28T10:32:51.074Z","caller":"db/redis.go:465","msg":"Rate limit check","key":"ratelimit:192.168.65.1","count":1,"limit":10,"allowed":true}
{"level":"info","timestamp":"2024-07-28T10:32:51.075Z","caller":"middleware/rate_limiter.go:42","msg":"Request allowed","ip":"192.168.65.1","limit":10,"per":0}
{"level":"info","timestamp":"2024-07-28T10:32:51.076Z","caller":"middleware/group_auth.go:102","msg":"Received token: %s","token":"Bearer eyJraWQiOiI5STE3b2V3WXg1NlhuQTZ5aFpWWTlBemV2c0QrUVl4OVdQUjhBMm5MY25rPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwMTIzNWRlYS01MDUxLTcwZDgtMDhhNy1kMDBlYzM0M2Y3ZTMiLCJjb2duaXRvOmdyb3VwcyI6WyJhbGl2ZS1hZG1pbiJdLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwvYXAtc291dGgtMV9SM2tUb3lzeUUiLCJjb2duaXRvOnVzZXJuYW1lIjoiYWxpdmUtYWRtaW4iLCJvcmlnaW5fanRpIjoiZDE4ZDY3YmQtYmMxMy00YjgwLTgxNjUtZTE1ZWZhMGI1NWMxIiwiYXVkIjoiNXI2YnNkcGs2MDVxb2JxYXRjbGhkN2FkNDIiLCJldmVudF9pZCI6IjMxOTBlNDRmLTBkYzAtNGZiZC1hYWQyLTJhMDFiNzRiMzllMCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzIyMTYxOTc0LCJleHAiOjE3MjIxNjU1NzQsImlhdCI6MTcyMjE2MTk3NCwianRpIjoiODY1MTQ5OGMtY2U1Ny00MzNlLWJlMDEtOGM4OTQ1M2M4OTUxIiwiZW1haWwiOiJkZXYubW9oaXRiZW5pd2FsQGdtYWlsLmNvbSJ9.a1dczaLeGZbNXA6EcRclOwE0wUKSQIYAZ2-knbQXRCdFwhbTgzo1YMbUJNdCsCTzK9DbTAvttXYzrnc64v6mUvyrb48EeuBf73_KheI350wfQbZWXOLW3GrzDRtP2PR88UVbVgTT9uPnqMH9bsk39AWw19WFCVdhMxregxozoXLANlEoRZqiZanrGs6cH7BOpDH96TvUA4kOBTkTMfsnSRgso9XODZ38YiG9b4bJoEyTaCYGrp675IN0WHiXmGwYM_ZGQpq7zTRBaCvGxLtRtKkmyKmH4puLg_yd-0SkezoHF_RWZxi5Ya3iUFVICtXZM-NU6PAQAYtfJaGy_QbwgQ"}
{"level":"info","timestamp":"2024-07-28T10:32:51.077Z","caller":"middleware/group_auth.go:44","msg":"Fetching JWKS from URL: %s","url":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE/.well-known/jwks.json"}
{"level":"info","timestamp":"2024-07-28T10:32:51.213Z","caller":"middleware/group_auth.go:95","msg":"Successfully parsed public key: %+v","publicKey":{"N":23638513619267131316045705987372522292113030654398391564693158857681298047483761358273308672454021728697284535483869581247910869249735545075949798110534502865072478785670378950329783496968399103842173785779270761895638963123252679657069678366753591148239971226110374364035829457304937077449480029737470711760833528141600028111010292692023369756600074727517755410625663008849726217585009178300284689876400741828977937095530169338393813208804449273104593251784286963093255584104347773059843218505295823296864840483490200435163775567572527840327002150396168163043822274073275809561241836971224736576130309314699305285069,"E":65537}}
{"level":"info","timestamp":"2024-07-28T10:32:51.214Z","caller":"middleware/group_auth.go:158","msg":"Token header: %+v","header":{"alg":"RS256","kid":"9I17oewYx56XnA6yhZVY9AzevsD+QYx9WPR8A2nLcnk="}}
{"level":"info","timestamp":"2024-07-28T10:32:51.215Z","caller":"middleware/group_auth.go:159","msg":"Token claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:51.216Z","caller":"middleware/group_auth.go:163","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:51.220Z","caller":"middleware/group_auth.go:118","msg":"Parsed claims: %+v","claims":{"aud":"5r6bsdpk605qobqatclhd7ad42","exp":1722165574,"jti":"8651498c-ce57-433e-be01-8c89453c8951","iat":1722161974,"iss":"https://cognito-idp.ap-south-1.amazonaws.com/ap-south-1_R3kToysyE","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3","cognito:groups":["alive-admin"],"cognito:username":"alive-admin","email_verified":true,"email":"dev.mohitbeniwal@gmail.com"}}
{"level":"info","timestamp":"2024-07-28T10:32:51.223Z","caller":"middleware/group_auth.go:129","msg":"Added user sub to context: %s","sub":"01235dea-5051-70d8-08a7-d00ec343f7e3"}
{"level":"info","timestamp":"2024-07-28T10:32:51.223Z","caller":"dao/group_dao.go:407","msg":"Listing groups","limit":10,"offset":0}
{"level":"info","timestamp":"2024-07-28T10:32:51.322Z","caller":"dao/group_dao.go:463","msg":"Groups listed successfully","count":1,"duration":0.098484458}
{"level":"info","timestamp":"2024-07-28T10:32:51.322Z","caller":"middleware/logger.go:39","msg":"Request processed","method":"GET","path":"/api/v1/groups","query":"","status":200,"latency":0.248850083,"ip":"192.168.65.1","user-agent":"PostmanRuntime/7.39.0"}
